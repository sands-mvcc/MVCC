<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP & HTTPS Protocol Learning Lab</title>
    <style>
        :root {
            --primary-green: #2e7d32; /* Deep Green */
            --accent-green: #4caf50;  /* Brighter Green */
            --dark-bg: #000000;       /* Black */
            --text-black: #212121;
            --white: #ffffff;
            --gray-light: #f4f4f4;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: var(--white); color: var(--text-black); margin: 0; padding: 0; }

        header {
            background-color: var(--dark-bg);
            color: var(--white);
            padding: 30px;
            text-align: center;
            border-bottom: 6px solid var(--primary-green);
        }

        .container { max-width: 1100px; margin: 20px auto; padding: 0 20px; }

        /* Navigation */
        .tabs { display: flex; flex-wrap: wrap; background: var(--gray-light); border-radius: 8px 8px 0 0; overflow: hidden; }
        .tab-btn {
            flex: 1; min-width: 120px; padding: 15px; cursor: pointer; border: none;
            background: none; font-weight: bold; transition: 0.3s; font-size: 0.9rem;
        }
        .tab-btn.active { background: var(--primary-green); color: white; }
        .tab-btn:hover:not(.active) { background: #e0e0e0; }

        .tab-content { 
            display: none; padding: 30px; border: 1px solid #ddd; border-top: none;
            animation: fadeIn 0.4s ease; border-radius: 0 0 8px 8px;
        }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Content Elements */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card { 
            border: 1px solid #ddd; padding: 20px; border-radius: 8px; 
            border-left: 5px solid var(--primary-green); transition: 0.3s; cursor: pointer;
        }
        .card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); background: #fafafa; }
        
        .terminal {
            background: #1a1a1a; color: #00ff00; padding: 15px; 
            font-family: 'Courier New', monospace; border-radius: 5px; margin-top: 10px; font-size: 0.85rem;
        }

        /* Header Bit Diagram */
        .bit-header { display: flex; background: #eee; font-weight: bold; border: 1px solid #333; margin-top: 10px; }
        .bit-field { border-right: 1px solid #333; padding: 10px 5px; text-align: center; font-size: 0.75rem; }
        .field-green { background: var(--primary-green); color: white; }

        /* Quiz */
        .quiz-box { background: var(--gray-light); padding: 25px; border-radius: 10px; }
        .progress-container { background: #ddd; height: 10px; border-radius: 5px; margin-bottom: 20px; }
        .progress-bar { height: 100%; background: var(--primary-green); width: 0%; transition: 0.4s; }
        .quiz-option { 
            display: block; width: 100%; padding: 12px; margin: 8px 0; 
            border: 1px solid #ccc; border-radius: 5px; text-align: left; cursor: pointer; background: white;
        }
        .quiz-option:hover { background: #f0f0f0; border-color: var(--primary-green); }

        /* Buttons */
        .btn { 
            padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; 
            font-weight: bold; transition: 0.2s; 
        }
        .btn-primary { background: var(--primary-green); color: white; }
        .btn-clear { background: #666; color: white; margin-left: 10px; }
        .btn:hover { opacity: 0.9; transform: scale(1.02); }

        /* Simulation */
        .sim-step { display: flex; align-items: flex-start; margin-bottom: 15px; opacity: 0.3; transition: 0.5s; }
        .sim-active { opacity: 1; }
        .sim-dot { width: 30px; height: 30px; background: var(--dark-bg); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0; }
    </style>
</head>
<body>

<header>
    <h1>HTTP & HTTPS PROTOCOL LAB</h1>
    <p>Unit 4: Web Communications & Secure Tunneling</p>
</header>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab(0)">Overview</button>
        <button class="tab-btn" onclick="showTab(1)">How It Works</button>
        <button class="tab-btn" onclick="showTab(2)">Frame Types</button>
        <button class="tab-btn" onclick="showTab(3)">Header Format</button>
        <button class="tab-btn" onclick="showTab(4)">Frame Builder</button>
        <button class="tab-btn" onclick="showTab(5)">Final Quiz</button>
    </div>

    <div id="tab0" class="tab-content active">
        <h2>Protocol Objectives</h2>
        <p>Students must understand the fundamental mechanism of the World Wide Web: The Request-Response cycle.</p>
        <div class="card-grid">
            <div class="card">
                <h3>HTTP (Insecure)</h3>
                <p>Standard protocol for transferring data. It operates in <strong>plaintext</strong>, meaning any intermediary can read the packets.</p>
                <ul><li>Port 80</li><li>No encryption</li><li>Fast, but vulnerable</li></ul>
            </div>
            <div class="card">
                <h3>HTTPS (Secure)</h3>
                <p>HTTP content wrapped inside a <strong>Transport Layer Security (TLS)</strong> tunnel. Ensures Privacy and Integrity.</p>
                <ul><li>Port 443</li><li>TLS/SSL Handshake</li><li>Required for modern SEO/Security</li></ul>
            </div>
        </div>
    </div>

    <div id="tab1" class="tab-content">
        <h2>Visual Flow: HTTPS Handshake</h2>
        <div id="sim-container" style="background: #fff; padding: 20px; border: 1px solid #ddd;">
            <div class="sim-step" id="s1"><div class="sim-dot">1</div><div><strong>TCP Handshake:</strong> Client sends [SYN] to Server to establish a connection.</div></div>
            <div class="sim-step" id="s2"><div class="sim-dot">2</div><div><strong>Client Hello:</strong> Client sends cipher suites and TLS version.</div></div>
            <div class="sim-step" id="s3"><div class="sim-dot">3</div><div><strong>Server Hello & Cert:</strong> Server sends its Digital Certificate for identity.</div></div>
            <div class="sim-step" id="s4"><div class="sim-dot">4</div><div><strong>Key Exchange:</strong> Encrypted keys are generated for the session.</div></div>
            <div class="sim-step" id="s5"><div class="sim-dot">5</div><div><strong>Encrypted HTTP:</strong> Data flows securely using symmetric encryption.</div></div>
        </div>
        <div style="margin-top: 20px;">
            <button class="btn btn-primary" onclick="startSim()">Run Simulation</button>
            <button class="btn btn-clear" onclick="resetSim()">Reset</button>
        </div>
    </div>

    <div id="tab2" class="tab-content">
        <h2>HTTP/2 Frame Inventory</h2>
        <p>Click a card to see the real-world wire format.</p>
        <div class="card-grid">
            <div class="card" onclick="toggleDetail('f1')">
                <h3>HEADERS Frame</h3>
                <p>Carries HTTP headers. Used to start a new stream.</p>
                <div id="f1" class="terminal" style="display:none;">:method: GET<br>:path: /api/v1/status<br>accept: */*</div>
            </div>
            <div class="card" onclick="toggleDetail('f2')">
                <h3>DATA Frame</h3>
                <p>Carries the actual application payload (HTML/Image/JSON).</p>
                <div id="f2" class="terminal" style="display:none;">{ "status": "online", "latency": "14ms" }</div>
            </div>
            <div class="card" onclick="toggleDetail('f3')">
                <h3>SETTINGS Frame</h3>
                <p>Initializes configuration between client and server.</p>
                <div id="f3" class="terminal" style="display:none;">SETTINGS_MAX_CONCURRENT_STREAMS: 100<br>SETTINGS_INITIAL_WINDOW_SIZE: 65535</div>
            </div>
        </div>
    </div>

    <div id="tab3" class="tab-content">
        <h2>The Binary Frame Header (9 Octets)</h2>
        <p>Every HTTP/2 frame starts with this precise bit layout:</p>
        
        <div class="bit-header">
            <div class="bit-field field-green" style="flex: 3;">Length (24 bits)</div>
            <div class="bit-field" style="flex: 1;">Type (8)</div>
        </div>
        <div class="bit-header">
            <div class="bit-field" style="flex: 1;">Flags (8)</div>
            <div class="bit-field" style="flex: 0.2;">R</div>
            <div class="bit-field field-green" style="flex: 3;">Stream Identifier (31 bits)</div>
        </div>

        <div style="margin-top: 25px;">
            <h3>Field Interpretations</h3>
            <ul>
                <li><strong>Length:</strong> Unsigned 24-bit integer. Max payload = 16,384 bytes default.</li>
                <li><strong>Type:</strong> Identifies if this is DATA (0x0), HEADERS (0x1), etc.</li>
                <li><strong>Stream ID:</strong> Allows 0 to be reserved for connection-level frames.</li>
            </ul>
        </div>
    </div>

    <div id="tab4" class="tab-content">
        <h2>Interactive Frame Builder</h2>
        <div style="background: var(--gray-light); padding: 25px; border-radius: 8px;">
            <div style="margin-bottom: 15px;">
                <label><strong>Select Frame Type:</strong></label><br>
                <select id="build-type" style="width:100%; padding:10px;" onchange="updateBuilder()">
                    <option value="0x1">HEADERS (0x1)</option>
                    <option value="0x0">DATA (0x0)</option>
                    <option value="0x4">SETTINGS (0x4)</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label><strong>Stream ID (1, 3, 5...):</strong></label><br>
                <input type="number" id="build-id" value="1" style="width:100%; padding:10px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label id="label-payload"><strong>Header Resource Path:</strong></label><br>
                <input type="text" id="build-payload" value="/index.html" style="width:100%; padding:10px;">
            </div>
            <p id="build-error" style="color:red; display:none;">Error: Stream ID must be positive.</p>
            <button class="btn btn-primary" onclick="generateFrame()">Generate Frame Hex</button>
            <button class="btn btn-clear" onclick="resetBuilder()">Clear</button>

            <div id="build-result" class="terminal" style="display:none; margin-top: 20px;"></div>
        </div>
    </div>

    <div id="tab5" class="tab-content">
        <div class="quiz-box">
            <div class="progress-container"><div id="p-bar" class="progress-bar"></div></div>
            <div id="quiz-content">
                <h3 id="q-text"></h3>
                <div id="q-options"></div>
            </div>
            <div id="quiz-final" style="display:none; text-align:center;">
                <h2>Assessment Results</h2>
                <h1 id="q-score" style="font-size: 3rem; color: var(--primary-green);">0/10</h1>
                <p id="q-feedback"></p>
                <button class="btn btn-primary" onclick="resetQuiz()">Retake Quiz</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Tab Logic
    function showTab(index) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab' + index).classList.add('active');
        document.querySelectorAll('.tab-btn')[index].classList.add('active');
    }

    // Tab 2 Simulation
    let simIdx = 1;
    function startSim() {
        if(simIdx > 5) resetSim();
        document.getElementById('s' + simIdx).classList.add('sim-active');
        simIdx++;
        if(simIdx <= 5) setTimeout(startSim, 800);
    }
    function resetSim() {
        simIdx = 1;
        document.querySelectorAll('.sim-step').forEach(s => s.classList.remove('sim-active'));
    }

    // Tab 3 Toggle
    function toggleDetail(id) {
        let el = document.getElementById(id);
        el.style.display = el.style.display === 'none' ? 'block' : 'none';
    }

    // Tab 5 Builder
    function updateBuilder() {
        let type = document.getElementById('build-type').value;
        let lbl = document.getElementById('label-payload');
        lbl.innerHTML = type === '0x0' ? '<strong>Payload Data:</strong>' : '<strong>Resource Path:</strong>';
    }

    function generateFrame() {
        let id = document.getElementById('build-id').value;
        let payload = document.getElementById('build-payload').value;
        let type = document.getElementById('build-type').value;
        let err = document.getElementById('build-error');
        let res = document.getElementById('build-result');

        if(id < 0 || id === "") { err.style.display = 'block'; return; }
        err.style.display = 'none';
        res.style.display = 'block';
        
        let hexId = parseInt(id).toString(16).padStart(8, '0');
        res.innerHTML = `RAW FRAME GENERATED:<br>[Header] Length: 00 00 ${payload.length.toString(16).padStart(2,'0')} | Type: ${type} | Stream: ${hexId}<br>[Payload] ${payload}`;
    }

    function resetBuilder() {
        document.getElementById('build-id').value = 1;
        document.getElementById('build-payload').value = "/index.html";
        document.getElementById('build-result').style.display = 'none';
    }

    // Tab 6 Quiz
    const questions = [
        {q: "Which port is used by default for HTTPS?", a: ["80", "443", "22", "53"], c: 1},
        {q: "HTTP/2 frames are in what format?", a: ["Plaintext", "Binary", "XML", "YAML"], c: 1},
        {q: "What does the TLS handshake provide?", a: ["Speed", "Encryption & Identity", "IP Addressing", "HTML Parsing"], c: 1},
        {q: "Which frame type initiates HTTP headers?", a: ["DATA", "SETTINGS", "HEADERS", "PING"], c: 2},
        {q: "The fixed header of an HTTP/2 frame is how many octets?", a: ["4", "9", "12", "16"], c: 1},
        {q: "What status code represents 'Page Not Found'?", a: ["200", "301", "404", "500"], c: 2},
        {q: "Which layer of the OSI model does HTTP inhabit?", a: ["Layer 3", "Layer 4", "Layer 7", "Layer 1"], c: 2},
        {q: "Stream ID '0' is reserved for what?", a: ["The first request", "The server only", "Connection-level control", "Errors"], c: 2},
        {q: "In HTTPS, who sends the digital certificate?", a: ["Client", "Server", "ISP", "Router"], c: 1},
        {q: "What does multiplexing allow in HTTP/2?", a: ["Multiple servers", "One request at a time", "Concurrent requests on one TCP connection", "Faster CPUs"], c: 2}
    ];

    let currentQ = 0;
    let score = 0;

    function loadQuiz() {
        if(currentQ >= questions.length) {
            showQuizResults();
            return;
        }
        let q = questions[currentQ];
        document.getElementById('q-text').innerText = (currentQ+1) + ". " + q.q;
        let optContainer = document.getElementById('q-options');
        optContainer.innerHTML = "";
        q.a.forEach((opt, i) => {
            let b = document.createElement('button');
            b.className = "quiz-option";
            b.innerText = opt;
            b.onclick = () => { if(i === q.c) score++; currentQ++; loadQuiz(); };
            optContainer.appendChild(b);
        });
        document.getElementById('p-bar').style.width = (currentQ / questions.length * 100) + "%";
    }

    function showQuizResults() {
        document.getElementById('quiz-content').style.display = 'none';
        document.getElementById('quiz-final').style.display = 'block';
        document.getElementById('q-score').innerText = score + "/10";
        document.getElementById('p-bar').style.width = "100%";
        document.getElementById('q-feedback').innerText = score > 7 ? "Excellent! You're ready for the certification exam." : "Review the Frame Format and Handshake sections again.";
    }

    function resetQuiz() {
        currentQ = 0; score = 0;
        document.getElementById('quiz-content').style.display = 'block';
        document.getElementById('quiz-final').style.display = 'none';
        loadQuiz();
    }

    window.onload = loadQuiz;
</script>

</body>
</html>
