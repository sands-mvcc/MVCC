<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OSI Model — Interactive Learning Module</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f4f1ec;
    --bg2: #eae6de;
    --bg3: #e0dbd2;
    --ink: #1a1814;
    --ink2: #4a4540;
    --ink3: #7a7268;
    --accent: #c84b2f;
    --accent2: #e8855a;
    --gold: #c4943a;
    --blue: #2d5fa6;
    --green: #2d7a4f;
    --teal: #1d7a8a;
    --purple: #6b3fa0;
    --border: #d4cec4;
    --shadow: rgba(26,24,20,0.1);
    
    /* Layer colors */
    --l1: #c84b2f; /* Physical */
    --l2: #d4692a; /* Data Link */
    --l3: #c4943a; /* Network */
    --l4: #2d7a4f; /* Transport */
    --l5: #1d7a8a; /* Session */
    --l6: #2d5fa6; /* Presentation */
    --l7: #6b3fa0; /* Application */
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--ink);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ── NAV ── */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    background: rgba(244,241,236,0.92);
    backdrop-filter: blur(12px);
    border-bottom: 1.5px solid var(--border);
    padding: 0 2rem;
    height: 60px;
    display: flex; align-items: center; justify-content: space-between;
  }
  .nav-logo {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 1.1rem;
    letter-spacing: -0.02em;
    color: var(--ink);
    display: flex; align-items: center; gap: 0.5rem;
  }
  .nav-logo span { color: var(--accent); }
  .nav-links {
    display: flex; gap: 0.25rem; list-style: none;
    overflow-x: auto; max-width: 75vw;
  }
  .nav-links li a {
    display: block;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--ink2);
    text-decoration: none;
    padding: 0.35rem 0.7rem;
    border-radius: 100px;
    transition: background 0.2s, color 0.2s;
    white-space: nowrap;
  }
  .nav-links li a:hover { background: var(--bg3); color: var(--ink); }
  .nav-links li a.active { background: var(--ink); color: var(--bg); }

  /* ── HERO ── */
  .hero {
    padding: 120px 2rem 80px;
    max-width: 1100px; margin: 0 auto;
    position: relative;
  }
  .hero-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem; letter-spacing: 0.15em;
    color: var(--accent); text-transform: uppercase;
    margin-bottom: 1rem;
  }
  .hero h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(2.8rem, 7vw, 5.5rem);
    font-weight: 800;
    line-height: 0.95;
    letter-spacing: -0.04em;
    color: var(--ink);
    margin-bottom: 1.5rem;
  }
  .hero h1 em { color: var(--accent); font-style: normal; }
  .hero-desc {
    font-size: 1.1rem;
    color: var(--ink2);
    max-width: 560px;
    line-height: 1.7;
    margin-bottom: 2.5rem;
  }
  .hero-stats {
    display: flex; gap: 2.5rem; flex-wrap: wrap;
  }
  .stat { display: flex; flex-direction: column; gap: 0.2rem; }
  .stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 2.2rem; font-weight: 800;
    color: var(--ink); letter-spacing: -0.03em;
  }
  .stat-label {
    font-size: 0.8rem; color: var(--ink3); font-weight: 500;
    text-transform: uppercase; letter-spacing: 0.08em;
  }

  /* ── SECTION WRAPPER ── */
  section {
    max-width: 1100px; margin: 0 auto;
    padding: 80px 2rem;
  }
  .section-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem; letter-spacing: 0.15em;
    color: var(--accent); text-transform: uppercase;
    margin-bottom: 0.75rem;
  }
  .section-title {
    font-family: 'Syne', sans-serif;
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    font-weight: 800; letter-spacing: -0.03em;
    color: var(--ink); margin-bottom: 1rem;
    line-height: 1.1;
  }
  .section-intro {
    font-size: 1rem; color: var(--ink2); line-height: 1.7;
    max-width: 680px; margin-bottom: 3rem;
  }

  /* ── OSI STACK INTERACTIVE ── */
  .osi-container {
    display: grid;
    grid-template-columns: 240px 1fr;
    gap: 2rem;
    align-items: start;
  }
  .osi-stack { display: flex; flex-direction: column; gap: 4px; position: sticky; top: 80px; }
  .osi-layer-btn {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.85rem 1rem;
    border: 2px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    background: white;
    transition: all 0.2s;
    text-align: left;
    width: 100%;
  }
  .osi-layer-btn:hover { transform: translateX(4px); border-color: var(--border); }
  .osi-layer-btn.active { border-color: var(--layer-color); background: white; box-shadow: 0 0 0 3px color-mix(in srgb, var(--layer-color) 15%, transparent); }
  .layer-num {
    width: 28px; height: 28px;
    border-radius: 6px;
    background: var(--layer-color);
    color: white;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.8rem;
    flex-shrink: 0;
  }
  .layer-btn-text { display: flex; flex-direction: column; gap: 2px; }
  .layer-btn-name {
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.85rem;
    color: var(--ink);
  }
  .layer-btn-sub { font-size: 0.7rem; color: var(--ink3); }

  .osi-detail-panel { min-height: 600px; }
  .layer-panel {
    display: none;
    animation: fadeSlide 0.3s ease;
  }
  .layer-panel.active { display: block; }
  @keyframes fadeSlide {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .layer-header {
    background: white;
    border: 2px solid var(--border);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 1.25rem;
    position: relative; overflow: hidden;
  }
  .layer-header::before {
    content: '';
    position: absolute; top: 0; left: 0; bottom: 0; width: 6px;
    background: var(--layer-color);
    border-radius: 16px 0 0 16px;
  }
  .lh-top { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; padding-left: 1rem; }
  .lh-badge {
    padding: 0.4rem 1rem;
    border-radius: 100px;
    background: color-mix(in srgb, var(--layer-color) 12%, transparent);
    color: var(--layer-color);
    font-family: 'Syne', sans-serif; font-size: 0.75rem; font-weight: 700;
    letter-spacing: 0.05em; text-transform: uppercase;
  }
  .lh-title {
    font-family: 'Syne', sans-serif;
    font-size: 1.6rem; font-weight: 800;
    color: var(--ink); letter-spacing: -0.02em;
  }
  .lh-desc { padding-left: 1rem; font-size: 0.97rem; line-height: 1.75; color: var(--ink2); }

  .info-grid {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 1rem; margin-bottom: 1.25rem;
  }
  .info-card {
    background: white; border: 1.5px solid var(--border);
    border-radius: 12px; padding: 1.25rem;
  }
  .info-card h4 {
    font-family: 'Syne', sans-serif; font-size: 0.78rem;
    font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;
    color: var(--layer-color); margin-bottom: 0.75rem;
  }
  .info-card ul { list-style: none; display: flex; flex-direction: column; gap: 0.4rem; }
  .info-card li { font-size: 0.87rem; color: var(--ink2); display: flex; align-items: flex-start; gap: 0.5rem; line-height: 1.5; }
  .info-card li::before { content: '›'; color: var(--layer-color); font-weight: 700; flex-shrink: 0; }

  .pdu-box {
    background: white; border: 1.5px solid var(--border);
    border-radius: 12px; padding: 1.25rem; margin-bottom: 1.25rem;
  }
  .pdu-box h4 {
    font-family: 'Syne', sans-serif; font-size: 0.78rem;
    font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;
    color: var(--ink3); margin-bottom: 0.75rem;
  }
  .pdu-visual {
    display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;
  }
  .pdu-seg {
    padding: 0.4rem 0.9rem; border-radius: 6px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.78rem; font-weight: 500;
    border: 1.5px solid;
  }
  .pdu-seg.header { background: color-mix(in srgb, var(--layer-color) 15%, white); border-color: var(--layer-color); color: var(--layer-color); }
  .pdu-seg.data { background: var(--bg2); border-color: var(--border); color: var(--ink2); }
  .pdu-seg.trailer { background: color-mix(in srgb, var(--layer-color) 8%, white); border-color: var(--layer-color); color: var(--layer-color); opacity: 0.7; }
  .pdu-arrow { color: var(--ink3); font-size: 0.9rem; }

  /* ── ENCAPSULATION ANIMATION ── */
  #encap-section { background: var(--bg2); border-radius: 24px; padding: 2.5rem; }
  .encap-title {
    font-family: 'Syne', sans-serif; font-size: 1.4rem; font-weight: 800;
    margin-bottom: 0.5rem; color: var(--ink);
  }
  .encap-sub { font-size: 0.9rem; color: var(--ink2); margin-bottom: 2rem; }
  .encap-visual { display: flex; flex-direction: column; gap: 6px; margin-bottom: 1.5rem; }
  .encap-row {
    display: flex; align-items: center; gap: 0.75rem;
    transition: all 0.4s ease;
  }
  .encap-label {
    width: 130px; font-size: 0.75rem; font-weight: 600;
    color: white; padding: 0.45rem 0.75rem; border-radius: 6px;
    text-align: center; flex-shrink: 0;
    font-family: 'Syne', sans-serif;
  }
  .encap-data {
    display: flex; align-items: center; gap: 4px; flex-wrap: nowrap; overflow: hidden;
  }
  .encap-seg {
    padding: 0.45rem 0.7rem; border-radius: 5px;
    font-family: 'JetBrains Mono', monospace; font-size: 0.7rem;
    border: 1.5px solid; white-space: nowrap;
    transition: all 0.4s ease;
  }
  .encap-controls { display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap; }
  .btn {
    display: inline-flex; align-items: center; gap: 0.5rem;
    padding: 0.6rem 1.4rem;
    border-radius: 100px;
    font-family: 'DM Sans', sans-serif; font-size: 0.87rem; font-weight: 500;
    cursor: pointer; transition: all 0.2s; border: none;
  }
  .btn-primary { background: var(--ink); color: white; }
  .btn-primary:hover { background: var(--accent); }
  .btn-secondary { background: white; color: var(--ink); border: 1.5px solid var(--border); }
  .btn-secondary:hover { border-color: var(--ink); }
  .encap-step-label {
    font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
    color: var(--ink3); padding: 0.5rem 1rem; background: white;
    border-radius: 100px; border: 1px solid var(--border);
  }

  /* ── PROTOCOLS TABLE ── */
  .proto-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 0.75rem;
  }
  .proto-card {
    background: white; border: 1.5px solid var(--border);
    border-radius: 10px; padding: 1rem;
    cursor: pointer; transition: all 0.2s;
  }
  .proto-card:hover { border-color: var(--proto-color); transform: translateY(-2px); box-shadow: 0 4px 12px var(--shadow); }
  .proto-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
  .proto-name {
    font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; font-weight: 500;
    color: var(--proto-color);
  }
  .proto-layer-tag {
    font-size: 0.65rem; padding: 0.2rem 0.5rem; border-radius: 100px;
    background: color-mix(in srgb, var(--proto-color) 12%, transparent);
    color: var(--proto-color); font-weight: 600;
  }
  .proto-desc { font-size: 0.8rem; color: var(--ink2); line-height: 1.5; }

  /* ── QUIZ ── */
  .quiz-container { max-width: 700px; }
  .quiz-progress { margin-bottom: 1.5rem; }
  .progress-bar {
    height: 4px; background: var(--border); border-radius: 100px; overflow: hidden; margin-bottom: 0.5rem;
  }
  .progress-fill { height: 100%; background: var(--accent); transition: width 0.4s ease; border-radius: 100px; }
  .progress-text { font-size: 0.8rem; color: var(--ink3); font-family: 'JetBrains Mono', monospace; }

  .quiz-card {
    background: white; border: 1.5px solid var(--border);
    border-radius: 16px; padding: 2rem;
  }
  .quiz-q-num {
    font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
    color: var(--accent); margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em;
  }
  .quiz-question {
    font-family: 'Syne', sans-serif; font-size: 1.15rem; font-weight: 700;
    color: var(--ink); margin-bottom: 1.5rem; line-height: 1.4;
  }
  .quiz-options { display: flex; flex-direction: column; gap: 0.6rem; }
  .quiz-opt {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.85rem 1.1rem;
    border: 1.5px solid var(--border); border-radius: 10px;
    cursor: pointer; transition: all 0.15s; background: var(--bg);
    font-size: 0.9rem; color: var(--ink2);
  }
  .quiz-opt:hover:not(.disabled) { border-color: var(--ink); background: white; color: var(--ink); }
  .quiz-opt.correct { border-color: var(--green); background: color-mix(in srgb, var(--green) 8%, white); color: var(--green); font-weight: 600; }
  .quiz-opt.wrong { border-color: var(--accent); background: color-mix(in srgb, var(--accent) 8%, white); color: var(--accent); }
  .quiz-opt.disabled { cursor: default; }
  .opt-marker {
    width: 22px; height: 22px; border-radius: 50%; border: 2px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-size: 0.7rem; font-weight: 700; flex-shrink: 0; transition: all 0.15s;
    font-family: 'Syne', sans-serif;
  }
  .quiz-opt.correct .opt-marker { border-color: var(--green); background: var(--green); color: white; }
  .quiz-opt.wrong .opt-marker { border-color: var(--accent); background: var(--accent); color: white; }

  .quiz-feedback {
    margin-top: 1.25rem; padding: 1rem; border-radius: 8px;
    font-size: 0.9rem; line-height: 1.6; display: none;
  }
  .quiz-feedback.correct { background: color-mix(in srgb, var(--green) 10%, white); color: var(--green); border: 1px solid color-mix(in srgb, var(--green) 25%, transparent); }
  .quiz-feedback.wrong { background: color-mix(in srgb, var(--accent) 10%, white); color: var(--accent); border: 1px solid color-mix(in srgb, var(--accent) 25%, transparent); }

  .quiz-nav { display: flex; gap: 0.75rem; margin-top: 1.25rem; align-items: center; }
  .quiz-score {
    margin-left: auto; font-family: 'Syne', sans-serif; font-weight: 700;
    font-size: 0.9rem; color: var(--ink2);
  }

  /* ── MNEMONIC ── */
  .mnemonic-box {
    background: white; border: 2px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 2rem;
  }
  .mnemonic-word {
    display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; margin-bottom: 1.5rem;
  }
  .mnem-letter {
    width: 52px; height: 52px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 800; color: white;
    flex-shrink: 0;
  }
  .mnem-full {
    font-family: 'Syne', sans-serif; font-size: 1.15rem; font-weight: 700; color: var(--ink);
    line-height: 1.2;
  }
  .mnem-sub { font-size: 0.82rem; color: var(--ink3); }

  /* ── COMPARISON TABLE ── */
  .compare-table {
    width: 100%; border-collapse: separate; border-spacing: 0;
    background: white; border-radius: 16px; overflow: hidden;
    border: 1.5px solid var(--border);
  }
  .compare-table th {
    padding: 1rem; background: var(--ink); color: white;
    font-family: 'Syne', sans-serif; font-size: 0.82rem; font-weight: 700;
    text-align: left; letter-spacing: 0.05em; text-transform: uppercase;
  }
  .compare-table td {
    padding: 0.9rem 1rem; border-bottom: 1px solid var(--border);
    font-size: 0.87rem; color: var(--ink2); vertical-align: top;
  }
  .compare-table tr:last-child td { border-bottom: none; }
  .compare-table tr:hover td { background: var(--bg); }
  .model-tag {
    display: inline-block; padding: 0.25rem 0.65rem; border-radius: 100px;
    font-family: 'Syne', sans-serif; font-size: 0.72rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
  }

  /* ── FOOTER ── */
  footer {
    border-top: 1.5px solid var(--border);
    padding: 2rem; text-align: center;
    font-size: 0.82rem; color: var(--ink3);
  }

  /* ── TABS ── */
  .tab-nav { display: flex; gap: 0.25rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
  .tab-btn {
    padding: 0.5rem 1.1rem; border-radius: 100px; border: none;
    font-family: 'DM Sans', sans-serif; font-size: 0.82rem; font-weight: 500;
    cursor: pointer; transition: all 0.15s;
    background: var(--bg2); color: var(--ink2);
  }
  .tab-btn.active, .tab-btn:hover { background: var(--ink); color: white; }
  .tab-panel { display: none; }
  .tab-panel.active { display: block; animation: fadeSlide 0.25s ease; }

  /* ── RESPONSIVE ── */
  @media (max-width: 768px) {
    .osi-container { grid-template-columns: 1fr; }
    .osi-stack { flex-direction: row; flex-wrap: wrap; position: static; }
    .osi-layer-btn { width: auto; padding: 0.5rem 0.75rem; }
    .info-grid { grid-template-columns: 1fr; }
    .layer-btn-sub { display: none; }
    nav { padding: 0 1rem; }
    .nav-links { display: none; }
  }
  @media (max-width: 900px) {
    .hero { padding-top: 100px; }
  }

  /* ── SEPARATOR ── */
  .sep { height: 1px; background: var(--border); max-width: 1100px; margin: 0 auto; }

  /* ── TOOLTIP ── */
  [data-tip] { position: relative; cursor: help; }
  [data-tip]::after {
    content: attr(data-tip);
    position: absolute; bottom: calc(100% + 8px); left: 50%; transform: translateX(-50%);
    background: var(--ink); color: white; padding: 0.4rem 0.8rem; border-radius: 6px;
    font-size: 0.75rem; white-space: nowrap; pointer-events: none;
    opacity: 0; transition: opacity 0.2s; z-index: 99;
    font-family: 'DM Sans', sans-serif; font-weight: 400;
  }
  [data-tip]:hover::after { opacity: 1; }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-logo">OSI<span>.</span>Learn</div>
  <ul class="nav-links" id="navLinks">
    <li><a href="#overview" class="active">Overview</a></li>
    <li><a href="#layers">Layers</a></li>
    <li><a href="#encapsulation">Encapsulation</a></li>
    <li><a href="#protocols">Protocols</a></li>
    <li><a href="#vs-tcpip">OSI vs TCP/IP</a></li>
    <li><a href="#mnemonic">Memory Aid</a></li>
    <li><a href="#quiz">Quiz</a></li>
  </ul>
</nav>

<!-- HERO -->
<div class="hero" id="overview">
  <p class="hero-label">Network Administration · Foundational Concepts</p>
  <h1>The <em>OSI</em><br>Reference Model</h1>
  <p class="hero-desc">
    A conceptual framework that standardizes how network systems communicate — dividing complex network communication into seven distinct, interoperable layers.
  </p>
  <div class="hero-stats">
    <div class="stat"><span class="stat-num">7</span><span class="stat-label">Layers</span></div>
    <div class="stat"><span class="stat-num">1984</span><span class="stat-label">ISO Standard</span></div>
    <div class="stat"><span class="stat-num">50+</span><span class="stat-label">Protocols</span></div>
    <div class="stat"><span class="stat-num">∞</span><span class="stat-label">Applicable Networks</span></div>
  </div>
</div>

<div class="sep"></div>

<!-- LAYERS SECTION -->
<section id="layers">
  <p class="section-tag">Module 01 — Core Architecture</p>
  <h2 class="section-title">The Seven Layers</h2>
  <p class="section-intro">Click each layer to explore its role, protocols, PDU, hardware, and real-world responsibilities. Layers 7–5 are the <strong>upper (host) layers</strong>; layers 4–1 are the <strong>lower (media/transport) layers</strong>.</p>

  <div class="osi-container">
    <!-- STACK BUTTONS -->
    <div class="osi-stack" id="osiStack"></div>
    <!-- DETAIL PANELS -->
    <div class="osi-detail-panel" id="osiDetail"></div>
  </div>
</section>

<div class="sep"></div>

<!-- ENCAPSULATION -->
<section id="encapsulation">
  <p class="section-tag">Module 02 — Data Flow</p>
  <h2 class="section-title">Encapsulation &amp; De-encapsulation</h2>
  <p class="section-intro">As data travels down the OSI stack on the sending device, each layer <strong>adds its own header</strong> (and sometimes trailer). The process is reversed — called de-encapsulation — on the receiving device.</p>

  <div id="encap-section">
    <p class="encap-title">Watch Encapsulation in Action</p>
    <p class="encap-sub">Step through the process to see how each layer wraps the data with its own header information.</p>
    <div class="encap-visual" id="encapVisual"></div>
    <div class="encap-controls">
      <button class="btn btn-primary" onclick="stepEncap(1)">▶ Step Down</button>
      <button class="btn btn-secondary" onclick="stepEncap(-1)">◀ Step Up</button>
      <button class="btn btn-secondary" onclick="resetEncap()">↺ Reset</button>
      <span class="encap-step-label" id="encapStepLabel">Layer 7 — Start</span>
    </div>
  </div>
</section>

<div class="sep"></div>

<!-- PROTOCOLS -->
<section id="protocols">
  <p class="section-tag">Module 03 — Protocol Suite</p>
  <h2 class="section-title">Key Protocols by Layer</h2>
  <p class="section-intro">Network administrators must know which protocols operate at which layers. Filter by layer group or browse all protocols below.</p>

  <div class="tab-nav" id="protoTabs"></div>
  <div id="protoContent"></div>
</section>

<div class="sep"></div>

<!-- OSI vs TCP/IP -->
<section id="vs-tcpip">
  <p class="section-tag">Module 04 — Model Comparison</p>
  <h2 class="section-title">OSI vs. TCP/IP Model</h2>
  <p class="section-intro">While OSI is the conceptual standard used for teaching and troubleshooting, the TCP/IP model is what the internet actually runs on. Network admins must understand both and map between them.</p>

  <table class="compare-table">
    <thead>
      <tr>
        <th>OSI Layer</th>
        <th>TCP/IP Layer</th>
        <th>Key Protocols</th>
        <th>PDU</th>
        <th>Admin Relevance</th>
      </tr>
    </thead>
    <tbody id="compareBody"></tbody>
  </table>
</section>

<div class="sep"></div>

<!-- MNEMONIC -->
<section id="mnemonic">
  <p class="section-tag">Module 05 — Memory Technique</p>
  <h2 class="section-title">Mnemonics to Remember the Layers</h2>
  <p class="section-intro">Network administrators use simple phrases to memorize the seven layers — both top-down (Application → Physical) and bottom-up (Physical → Application).</p>

  <div id="mnemonicDisplay"></div>
</section>

<div class="sep"></div>

<!-- QUIZ -->
<section id="quiz">
  <p class="section-tag">Module 06 — Knowledge Check</p>
  <h2 class="section-title">Test Your Understanding</h2>
  <p class="section-intro">Answer questions covering OSI layer functions, protocols, PDUs, and troubleshooting scenarios — the kind of knowledge tested on CompTIA Network+ and CCNA exams.</p>

  <div class="quiz-container">
    <div class="quiz-progress">
      <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
      <span class="progress-text" id="progressText">Question 0 of 20</span>
    </div>
    <div id="quizCard"></div>
  </div>
</section>

<footer>
  <strong>OSI.Learn</strong> — Interactive Network Administration Module &nbsp;|&nbsp; Based on ISO/IEC 7498-1 Standard &nbsp;|&nbsp; For educational use
</footer>

<script>
// ══════════════════════════════════════════════
// DATA
// ══════════════════════════════════════════════
const layers = [
  {
    num: 7, name: "Application", abbr: "App",
    color: "#6b3fa0",
    role: "Provides network services directly to end-user applications. It is the layer closest to the user and acts as the interface between the application and the network.",
    functions: ["Provides high-level APIs including resource sharing and remote file access","Handles application-level authentication and authorization","Manages HTTP, FTP, SMTP, DNS, and other application protocols","Provides network transparency to the user's application","Handles flow control and error recovery at the application level"],
    protocols: ["HTTP/HTTPS","FTP/SFTP","SMTP/POP3/IMAP","DNS","DHCP","SNMP","Telnet/SSH","RDP"],
    pdu: "Data",
    pduParts: ["APP Header", "Data"],
    devices: ["Layer 7 Firewalls","Load Balancers","Proxy Servers","Application Gateways"],
    adminNotes: ["Monitor application-layer traffic for security anomalies","Configure DNS and DHCP services","Manage SSL/TLS certificates","Troubleshoot application connectivity issues"],
    realWorld: "When you open a browser and type a URL, the Application layer handles HTTP/HTTPS, DNS resolution, and presents the web content to the user."
  },
  {
    num: 6, name: "Presentation", abbr: "Pres",
    color: "#2d5fa6",
    role: "Responsible for data translation, encryption, and compression. It ensures that data sent from the Application layer of one system can be read by the Application layer of another system.",
    functions: ["Data translation between different encoding formats","Encryption and decryption (TLS/SSL processing)","Data compression and decompression","Character encoding (ASCII, Unicode, EBCDIC)","Serialization and deserialization (XML, JSON)"],
    protocols: ["TLS/SSL","JPEG/PNG/GIF (image formats)","MPEG/MP4 (video formats)","ASCII/Unicode","XDR (External Data Representation)"],
    pdu: "Data",
    pduParts: ["PRES Header", "Data"],
    devices: ["SSL Accelerators","Gateways with codec support"],
    adminNotes: ["Configure TLS/SSL on web servers","Manage certificate stores and PKI","Troubleshoot encoding/character set mismatches","Handle multimedia format conversions"],
    realWorld: "When you access HTTPS, the Presentation layer handles TLS encryption/decryption, converting your browser's data to a secure format for transmission."
  },
  {
    num: 5, name: "Session", abbr: "Sess",
    color: "#1d7a8a",
    role: "Manages sessions (connections) between applications. It establishes, maintains, and terminates communication sessions between two devices.",
    functions: ["Session establishment, maintenance, and termination","Authentication and authorization at session level","Synchronization with checkpoints for long data transfers","Dialog control (half-duplex vs. full-duplex)","Session recovery after interruption"],
    protocols: ["NetBIOS","RPC (Remote Procedure Call)","SQL sessions","NFS","SMB","PPTP"],
    pdu: "Data",
    pduParts: ["SESS Header", "Data"],
    devices: ["Application servers","Session border controllers"],
    adminNotes: ["Troubleshoot session timeouts","Configure session persistence on load balancers","Manage database connection pools","Handle VPN session management"],
    realWorld: "When you log into a website, the Session layer maintains your authenticated session with checkpoints, so you don't lose progress if a brief network disruption occurs."
  },
  {
    num: 4, name: "Transport", abbr: "Trans",
    color: "#2d7a4f",
    role: "Provides end-to-end communication services for applications. It ensures complete data transfer with error recovery, flow control, and segmentation/reassembly.",
    functions: ["Segmentation of data into segments (TCP) or datagrams (UDP)","Port addressing (source and destination ports)","Flow control to prevent congestion","Error detection and correction (TCP)","Connection establishment (TCP 3-way handshake)","Multiplexing multiple applications"],
    protocols: ["TCP (Transmission Control Protocol)","UDP (User Datagram Protocol)","SCTP","DCCP","TLS (transport context)"],
    pdu: "Segment (TCP) / Datagram (UDP)",
    pduParts: ["TCP/UDP Header", "Segment Data"],
    devices: ["Firewalls (stateful inspection)","Load Balancers","Intrusion Detection Systems"],
    adminNotes: ["Configure firewall rules by port number","Analyze TCP 3-way handshake in packet captures","Troubleshoot TCP session establishment issues","Optimize TCP window sizes","Monitor port utilization"],
    realWorld: "TCP port 443 (HTTPS) is a Transport layer concept — the port number directs traffic to the correct application on the server."
  },
  {
    num: 3, name: "Network", abbr: "Net",
    color: "#c4943a",
    role: "Handles logical addressing and routing — determining the best path for data to travel across multiple networks from source to destination.",
    functions: ["Logical (IP) addressing","Routing between networks","Path determination algorithms","Packet forwarding","Fragmentation and reassembly","ICMP error reporting","NAT/PAT translation"],
    protocols: ["IPv4 / IPv6","ICMP / ICMPv6","OSPF","EIGRP","BGP","RIP","ARP (conceptually)","IPsec"],
    pdu: "Packet",
    pduParts: ["IP Header", "Segment"],
    devices: ["Routers","Layer 3 Switches","Multilayer Switches","Firewalls","VPN Concentrators"],
    adminNotes: ["Configure IP addressing and subnetting","Design and implement routing protocols","Configure static routes","Troubleshoot routing table issues","Implement access control lists (ACLs)","Manage NAT/PAT"],
    realWorld: "A router operates at Layer 3 — it reads the IP destination address in a packet and forwards it toward its destination across different networks."
  },
  {
    num: 2, name: "Data Link", abbr: "DL",
    color: "#d4692a",
    role: "Provides node-to-node data transfer on a single network segment. It handles physical addressing (MAC), frame formation, error detection, and media access control.",
    functions: ["MAC addressing (physical addressing)","Frame encapsulation","Error detection with CRC/FCS","Media access control (CSMA/CD, CSMA/CA)","Flow control between adjacent nodes","VLAN tagging (802.1Q)","Spanning Tree Protocol (STP)"],
    protocols: ["Ethernet (802.3)","Wi-Fi (802.11)","PPP (Point-to-Point Protocol)","HDLC","Frame Relay","ATM","VLANs (802.1Q)","STP (802.1D)"],
    pdu: "Frame",
    pduParts: ["Frame Header (MAC)", "Packet", "FCS Trailer"],
    devices: ["Switches","Bridges","Wireless Access Points","Network Interface Cards (NICs)"],
    adminNotes: ["Configure VLANs and trunk ports","Troubleshoot using MAC address tables","Manage Spanning Tree Protocol","Configure port security","Troubleshoot duplex/speed mismatches","Implement 802.1X port authentication"],
    realWorld: "Ethernet frames carry MAC addresses at Layer 2 — when you connect your laptop to a switch, the switch builds a MAC address table to intelligently forward frames."
  },
  {
    num: 1, name: "Physical", abbr: "Phys",
    color: "#c84b2f",
    role: "The lowest layer — defines the electrical, mechanical, and procedural specifications for transmitting raw bits over a physical medium.",
    functions: ["Bit transmission over physical media","Signal encoding (NRZ, Manchester encoding)","Physical topology definitions","Modulation techniques","Bit rate and bandwidth specifications","Cable specifications and connector types","Synchronization of bits"],
    protocols: ["Ethernet physical standards (1000BASE-T, 10GBASE-SR)","USB","DSL","SONET/SDH","Bluetooth (PHY layer)","802.11 (PHY layer)","RS-232"],
    pdu: "Bits",
    pduParts: ["Raw Bits (0s and 1s)"],
    devices: ["Hubs","Repeaters","Cables (Cat5e/6/6a, Fiber)","Connectors (RJ-45)","Modems","Transceivers","Media Converters"],
    adminNotes: ["Test cable continuity and certification","Identify and replace faulty cables/connectors","Measure signal strength and noise levels","Install and maintain structured cabling","Configure and troubleshoot fiber optic links","Understand TDR/OTDR testing"],
    realWorld: "When you plug in an Ethernet cable, the Physical layer handles the electrical signals representing 0s and 1s traveling over copper or light pulses through fiber."
  }
];

const protocols = [
  { name: "HTTP/HTTPS", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Web page transfer. HTTPS adds TLS encryption. Default ports 80/443." },
  { name: "DNS", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Resolves domain names to IP addresses. Uses UDP port 53 (TCP for zone transfers)." },
  { name: "DHCP", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Dynamically assigns IP addresses to hosts. Uses UDP ports 67/68." },
  { name: "SMTP", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Sends email between mail servers. Port 25 (or 587 with authentication)." },
  { name: "FTP/SFTP", layer: 7, lname: "Application", color: "#6b3fa0", desc: "File Transfer Protocol. FTP uses ports 20/21; SFTP uses SSH on port 22." },
  { name: "SSH", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Secure remote shell access. Encrypted terminal sessions on port 22." },
  { name: "SNMP", layer: 7, lname: "Application", color: "#6b3fa0", desc: "Network device monitoring and management. Uses UDP ports 161/162." },
  { name: "TLS/SSL", layer: 6, lname: "Presentation", color: "#2d5fa6", desc: "Encrypts data in transit. TLS 1.3 is current standard. Operates before application data." },
  { name: "JPEG/MPEG", layer: 6, lname: "Presentation", color: "#2d5fa6", desc: "Multimedia compression formats. Presentation layer handles encoding/decoding." },
  { name: "NetBIOS", layer: 5, lname: "Session", color: "#1d7a8a", desc: "Legacy Windows session management for file/printer sharing over LAN." },
  { name: "RPC", layer: 5, lname: "Session", color: "#1d7a8a", desc: "Remote Procedure Call — allows executing functions on remote systems." },
  { name: "SMB", layer: 5, lname: "Session", color: "#1d7a8a", desc: "Server Message Block — Windows file and printer sharing protocol." },
  { name: "TCP", layer: 4, lname: "Transport", color: "#2d7a4f", desc: "Connection-oriented, reliable delivery. Uses 3-way handshake (SYN, SYN-ACK, ACK)." },
  { name: "UDP", layer: 4, lname: "Transport", color: "#2d7a4f", desc: "Connectionless, fast, unreliable. Used for DNS, VoIP, streaming, gaming." },
  { name: "IPv4", layer: 3, lname: "Network", color: "#c4943a", desc: "32-bit logical addressing. Dominant internet protocol. Supports 4.3B addresses." },
  { name: "IPv6", layer: 3, lname: "Network", color: "#c4943a", desc: "128-bit addressing. Successor to IPv4 with virtually unlimited address space." },
  { name: "ICMP", layer: 3, lname: "Network", color: "#c4943a", desc: "Error reporting and diagnostics. Used by ping and traceroute commands." },
  { name: "OSPF", layer: 3, lname: "Network", color: "#c4943a", desc: "Open Shortest Path First — link-state interior routing protocol (IGP)." },
  { name: "BGP", layer: 3, lname: "Network", color: "#c4943a", desc: "Border Gateway Protocol — the routing protocol of the internet (EGP)." },
  { name: "ARP", layer: 3, lname: "Network", color: "#c4943a", desc: "Address Resolution Protocol — maps IP addresses to MAC addresses on a local network." },
  { name: "Ethernet", layer: 2, lname: "Data Link", color: "#d4692a", desc: "802.3 standard for wired networking. Uses MAC addresses and CSMA/CD." },
  { name: "802.11 Wi-Fi", layer: 2, lname: "Data Link", color: "#d4692a", desc: "Wireless LAN standard. Uses CSMA/CA. Variants: 802.11a/b/g/n/ac/ax." },
  { name: "VLANs 802.1Q", layer: 2, lname: "Data Link", color: "#d4692a", desc: "Virtual LAN tagging — allows multiple logical networks on a single physical switch." },
  { name: "STP 802.1D", layer: 2, lname: "Data Link", color: "#d4692a", desc: "Spanning Tree Protocol — prevents Layer 2 switching loops in redundant topologies." },
  { name: "PPP", layer: 2, lname: "Data Link", color: "#d4692a", desc: "Point-to-Point Protocol — WAN encapsulation over serial and DSL links." },
  { name: "CAT6/Fiber", layer: 1, lname: "Physical", color: "#c84b2f", desc: "Physical cabling standards. Cat6 supports 10Gbps to 55m; single-mode fiber for long distances." },
  { name: "DSL/Cable", layer: 1, lname: "Physical", color: "#c84b2f", desc: "Broadband physical media over telephone copper (DSL) or coaxial cable (HFC)." },
  { name: "802.11 PHY", layer: 1, lname: "Physical", color: "#c84b2f", desc: "The physical radio transmission specifications for Wi-Fi (frequencies, channels, modulation)." },
];

const quizData = [
  { q: "Which OSI layer is responsible for logical IP addressing and routing?", opts: ["Layer 2 — Data Link","Layer 3 — Network","Layer 4 — Transport","Layer 5 — Session"], ans: 1, exp: "Layer 3 (Network) handles IP addressing and routing. Routers operate at this layer, making forwarding decisions based on destination IP addresses." },
  { q: "What is the PDU (Protocol Data Unit) at the Transport layer?", opts: ["Frame","Packet","Segment","Bit"], ans: 2, exp: "The Transport layer PDU is a Segment (TCP) or Datagram (UDP). PDUs change names at each layer: Bits → Frames → Packets → Segments → Data." },
  { q: "A network admin uses the 'ping' command to test connectivity. Which protocol operates at Layer 3 to accomplish this?", opts: ["ARP","TCP","ICMP","UDP"], ans: 2, exp: "ICMP (Internet Control Message Protocol) operates at Layer 3 and is used by ping for echo-request/reply messages and by traceroute for path discovery." },
  { q: "Which layer of the OSI model does a managed switch primarily operate at?", opts: ["Layer 1 — Physical","Layer 2 — Data Link","Layer 3 — Network","Layer 4 — Transport"], ans: 1, exp: "Switches primarily operate at Layer 2, using MAC addresses to make forwarding decisions. Layer 3 switches can also perform routing functions." },
  { q: "TLS/SSL encryption occurs at which OSI layer?", opts: ["Layer 4 — Transport","Layer 5 — Session","Layer 6 — Presentation","Layer 7 — Application"], ans: 2, exp: "TLS/SSL operates at Layer 6 (Presentation), which handles encryption, decryption, and data format translation between communicating systems." },
  { q: "What does the acronym PDU stand for?", opts: ["Protocol Data Unit","Packet Distribution Unit","Physical Data Utility","Protocol Distribution Utility"], ans: 0, exp: "PDU stands for Protocol Data Unit — the name for the unit of data at each specific layer of the OSI model (bit, frame, packet, segment, data)." },
  { q: "Which layer is responsible for establishing, maintaining, and terminating communication sessions?", opts: ["Layer 4 — Transport","Layer 5 — Session","Layer 6 — Presentation","Layer 7 — Application"], ans: 1, exp: "Layer 5 (Session) manages dialog control and synchronization. It establishes sessions, inserts checkpoints, and terminates connections between applications." },
  { q: "In the OSI model, data 'encapsulation' refers to:", opts: ["Encrypting data at Layer 6","Each layer adding its own header (and sometimes trailer) as data passes down the stack","Compressing data to reduce transmission time","Breaking data into equal-sized packets"], ans: 1, exp: "Encapsulation is the process of each layer adding control information (headers/trailers) to the data as it passes down the OSI stack from Layer 7 to Layer 1." },
  { q: "A VLAN configuration involves tagging Ethernet frames. Which layer and standard governs this?", opts: ["Layer 3 — OSPF","Layer 2 — IEEE 802.1Q","Layer 1 — IEEE 802.3","Layer 4 — TCP"], ans: 1, exp: "VLAN tagging is defined by IEEE 802.1Q at Layer 2 (Data Link). A 4-byte VLAN tag is inserted into the Ethernet frame header to identify which VLAN the frame belongs to." },
  { q: "Which protocol uses a 3-way handshake (SYN, SYN-ACK, ACK) to establish a connection?", opts: ["UDP","IP","TCP","ICMP"], ans: 2, exp: "TCP (Transmission Control Protocol) at Layer 4 uses the 3-way handshake for connection establishment: the client sends SYN, server responds SYN-ACK, client completes with ACK." },
  { q: "At which layer does a router make its primary forwarding decisions?", opts: ["Layer 1","Layer 2","Layer 3","Layer 4"], ans: 2, exp: "Routers operate at Layer 3 (Network), examining the destination IP address in packet headers to determine the best path toward the destination network." },
  { q: "Which OSI layer converts data into bits for physical transmission?", opts: ["Layer 2 — Data Link","Layer 1 — Physical","Layer 3 — Network","Layer 4 — Transport"], ans: 1, exp: "Layer 1 (Physical) handles the actual bit transmission — converting frames into electrical signals, light pulses, or radio waves over the physical medium." },
  { q: "The OSI model was developed and published as a standard by:", opts: ["IEEE","IETF","ISO (International Organization for Standardization)","ANSI"], ans: 2, exp: "The OSI model was published by ISO (International Organization for Standardization) as ISO/IEC 7498-1 in 1984, in collaboration with ITU-T." },
  { q: "DNS (Domain Name System) primarily operates at which layer?", opts: ["Layer 3","Layer 4","Layer 6","Layer 7"], ans: 3, exp: "DNS operates at Layer 7 (Application). DNS uses UDP (Layer 4) port 53 for queries and TCP port 53 for zone transfers, but the DNS protocol itself is application-layer." },
  { q: "When troubleshooting network issues, which approach do most network admins follow using the OSI model?", opts: ["Top-down: Start at Layer 7 and work down","Bottom-up: Start at Layer 1 and work up","Always start at Layer 3","Start at the layer where the problem was reported"], ans: 1, exp: "The bottom-up approach (starting at Layer 1 — physical) is most common: verify cables and signals first, then check data link, then network, etc. Some admins prefer top-down for application-reported issues." },
  { q: "Which layer of the OSI model does Spanning Tree Protocol (STP) operate at?", opts: ["Layer 1","Layer 2","Layer 3","Layer 4"], ans: 1, exp: "STP (IEEE 802.1D) operates at Layer 2 (Data Link). It prevents Layer 2 switching loops in networks with redundant switch paths by blocking certain ports." },
  { q: "What is the Layer 2 PDU called?", opts: ["Packet","Segment","Frame","Bit"], ans: 2, exp: "The Layer 2 (Data Link) PDU is called a Frame. Frames contain MAC addresses, the encapsulated packet, and a Frame Check Sequence (FCS) trailer for error detection." },
  { q: "Port numbers (e.g., port 80, port 443) are a concept at which OSI layer?", opts: ["Layer 2","Layer 3","Layer 4","Layer 7"], ans: 2, exp: "Port numbers are a Layer 4 (Transport) concept. They allow TCP and UDP to multiplex multiple application connections on the same IP address by directing data to specific services." },
  { q: "Which is the correct order of OSI layers from highest to lowest (Application down to Physical)?", opts: ["App, Pres, Session, Transport, Network, Data Link, Physical","App, Session, Pres, Network, Transport, Data Link, Physical","App, Pres, Network, Session, Transport, Data Link, Physical","Physical, Data Link, Network, Transport, Session, Pres, App"], ans: 0, exp: "The correct top-to-bottom order is: 7-Application, 6-Presentation, 5-Session, 4-Transport, 3-Network, 2-Data Link, 1-Physical. Mnemonic: 'All People Seem To Need Data Processing.'" },
  { q: "ARP (Address Resolution Protocol) resolves:", opts: ["IP addresses to domain names","MAC addresses to IP addresses","IP addresses to MAC addresses","Domain names to MAC addresses"], ans: 2, exp: "ARP resolves Layer 3 IP addresses to Layer 2 MAC addresses on a local network segment. It works by broadcasting 'Who has IP X?' and the matching device replies with its MAC address." }
];

const compareData = [
  { osi: "7 — Application", tcpip: "Application", protocols: "HTTP, FTP, DNS, SMTP, SSH", pdu: "Data", admin: "Service configuration, monitoring" },
  { osi: "6 — Presentation", tcpip: "Application", protocols: "TLS/SSL, JPEG, ASCII", pdu: "Data", admin: "Encryption, encoding" },
  { osi: "5 — Session", tcpip: "Application", protocols: "NetBIOS, RPC, SMB", pdu: "Data", admin: "Session management, VPN" },
  { osi: "4 — Transport", tcpip: "Transport", protocols: "TCP, UDP, SCTP", pdu: "Segment", admin: "Firewalls, load balancers, QoS" },
  { osi: "3 — Network", tcpip: "Internet", protocols: "IPv4, IPv6, ICMP, OSPF, BGP", pdu: "Packet", admin: "Routing, subnetting, ACLs" },
  { osi: "2 — Data Link", tcpip: "Network Access", protocols: "Ethernet, Wi-Fi, VLANs, STP", pdu: "Frame", admin: "Switching, VLANs, MAC tables" },
  { osi: "1 — Physical", tcpip: "Network Access", protocols: "Cat6, Fiber, DSL, 802.11 PHY", pdu: "Bits", admin: "Cabling, connectors, signals" },
];

const mnemonics = [
  {
    dir: "Top → Bottom (Layer 7 to 1)",
    phrase: "All People Seem To Need Data Processing",
    words: ["All","People","Seem","To","Need","Data","Processing"],
    layers: [7,6,5,4,3,2,1],
    note: "Most commonly used in CompTIA Network+ and Cisco studies."
  },
  {
    dir: "Bottom → Top (Layer 1 to 7)",
    phrase: "Please Do Not Throw Sausage Pizza Away",
    words: ["Please","Do","Not","Throw","Sausage","Pizza","Away"],
    layers: [1,2,3,4,5,6,7],
    note: "Useful when troubleshooting bottom-up (start at Physical layer)."
  }
];

// ══════════════════════════════════════════════
// RENDER LAYER BUTTONS + PANELS
// ══════════════════════════════════════════════
function buildLayers() {
  const stack = document.getElementById('osiStack');
  const detail = document.getElementById('osiDetail');
  
  layers.forEach((l, i) => {
    // Button
    const btn = document.createElement('button');
    btn.className = 'osi-layer-btn' + (i === 0 ? ' active' : '');
    btn.style.setProperty('--layer-color', l.color);
    btn.innerHTML = `
      <div class="layer-num" style="background:${l.color}">${l.num}</div>
      <div class="layer-btn-text">
        <span class="layer-btn-name">${l.name}</span>
        <span class="layer-btn-sub">${l.pdu}</span>
      </div>`;
    btn.onclick = () => activateLayer(i);
    stack.appendChild(btn);

    // Panel
    const panel = document.createElement('div');
    panel.className = 'layer-panel' + (i === 0 ? ' active' : '');
    panel.id = `panel-${i}`;
    panel.style.setProperty('--layer-color', l.color);
    panel.innerHTML = `
      <div class="layer-header">
        <div class="lh-top">
          <div class="lh-badge">Layer ${l.num}</div>
          <div class="lh-title">${l.name} Layer</div>
        </div>
        <p class="lh-desc">${l.role}</p>
      </div>

      <div class="pdu-box">
        <h4>PDU — ${l.pdu}</h4>
        <div class="pdu-visual">
          ${l.pduParts.map((p, pi) => `<div class="pdu-seg ${pi === 0 && l.pduParts.length > 1 ? 'header' : (pi === l.pduParts.length - 1 && l.pduParts.length > 1 ? 'trailer' : 'data')}">${p}</div>${pi < l.pduParts.length - 1 ? '<span class="pdu-arrow">+</span>' : ''}`).join('')}
        </div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <h4>Key Functions</h4>
          <ul>${l.functions.map(f => `<li>${f}</li>`).join('')}</ul>
        </div>
        <div class="info-card">
          <h4>Protocols & Standards</h4>
          <ul>${l.protocols.map(p => `<li>${p}</li>`).join('')}</ul>
        </div>
        <div class="info-card">
          <h4>Devices / Components</h4>
          <ul>${l.devices.map(d => `<li>${d}</li>`).join('')}</ul>
        </div>
        <div class="info-card">
          <h4>Admin Responsibilities</h4>
          <ul>${l.adminNotes.map(n => `<li>${n}</li>`).join('')}</ul>
        </div>
      </div>

      <div class="info-card" style="border-color:${l.color}20">
        <h4 style="color:${l.color}">Real-World Example</h4>
        <p style="font-size:0.87rem;color:var(--ink2);line-height:1.6">${l.realWorld}</p>
      </div>`;
    detail.appendChild(panel);
  });
}

function activateLayer(idx) {
  document.querySelectorAll('.osi-layer-btn').forEach((b, i) => {
    b.classList.toggle('active', i === idx);
  });
  document.querySelectorAll('.layer-panel').forEach((p, i) => {
    p.classList.toggle('active', i === idx);
  });
}

// ══════════════════════════════════════════════
// ENCAPSULATION
// ══════════════════════════════════════════════
let encapStep = 0;
const encapMax = 7;
const encapLabels = [
  "Layer 7 — Application data created",
  "Layer 6 — Presentation header added (encoding/encryption)",
  "Layer 5 — Session header added (session ID)",
  "Layer 4 — Transport header added (TCP/UDP port, seq#)",
  "Layer 3 — Network/IP header added (source & dest IP)",
  "Layer 2 — Data Link header + FCS trailer added (MAC addresses)",
  "Layer 1 — Converted to bits for physical transmission"
];

function buildEncapVisual() {
  const vis = document.getElementById('encapVisual');
  vis.innerHTML = '';
  const layerOrder = [7,6,5,4,3,2,1];
  layerOrder.forEach((num, rowIdx) => {
    const layer = layers.find(l => l.num === num);
    const row = document.createElement('div');
    row.className = 'encap-row';
    row.id = `encap-row-${num}`;
    row.style.opacity = num === 7 ? '1' : '0.25';

    const label = document.createElement('div');
    label.className = 'encap-label';
    label.style.background = layer.color;
    label.textContent = `L${num}: ${layer.abbr}`;

    const dataDiv = document.createElement('div');
    dataDiv.className = 'encap-data';
    dataDiv.id = `encap-data-${num}`;
    dataDiv.innerHTML = buildEncapSegs(num, 0);

    row.appendChild(label);
    row.appendChild(dataDiv);
    vis.appendChild(row);
  });
}

function buildEncapSegs(layerNum, currentStep) {
  const stepIndex = [7,6,5,4,3,2,1].indexOf(layerNum);
  if (currentStep <= stepIndex) {
    if (layerNum === 7) return `<div class="encap-seg data" style="border-color:#bbb">USER DATA</div>`;
    return `<div class="encap-seg data" style="border-color:#ddd;color:#aaa">—</div>`;
  }

  const layer = layers.find(l => l.num === layerNum);
  const headers = {7:"",6:"PRES-H |",5:"SESS-H |",4:"TCP/UDP-H |",3:"IP-H |",2:"MAC-H |"};
  const trailers = {2:"| FCS"};
  
  if (layerNum === 1) {
    return `<div class="encap-seg header" style="border-color:${layer.color};color:${layer.color};background:${layer.color}18">01101011 10100010 11001101... (bits)</div>`;
  }
  
  let html = '';
  if (layerNum < 7 && headers[layerNum]) {
    html += `<div class="encap-seg header" style="border-color:${layer.color};color:${layer.color};background:${layer.color}18">${headers[layerNum]}</div>`;
    html += `<span class="pdu-arrow" style="font-size:0.7rem">+</span>`;
  }
  html += `<div class="encap-seg data">DATA</div>`;
  if (trailers[layerNum]) {
    html += `<span class="pdu-arrow" style="font-size:0.7rem">+</span>`;
    html += `<div class="encap-seg trailer" style="border-color:${layer.color};color:${layer.color}">${trailers[layerNum]}</div>`;
  }
  return html;
}

function stepEncap(dir) {
  encapStep = Math.max(0, Math.min(encapMax, encapStep + dir));
  const order = [7,6,5,4,3,2,1];
  order.forEach((num, idx) => {
    const row = document.getElementById(`encap-row-${num}`);
    const dataDiv = document.getElementById(`encap-data-${num}`);
    if (row && dataDiv) {
      row.style.opacity = idx <= encapStep ? '1' : '0.25';
      dataDiv.innerHTML = buildEncapSegs(num, encapStep);
    }
  });
  document.getElementById('encapStepLabel').textContent = encapLabels[encapStep] || 'Complete';
}

function resetEncap() {
  encapStep = 0;
  buildEncapVisual();
  document.getElementById('encapStepLabel').textContent = 'Layer 7 — Start';
}

// ══════════════════════════════════════════════
// PROTOCOLS
// ══════════════════════════════════════════════
function buildProtocols() {
  const tabs = document.getElementById('protoTabs');
  const content = document.getElementById('protoContent');
  const groups = ["All", "Application (L7)", "Presentation (L6)", "Session (L5)", "Transport (L4)", "Network (L3)", "Data Link (L2)", "Physical (L1)"];
  const layerNums = [null, 7, 6, 5, 4, 3, 2, 1];

  groups.forEach((g, gi) => {
    const btn = document.createElement('button');
    btn.className = 'tab-btn' + (gi === 0 ? ' active' : '');
    btn.textContent = g;
    btn.onclick = () => {
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
      document.getElementById(`proto-tab-${gi}`).classList.add('active');
    };
    tabs.appendChild(btn);

    const panel = document.createElement('div');
    panel.className = 'tab-panel' + (gi === 0 ? ' active' : '');
    panel.id = `proto-tab-${gi}`;
    
    const filtered = layerNums[gi] === null ? protocols : protocols.filter(p => p.layer === layerNums[gi]);
    const grid = document.createElement('div');
    grid.className = 'proto-grid';
    filtered.forEach(p => {
      const card = document.createElement('div');
      card.className = 'proto-card';
      card.style.setProperty('--proto-color', p.color);
      card.innerHTML = `
        <div class="proto-top">
          <span class="proto-name">${p.name}</span>
          <span class="proto-layer-tag">L${p.layer}</span>
        </div>
        <p class="proto-desc">${p.desc}</p>`;
      grid.appendChild(card);
    });
    panel.appendChild(grid);
    content.appendChild(panel);
  });
}

// ══════════════════════════════════════════════
// COMPARE TABLE
// ══════════════════════════════════════════════
function buildCompare() {
  const tbody = document.getElementById('compareBody');
  const tcpColors = {"Application":"#6b3fa0", "Transport":"#2d7a4f", "Internet":"#c4943a", "Network Access":"#d4692a"};
  
  compareData.forEach(row => {
    const tr = document.createElement('tr');
    const color = tcpColors[row.tcpip] || '#666';
    tr.innerHTML = `
      <td><strong style="font-family:'Syne',sans-serif;font-size:0.85rem">${row.osi}</strong></td>
      <td><span class="model-tag" style="background:${color}18;color:${color}">${row.tcpip}</span></td>
      <td style="font-family:'JetBrains Mono',monospace;font-size:0.78rem;line-height:1.8">${row.protocols}</td>
      <td><span style="font-family:'JetBrains Mono',monospace;font-size:0.8rem;color:var(--ink3)">${row.pdu}</span></td>
      <td style="font-size:0.82rem">${row.admin}</td>`;
    tbody.appendChild(tr);
  });
}

// ══════════════════════════════════════════════
// MNEMONICS
// ══════════════════════════════════════════════
function buildMnemonics() {
  const container = document.getElementById('mnemonicDisplay');
  mnemonics.forEach(m => {
    const box = document.createElement('div');
    box.className = 'mnemonic-box';
    
    const layerColors = {"7":"#6b3fa0","6":"#2d5fa6","5":"#1d7a8a","4":"#2d7a4f","3":"#c4943a","2":"#d4692a","1":"#c84b2f"};
    const layerNames = {7:"Application",6:"Presentation",5:"Session",4:"Transport",3:"Network",2:"Data Link",1:"Physical"};

    let wHTML = '';
    m.words.forEach((w, i) => {
      const layerNum = m.layers[i];
      const color = layerColors[layerNum];
      wHTML += `
        <div style="display:flex;flex-direction:column;align-items:center;gap:0.4rem">
          <div class="mnem-letter" style="background:${color}" data-tip="Layer ${layerNum}: ${layerNames[layerNum]}">${w[0]}</div>
          <span style="font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--ink3)">${w}</span>
          <span style="font-size:0.68rem;color:${color};font-weight:600;text-align:center">${layerNames[layerNum]}</span>
        </div>`;
    });
    
    box.innerHTML = `
      <p style="font-family:'Syne',sans-serif;font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:0.1em;color:var(--accent);margin-bottom:0.5rem">${m.dir}</p>
      <p style="font-family:'Syne',sans-serif;font-size:1.4rem;font-weight:800;color:var(--ink);margin-bottom:1.5rem;letter-spacing:-0.01em">"${m.phrase}"</p>
      <div class="mnemonic-word">${wHTML}</div>
      <p style="font-size:0.82rem;color:var(--ink3);padding-top:0.75rem;border-top:1px solid var(--border)">💡 ${m.note}</p>`;
    container.appendChild(box);
  });
}

// ══════════════════════════════════════════════
// QUIZ
// ══════════════════════════════════════════════
let qIndex = 0, score = 0, answered = false;
const shuffled = [...quizData].sort(() => Math.random() - 0.5);

function renderQuiz() {
  const q = shuffled[qIndex];
  const card = document.getElementById('quizCard');
  document.getElementById('progressFill').style.width = `${(qIndex / shuffled.length) * 100}%`;
  document.getElementById('progressText').textContent = `Question ${qIndex + 1} of ${shuffled.length}`;
  answered = false;

  card.innerHTML = `
    <div class="quiz-card">
      <div class="quiz-q-num">Question ${qIndex + 1}</div>
      <div class="quiz-question">${q.q}</div>
      <div class="quiz-options">
        ${q.opts.map((o, i) => `
          <div class="quiz-opt" id="opt-${i}" onclick="selectOpt(${i})">
            <div class="opt-marker">${String.fromCharCode(65+i)}</div>
            ${o}
          </div>`).join('')}
      </div>
      <div class="quiz-feedback" id="quizFeedback"></div>
      <div class="quiz-nav">
        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display:none">
          ${qIndex < shuffled.length - 1 ? 'Next Question →' : 'See Results'}
        </button>
        <span class="quiz-score">Score: ${score}/${qIndex}</span>
      </div>
    </div>`;
}

function selectOpt(i) {
  if (answered) return;
  answered = true;
  const q = shuffled[qIndex];
  const opts = document.querySelectorAll('.quiz-opt');
  opts.forEach(o => o.classList.add('disabled'));
  
  opts[i].classList.add(i === q.ans ? 'correct' : 'wrong');
  if (i !== q.ans) opts[q.ans].classList.add('correct');
  opts[i].querySelector('.opt-marker').textContent = i === q.ans ? '✓' : '✗';
  if (i === q.ans) score++;

  const fb = document.getElementById('quizFeedback');
  fb.className = 'quiz-feedback ' + (i === q.ans ? 'correct' : 'wrong');
  fb.style.display = 'block';
  fb.innerHTML = `<strong>${i === q.ans ? '✓ Correct!' : '✗ Incorrect.'}</strong> ${q.exp}`;
  document.getElementById('nextBtn').style.display = 'flex';
  document.querySelector('.quiz-score').textContent = `Score: ${score}/${qIndex + 1}`;
}

function nextQuestion() {
  qIndex++;
  if (qIndex >= shuffled.length) {
    showResults();
  } else {
    renderQuiz();
  }
}

function showResults() {
  const pct = Math.round((score / shuffled.length) * 100);
  let grade = pct >= 90 ? "Excellent!" : pct >= 75 ? "Good Work!" : pct >= 60 ? "Keep Studying" : "Review Needed";
  let color = pct >= 90 ? "var(--green)" : pct >= 75 ? "var(--blue)" : pct >= 60 ? "var(--gold)" : "var(--accent)";
  
  document.getElementById('progressFill').style.width = '100%';
  document.getElementById('progressText').textContent = `Complete!`;
  
  document.getElementById('quizCard').innerHTML = `
    <div class="quiz-card" style="text-align:center;padding:3rem 2rem">
      <div style="font-size:4rem;margin-bottom:1rem">${pct >= 90 ? '🏆' : pct >= 75 ? '🎯' : pct >= 60 ? '📚' : '💪'}</div>
      <div style="font-family:'Syne',sans-serif;font-size:2.5rem;font-weight:800;color:${color};letter-spacing:-0.03em">${pct}%</div>
      <div style="font-family:'Syne',sans-serif;font-size:1.2rem;font-weight:700;margin:0.5rem 0 1rem;color:var(--ink)">${grade}</div>
      <div style="font-size:0.95rem;color:var(--ink2);margin-bottom:2rem">You answered ${score} out of ${shuffled.length} questions correctly.</div>
      ${pct < 80 ? '<p style="font-size:0.85rem;color:var(--ink3);margin-bottom:1.5rem">Review the layers and protocols sections above before retrying.</p>' : ''}
      <button class="btn btn-primary" onclick="resetQuiz()">↺ Retake Quiz</button>
    </div>`;
}

function resetQuiz() {
  qIndex = 0; score = 0; answered = false;
  shuffled.sort(() => Math.random() - 0.5);
  renderQuiz();
}

// ══════════════════════════════════════════════
// NAV SCROLL HIGHLIGHT
// ══════════════════════════════════════════════
function setupNavScroll() {
  const sections = ['overview','layers','encapsulation','protocols','vs-tcpip','mnemonic','quiz'];
  const links = document.querySelectorAll('.nav-links a');
  
  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(id => {
      const el = document.getElementById(id) || document.querySelector(`[id="${id}"]`);
      if (el && window.scrollY >= el.offsetTop - 80) current = id;
    });
    links.forEach(link => {
      link.classList.toggle('active', link.getAttribute('href') === '#' + current);
    });
  }, { passive: true });
}

// ══════════════════════════════════════════════
// INIT
// ══════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', () => {
  buildLayers();
  buildEncapVisual();
  buildProtocols();
  buildCompare();
  buildMnemonics();
  renderQuiz();
  setupNavScroll();
});
</script>
</body>
</html>
