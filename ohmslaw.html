<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastery Lab: Ohm's & Power Law</title>
    <style>
        :root {
            --bg: #ffffff;
            --green: #2ecc71;
            --black: #1a1a1a;
            --gray: #f8f9fa;
            --flow-speed: 2s;
            --glow-intensity: 0;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg);
            color: var(--black);
            padding: 20px;
        }

        .lab-card {
            max-width: 900px;
            margin: auto;
            border: 3px solid var(--black);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 10px 10px 0px var(--green);
        }

        .header { border-bottom: 4px solid var(--green); margin-bottom: 20px; }

        .mode-selector {
            background: var(--black);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        /* SVG Circuit Styling */
        #circuit-svg {
            width: 100%;
            height: auto;
            background: var(--gray);
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .wire { fill: none; stroke: var(--black); stroke-width: 4; }
        
        .electron-flow {
            fill: none;
            stroke: var(--green);
            stroke-width: 4;
            stroke-dasharray: 10, 20;
            animation: flow var(--flow-speed) linear infinite;
        }

        @keyframes flow {
            from { stroke-dashoffset: 100; }
            to { stroke-dashoffset: 0; }
        }

        .bulb-glow {
            fill: var(--green);
            opacity: var(--glow-intensity);
            transition: opacity 0.3s;
        }

        .slider-group { margin-bottom: 20px; }
        input[type=range] { width: 100%; accent-color: var(--green); }
        
        .result-panel {
            text-align: center;
            padding: 15px;
            background: var(--black);
            color: var(--green);
            border-radius: 8px;
            font-family: monospace;
        }
    </style>
</head>
<body>

<div class="lab-card">
    <div class="header">
        <h1>Mastery Lab: <span style="color:var(--green)">Ohm's & Power Law</span></h1>
        <p>Dynamic Graphical Technician Trainer</p>
    </div>

    <div class="mode-selector">
        <label>Solve for: </label>
        <select id="mode" onchange="initSim()">
            <option value="I">Current (I)</option>
            <option value="V">Voltage (V)</option>
            <option value="R">Resistance (R)</option>
            <option value="P">Power (P)</option>
        </select>
    </div>

    <div class="workspace">
        <div id="inputArea"></div>

        <div class="visual-area">
            <svg id="circuit-svg" viewBox="0 0 400 300">
                <rect x="50" y="50" width="300" height="200" class="wire" rx="10"/>
                <path id="flow-path" d="M50 150 V 50 H 350 V 250 H 50 V 150" class="electron-flow" />
                
                <rect x="35" y="130" width="30" height="40" fill="white" stroke="black" stroke-width="3"/>
                <text x="42" y="155" font-weight="bold" font-size="20">V</text>

                <circle cx="350" cy="150" r="25" fill="white" stroke="black" stroke-width="3"/>
                <circle id="bulb-light" cx="350" cy="150" r="20" class="bulb-glow"/>
                <text x="342" y="157" font-weight="bold">ðŸ’¡</text>
            </svg>

            <div class="result-panel">
                <div style="font-size: 0.9em; color: #888;">CALCULATED OUTPUT</div>
                <div id="mainOutput" style="font-size: 2em;">0.00</div>
                <div id="formulaUsed">I = V / R</div>
            </div>
        </div>
    </div>
</div>

<script>
    const inputs = {
        V: { label: "Voltage", min: 1, max: 240, val: 12, unit: "V" },
        I: { label: "Current", min: 0.1, max: 20, val: 2, unit: "A" },
        R: { label: "Resistance", min: 1, max: 1000, val: 10, unit: "Î©" }
    };

    function initSim() {
        const mode = document.getElementById('mode').value;
        const container = document.getElementById('inputArea');
        container.innerHTML = '';
        
        let active = (mode === 'I') ? ['V','R'] : (mode === 'V') ? ['I','R'] : (mode === 'R') ? ['V','I'] : ['V','I'];

        active.forEach(key => {
            container.innerHTML += `
                <div class="slider-group">
                    <label>${inputs[key].label}: <b id="${key}Val">${inputs[key].val}</b>${inputs[key].unit}</label>
                    <input type="range" id="slide_${key}" min="${inputs[key].min}" max="${inputs[key].max}" value="${inputs[key].val}" oninput="update()">
                </div>`;
        });
        update();
    }

    function update() {
        const mode = document.getElementById('mode').value;
        let v, i, r, p, result, formula;

        if (mode === 'I') {
            v = document.getElementById('slide_V').value; r = document.getElementById('slide_R').value;
            result = v / r; formula = "I = V / R"; i = result;
            document.getElementById('VVal').innerText = v; document.getElementById('RVal').innerText = r;
        } else if (mode === 'V') {
            i = document.getElementById('slide_I').value; r = document.getElementById('slide_R').value;
            result = i * r; formula = "V = I Ã— R"; v = result;
            document.getElementById('IVal').innerText = i; document.getElementById('RVal').innerText = r;
        } else if (mode === 'R') {
            v = document.getElementById('slide_V').value; i = document.getElementById('slide_I').value;
            result = v / i; formula = "R = V / I"; r = result;
            document.getElementById('VVal').innerText = v; document.getElementById('IVal').innerText = i;
        } else {
            v = document.getElementById('slide_V').value; i = document.getElementById('slide_I').value;
            result = v * i; formula = "P = V Ã— I"; p = result;
            document.getElementById('VVal').innerText = v; document.getElementById('IVal').innerText = i;
        }

        // Apply visual updates
        const currentVal = (mode === 'I') ? result : (mode === 'V' || mode === 'R') ? i : i;
        const powerVal = (mode === 'P') ? result : (v * i);
        
        document.getElementById('mainOutput').innerText = result.toFixed(2);
        document.getElementById('formulaUsed').innerText = formula;

        // Visual Logic: Animation Speed & Glow
        const speed = Math.max(0.1, 2 / (currentVal || 1));
        document.documentElement.style.setProperty('--flow-speed', speed + 's');
        document.documentElement.style.setProperty('--glow-intensity', Math.min(powerVal / 500, 1));
    }

    initSim();
</script>
</body>
</html>
