<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Numbers in Cybersecurity</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        nav {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #764ba2;
        }

        .section {
            display: none;
            background: #f9f9f9;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
            font-size: 1.5em;
        }

        .concept-box {
            background: white;
            padding: 20px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
            border-radius: 5px;
        }

        .example-box {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .crypto-box {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #ffc107;
        }

        .exercise-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        input[type="number"], input[type="text"] {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            width: 200px;
            margin: 10px 10px 10px 0;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            margin: 5px;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
        }

        .correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .grid-display {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 5px;
            margin: 20px 0;
        }

        .number-box {
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            font-weight: bold;
        }

        .prime {
            background: #28a745;
            color: white;
        }

        .composite {
            background: #dc3545;
            color: white;
        }

        .special {
            background: #ffc107;
            color: black;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .score-display {
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .highlight {
            background: #ffeb3b;
            padding: 2px 5px;
            border-radius: 3px;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .math-notation {
            font-style: italic;
            color: #764ba2;
        }

        ul, ol {
            margin-left: 30px;
            margin-top: 10px;
        }

        li {
            margin: 10px 0;
        }

        .timer {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê Prime Numbers in Cybersecurity</h1>
            <p class="subtitle">Understanding the Mathematical Foundation of Modern Encryption</p>
        </header>

        <nav>
            <button class="nav-btn active" onclick="showSection('intro')">Introduction</button>
            <button class="nav-btn" onclick="showSection('tutorial')">Tutorial</button>
            <button class="nav-btn" onclick="showSection('crypto')">Cryptography</button>
            <button class="nav-btn" onclick="showSection('practice')">Practice</button>
            <button class="nav-btn" onclick="showSection('challenge')">Challenge</button>
            <button class="nav-btn" onclick="showSection('summary')">Summary</button>
        </nav>

        <!-- Introduction Section -->
        <div id="intro" class="section active">
            <h2>Welcome to Prime Numbers</h2>
            
            <div class="concept-box">
                <h3>Why Prime Numbers Matter in Cybersecurity</h3>
                <p>Prime numbers are the foundation of modern encryption systems that protect:</p>
                <ul>
                    <li>Your online banking and financial transactions</li>
                    <li>Secure communication channels (HTTPS, SSL/TLS)</li>
                    <li>Digital signatures and authentication</li>
                    <li>Virtual Private Networks (VPNs)</li>
                    <li>Cryptocurrency transactions</li>
                </ul>
            </div>

            <div class="crypto-box">
                <h3>üîí The RSA Algorithm</h3>
                <p>The most widely used encryption system, <strong>RSA</strong> (Rivest-Shamir-Adleman), relies on a simple but powerful principle:</p>
                <ul>
                    <li><strong>Easy:</strong> Multiplying two large prime numbers together</li>
                    <li><strong>Extremely Hard:</strong> Factoring that product back into the original primes</li>
                </ul>
                <p>This "one-way" mathematical property creates a <span class="highlight">trapdoor function</span> that makes encryption secure.</p>
            </div>

            <div class="example-box">
                <h3>Real-World Scale</h3>
                <p>Modern RSA encryption uses prime numbers that are:</p>
                <ul>
                    <li><strong>200+ digits long</strong> for standard security</li>
                    <li><strong>2048-bit</strong> (617 digits) or <strong>4096-bit</strong> (1,234 digits) for high security</li>
                </ul>
                <p>Cracking a 400-digit encryption code with a computer testing 1 million combinations per second would take approximately <strong>10<sup>194</sup> seconds</strong>. For perspective, the universe is only about 10<sup>18</sup> seconds old!</p>
            </div>

            <button onclick="showSection('tutorial')">Begin Tutorial ‚Üí</button>
        </div>

        <!-- Tutorial Section -->
        <div id="tutorial" class="section">
            <h2>Understanding Prime Numbers</h2>

            <div class="concept-box">
                <h3>Definition</h3>
                <p>A <strong>prime number</strong> is a natural number greater than 1 that has exactly two divisors: 1 and itself.</p>
                <p class="math-notation">In other words: A number p is prime if p > 1 and its only factors are 1 and p.</p>
            </div>

            <div class="example-box">
                <h3>Examples</h3>
                <p><strong>Prime Numbers:</strong> 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47...</p>
                <p><strong>Why 2 is special:</strong> It's the only even prime number! All other even numbers are divisible by 2.</p>
                <p><strong>Not Prime:</strong></p>
                <ul>
                    <li><strong>1</strong> - Only has one divisor (itself), so it's neither prime nor composite</li>
                    <li><strong>4</strong> - Divisible by 1, 2, and 4 (composite)</li>
                    <li><strong>9</strong> - Divisible by 1, 3, and 9 (composite)</li>
                </ul>
            </div>

            <h3>Visual Representation: Numbers 1-50</h3>
            <div id="primeGrid" class="grid-display"></div>
            <p><strong>Legend:</strong> 
                <span style="color: #28a745;">‚ñ†</span> Prime 
                <span style="color: #dc3545;">‚ñ†</span> Composite 
                <span style="color: #ffc107;">‚ñ†</span> Special (1)
            </p>

            <div class="concept-box">
                <h3>Prime Factorization</h3>
                <p><strong>Prime factorization</strong> is the process of breaking down a composite number into its prime factors.</p>
                <p><strong>Example:</strong> 70 = 2 √ó 5 √ó 7</p>
                <p>Every composite number has a <span class="highlight">unique prime factorization</span> (Fundamental Theorem of Arithmetic).</p>
            </div>

            <div class="crypto-box">
                <h3>üîê Cryptographic Relevance</h3>
                <p><strong>Easy Direction:</strong> Multiplying primes is fast</p>
                <p>Example: 61 √ó 53 = 3,233 (instant calculation)</p>
                <p><strong>Hard Direction:</strong> Factoring is slow</p>
                <p>Example: Given 3,233, finding 61 and 53 requires trial and error</p>
                <p>This asymmetry is the basis of <strong>public-key cryptography</strong>!</p>
            </div>

            <h3>Testing for Primality</h3>
            <div class="example-box">
                <p><strong>Trial Division Method:</strong></p>
                <ol>
                    <li>Check if the number is divisible by 2</li>
                    <li>Check odd numbers from 3 up to ‚àön</li>
                    <li>If no divisors are found, the number is prime</li>
                </ol>
                <p><strong>Why only check up to ‚àön?</strong> If n has a factor larger than ‚àön, it must also have a factor smaller than ‚àön.</p>
            </div>

            <button onclick="showSection('crypto')">Learn About Cryptography ‚Üí</button>
        </div>

        <!-- Cryptography Section -->
        <div id="crypto" class="section">
            <h2>Prime Numbers in Cryptography</h2>

            <div class="crypto-box">
                <h3>How RSA Encryption Works</h3>
                <ol>
                    <li><strong>Key Generation:</strong>
                        <ul>
                            <li>Choose two large prime numbers: <span class="math-notation">p</span> and <span class="math-notation">q</span></li>
                            <li>Calculate <span class="math-notation">n = p √ó q</span> (this becomes part of the public key)</li>
                            <li>Calculate <span class="math-notation">œÜ(n) = (p-1)(q-1)</span> (Euler's totient function)</li>
                            <li>Choose encryption exponent <span class="math-notation">e</span></li>
                            <li>Calculate decryption exponent <span class="math-notation">d</span></li>
                        </ul>
                    </li>
                    <li><strong>Encryption:</strong> message<sup>e</sup> mod n = ciphertext</li>
                    <li><strong>Decryption:</strong> ciphertext<sup>d</sup> mod n = message</li>
                </ol>
            </div>

            <div class="example-box">
                <h3>Simplified RSA Example</h3>
                <p><strong>Step 1:</strong> Choose primes p = 3, q = 11</p>
                <p><strong>Step 2:</strong> Calculate n = 3 √ó 11 = 33</p>
                <p><strong>Step 3:</strong> Calculate œÜ(n) = (3-1)(11-1) = 2 √ó 10 = 20</p>
                <p><strong>Step 4:</strong> Choose e = 3 (must be coprime with œÜ(n))</p>
                <p><strong>Step 5:</strong> Calculate d = 7 (such that e √ó d ‚â° 1 mod œÜ(n))</p>
                <p><strong>Public Key:</strong> (n=33, e=3) - Can be shared openly</p>
                <p><strong>Private Key:</strong> (n=33, d=7) - Must be kept secret</p>
            </div>

            <div class="concept-box">
                <h3>Why This Is Secure</h3>
                <p>To break RSA encryption, an attacker would need to:</p>
                <ol>
                    <li>Take the public value <span class="math-notation">n</span></li>
                    <li>Factor it back into <span class="math-notation">p</span> and <span class="math-notation">q</span></li>
                    <li>Use those to calculate the private key</li>
                </ol>
                <p><strong>The Problem:</strong> Factoring large numbers is computationally infeasible!</p>
                <table>
                    <tr>
                        <th>Key Size</th>
                        <th>Digit Count</th>
                        <th>Estimated Security</th>
                    </tr>
                    <tr>
                        <td>1024-bit</td>
                        <td>~309 digits</td>
                        <td>Potentially vulnerable</td>
                    </tr>
                    <tr>
                        <td>2048-bit</td>
                        <td>~617 digits</td>
                        <td>Currently secure</td>
                    </tr>
                    <tr>
                        <td>4096-bit</td>
                        <td>~1234 digits</td>
                        <td>High security</td>
                    </tr>
                </table>
            </div>

            <div class="crypto-box">
                <h3>Other Cryptographic Uses</h3>
                <ul>
                    <li><strong>Diffie-Hellman Key Exchange:</strong> Uses large primes to establish shared secrets</li>
                    <li><strong>Digital Signatures:</strong> Verify authenticity using prime-based algorithms</li>
                    <li><strong>Pseudorandom Number Generation:</strong> Primes create unpredictable sequences</li>
                    <li><strong>Blockchain & Cryptocurrency:</strong> Securing transactions with prime-based cryptography</li>
                </ul>
            </div>

            <button onclick="showSection('practice')">Start Practice Exercises ‚Üí</button>
        </div>

        <!-- Practice Section -->
        <div id="practice" class="section">
            <h2>Practice Exercises</h2>

            <div class="score-display">
                <span>Score: <span id="practiceScore">0</span> / <span id="practiceTotal">0</span></span>
            </div>

            <!-- Exercise 1: Identify Primes -->
            <div class="exercise-container">
                <h3>Exercise 1: Prime Identification</h3>
                <p>Determine whether each number is prime or composite:</p>
                <div id="primeIdentify"></div>
            </div>

            <!-- Exercise 2: Find Prime Factors -->
            <div class="exercise-container">
                <h3>Exercise 2: Prime Factorization</h3>
                <p>Find the prime factorization of <strong><span id="factorNumber"></span></strong></p>
                <p>Enter prime factors separated by commas (e.g., 2,3,5):</p>
                <input type="text" id="factorInput" placeholder="e.g., 2,5,7">
                <button onclick="checkFactorization()">Check Answer</button>
                <button onclick="generateFactorProblem()">New Problem</button>
                <div id="factorResult" class="result" style="display:none;"></div>
            </div>

            <!-- Exercise 3: Multiplication Challenge -->
            <div class="exercise-container">
                <h3>Exercise 3: Multiply Primes (RSA Simulation)</h3>
                <p>In RSA, we multiply two primes to get n. Practice this fundamental operation:</p>
                <p><strong><span id="prime1"></span></strong> √ó <strong><span id="prime2"></span></strong> = ?</p>
                <input type="number" id="multiplyInput" placeholder="Enter product">
                <button onclick="checkMultiplication()">Check Answer</button>
                <button onclick="generateMultiplyProblem()">New Problem</button>
                <div id="multiplyResult" class="result" style="display:none;"></div>
            </div>

            <!-- Exercise 4: Prime Testing -->
            <div class="exercise-container">
                <h3>Exercise 4: Primality Testing</h3>
                <p>Use the trial division method to test if a number is prime:</p>
                <label>Enter a number: </label>
                <input type="number" id="testPrimeInput" min="2" placeholder="Enter number">
                <button onclick="testPrime()">Test Prime</button>
                <div id="testPrimeResult" class="result" style="display:none;"></div>
            </div>
        </div>

        <!-- Challenge Section -->
        <div id="challenge" class="section">
            <h2>Timed Challenge</h2>

            <div class="score-display">
                <span>Challenge Score: <span id="challengeScore">0</span> / 10</span>
                <div class="timer">Time Remaining: <span id="timer">60</span>s</div>
            </div>

            <div class="progress-bar">
                <div id="challengeProgress" class="progress-fill" style="width: 0%;">0/10</div>
            </div>

            <div class="exercise-container">
                <h3 id="challengeQuestion">Press 'Start Challenge' to begin</h3>
                <div id="challengeOptions"></div>
                <button id="startChallenge" onclick="startChallenge()">Start Challenge</button>
                <div id="challengeResult" class="result" style="display:none;"></div>
            </div>

            <div class="exercise-container" id="challengeFinal" style="display:none;">
                <h3>Challenge Complete!</h3>
                <p>Your final score: <strong><span id="finalScore"></span>/10</strong></p>
                <p>Accuracy: <strong><span id="accuracy"></span>%</strong></p>
                <button onclick="startChallenge()">Try Again</button>
            </div>
        </div>

        <!-- Summary Section -->
        <div id="summary" class="section">
            <h2>Key Takeaways</h2>

            <div class="concept-box">
                <h3>What You've Learned</h3>
                <ul>
                    <li><strong>Definition:</strong> Prime numbers are natural numbers > 1 with exactly two divisors</li>
                    <li><strong>Fundamental Theorem:</strong> Every composite number has unique prime factorization</li>
                    <li><strong>Testing Methods:</strong> Trial division checks divisibility up to ‚àön</li>
                    <li><strong>Distribution:</strong> Primes are distributed unpredictably along the number line</li>
                </ul>
            </div>

            <div class="crypto-box">
                <h3>Cybersecurity Applications</h3>
                <ul>
                    <li><strong>RSA Encryption:</strong> Multiplying primes is easy, factoring is hard</li>
                    <li><strong>Key Sizes:</strong> Modern systems use 2048-bit or larger primes</li>
                    <li><strong>Security Basis:</strong> Computational difficulty of prime factorization</li>
                    <li><strong>Real-World Use:</strong> HTTPS, SSH, VPNs, digital signatures, cryptocurrencies</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>Core Competencies Developed</h3>
                <ol>
                    <li>Identify prime and composite numbers</li>
                    <li>Perform prime factorization</li>
                    <li>Understand the mathematical basis of RSA encryption</li>
                    <li>Recognize the asymmetry in multiplication vs. factorization</li>
                    <li>Apply primality testing algorithms</li>
                    <li>Appreciate the role of primes in securing digital communications</li>
                </ol>
            </div>

            <div class="concept-box">
                <h3>Further Exploration</h3>
                <p><strong>Advanced Topics:</strong></p>
                <ul>
                    <li>Miller-Rabin Primality Test</li>
                    <li>Euler's Totient Function</li>
                    <li>Fermat's Little Theorem</li>
                    <li>Diffie-Hellman Key Exchange</li>
                    <li>Elliptic Curve Cryptography</li>
                    <li>Post-Quantum Cryptography</li>
                </ul>
            </div>

            <div class="crypto-box">
                <h3>üéì Congratulations!</h3>
                <p>You now understand the mathematical foundation that protects billions of secure communications every day. Prime numbers are truly the <strong>sentinels of our digital lives</strong>.</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize variables
        let practiceScore = 0;
        let practiceTotal = 0;
        let challengeScore = 0;
        let challengeQuestion = 0;
        let timerInterval;
        let timeRemaining = 60;

        // Utility Functions
        function isPrime(num) {
            if (num < 2) return false;
            if (num === 2) return true;
            if (num % 2 === 0) return false;
            for (let i = 3; i <= Math.sqrt(num); i += 2) {
                if (num % i === 0) return false;
            }
            return true;
        }

        function getPrimeFactors(n) {
            const factors = [];
            let divisor = 2;
            while (n >= 2) {
                if (n % divisor === 0) {
                    factors.push(divisor);
                    n = n / divisor;
                } else {
                    divisor++;
                }
            }
            return factors;
        }

        function getRandomPrime(min, max) {
            let num;
            do {
                num = Math.floor(Math.random() * (max - min + 1)) + min;
            } while (!isPrime(num));
            return num;
        }

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');

            // Initialize sections
            if (sectionId === 'tutorial') {
                generatePrimeGrid();
            } else if (sectionId === 'practice') {
                initializePractice();
            }
        }

        // Generate Prime Grid for Tutorial
        function generatePrimeGrid() {
            const grid = document.getElementById('primeGrid');
            grid.innerHTML = '';
            for (let i = 1; i <= 50; i++) {
                const box = document.createElement('div');
                box.className = 'number-box';
                box.textContent = i;
                if (i === 1) {
                    box.classList.add('special');
                } else if (isPrime(i)) {
                    box.classList.add('prime');
                } else {
                    box.classList.add('composite');
                }
                grid.appendChild(box);
            }
        }

        // Practice Section
        function initializePractice() {
            generatePrimeIdentifyExercise();
            generateFactorProblem();
            generateMultiplyProblem();
        }

        function updatePracticeScore() {
            document.getElementById('practiceScore').textContent = practiceScore;
            document.getElementById('practiceTotal').textContent = practiceTotal;
        }

        // Exercise 1: Prime Identification
        function generatePrimeIdentifyExercise() {
            const container = document.getElementById('primeIdentify');
            container.innerHTML = '';
            const numbers = [];
            
            // Generate mix of primes and composites
            for (let i = 0; i < 6; i++) {
                let num;
                if (i < 3) {
                    num = getRandomPrime(10, 50);
                } else {
                    do {
                        num = Math.floor(Math.random() * 40) + 10;
                    } while (isPrime(num));
                }
                numbers.push(num);
            }
            
            numbers.sort(() => Math.random() - 0.5);
            
            numbers.forEach((num, index) => {
                const div = document.createElement('div');
                div.style.margin = '10px 0';
                div.innerHTML = `
                    <strong>${num}</strong>: 
                    <button onclick="checkPrimeIdentify(${num}, true, ${index})">Prime</button>
                    <button onclick="checkPrimeIdentify(${num}, false, ${index})">Composite</button>
                    <span id="identify-${index}"></span>
                `;
                container.appendChild(div);
            });
        }

        function checkPrimeIdentify(num, userAnswer, index) {
            const resultSpan = document.getElementById(`identify-${index}`);
            const correct = isPrime(num) === userAnswer;
            practiceTotal++;
            if (correct) {
                practiceScore++;
                resultSpan.innerHTML = ' <span style="color: green;">‚úì Correct!</span>';
            } else {
                resultSpan.innerHTML = ` <span style="color: red;">‚úó Incorrect. ${num} is ${isPrime(num) ? 'prime' : 'composite'}.</span>`;
            }
            updatePracticeScore();
        }

        // Exercise 2: Prime Factorization
        function generateFactorProblem() {
            let num;
            do {
                num = Math.floor(Math.random() * 90) + 10;
            } while (isPrime(num));
            
            document.getElementById('factorNumber').textContent = num;
            document.getElementById('factorInput').value = '';
            document.getElementById('factorResult').style.display = 'none';
        }

        function checkFactorization() {
            const num = parseInt(document.getElementById('factorNumber').textContent);
            const userInput = document.getElementById('factorInput').value.trim();
            const userFactors = userInput.split(',').map(x => parseInt(x.trim())).sort((a, b) => a - b);
            const correctFactors = getPrimeFactors(num).sort((a, b) => a - b);
            
            const resultDiv = document.getElementById('factorResult');
            resultDiv.style.display = 'block';
            practiceTotal++;
            
            if (JSON.stringify(userFactors) === JSON.stringify(correctFactors)) {
                practiceScore++;
                resultDiv.className = 'result correct';
                resultDiv.textContent = `‚úì Correct! ${num} = ${correctFactors.join(' √ó ')}`;
            } else {
                resultDiv.className = 'result incorrect';
                resultDiv.textContent = `‚úó Incorrect. The prime factorization of ${num} is ${correctFactors.join(' √ó ')}`;
            }
            updatePracticeScore();
        }

        // Exercise 3: Multiplication
        function generateMultiplyProblem() {
            const prime1 = getRandomPrime(10, 50);
            const prime2 = getRandomPrime(10, 50);
            document.getElementById('prime1').textContent = prime1;
            document.getElementById('prime2').textContent = prime2;
            document.getElementById('multiplyInput').value = '';
            document.getElementById('multiplyResult').style.display = 'none';
        }

        function checkMultiplication() {
            const prime1 = parseInt(document.getElementById('prime1').textContent);
            const prime2 = parseInt(document.getElementById('prime2').textContent);
            const userAnswer = parseInt(document.getElementById('multiplyInput').value);
            const correctAnswer = prime1 * prime2;
            
            const resultDiv = document.getElementById('multiplyResult');
            resultDiv.style.display = 'block';
            practiceTotal++;
            
            if (userAnswer === correctAnswer) {
                practiceScore++;
                resultDiv.className = 'result correct';
                resultDiv.textContent = `‚úì Correct! ${prime1} √ó ${prime2} = ${correctAnswer}`;
            } else {
                resultDiv.className = 'result incorrect';
                resultDiv.textContent = `‚úó Incorrect. ${prime1} √ó ${prime2} = ${correctAnswer}`;
            }
            updatePracticeScore();
        }

        // Exercise 4: Prime Testing
        function testPrime() {
            const num = parseInt(document.getElementById('testPrimeInput').value);
            const resultDiv = document.getElementById('testPrimeResult');
            
            if (isNaN(num) || num < 2) {
                resultDiv.style.display = 'block';
                resultDiv.className = 'result info';
                resultDiv.textContent = 'Please enter a number greater than 1.';
                return;
            }
            
            const prime = isPrime(num);
            const factors = [];
            
            if (!prime) {
                for (let i = 2; i <= Math.sqrt(num); i++) {
                    if (num % i === 0) {
                        factors.push(i);
                        if (i !== num / i) {
                            factors.push(num / i);
                        }
                    }
                }
                factors.sort((a, b) => a - b);
            }
            
            resultDiv.style.display = 'block';
            resultDiv.className = prime ? 'result correct' : 'result info';
            
            if (prime) {
                resultDiv.innerHTML = `<strong>${num}</strong> is PRIME.<br>‚úì No divisors found between 2 and ${Math.floor(Math.sqrt(num))}`;
            } else {
                resultDiv.innerHTML = `<strong>${num}</strong> is COMPOSITE.<br>Divisors found: ${factors.join(', ')}`;
            }
        }

        // Challenge Section
        function startChallenge() {
            challengeScore = 0;
            challengeQuestion = 0;
            timeRemaining = 60;
            document.getElementById('challengeScore').textContent = '0';
            document.getElementById('timer').textContent = '60';
            document.getElementById('challengeProgress').style.width = '0%';
            document.getElementById('challengeProgress').textContent = '0/10';
            document.getElementById('challengeFinal').style.display = 'none';
            document.getElementById('startChallenge').style.display = 'none';
            document.getElementById('challengeResult').style.display = 'none';
            
            nextChallengeQuestion();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                document.getElementById('timer').textContent = timeRemaining;
                if (timeRemaining <= 0) {
                    endChallenge();
                }
            }, 1000);
        }

        function nextChallengeQuestion() {
            if (challengeQuestion >= 10) {
                endChallenge();
                return;
            }
            
            challengeQuestion++;
            const progress = (challengeQuestion - 1) / 10 * 100;
            document.getElementById('challengeProgress').style.width = progress + '%';
            document.getElementById('challengeProgress').textContent = (challengeQuestion - 1) + '/10';
            
            // Generate random question type
            const types = ['identify', 'factor', 'multiply'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            document.getElementById('challengeResult').style.display = 'none';
            const optionsDiv = document.getElementById('challengeOptions');
            
            if (type === 'identify') {
                const num = Math.floor(Math.random() * 90) + 10;
                document.getElementById('challengeQuestion').textContent = `Is ${num} prime or composite?`;
                optionsDiv.innerHTML = `
                    <button onclick="answerChallenge(${isPrime(num)}, true)">Prime</button>
                    <button onclick="answerChallenge(${isPrime(num)}, false)">Composite</button>
                `;
            } else if (type === 'factor') {
                let num;
                do {
                    num = Math.floor(Math.random() * 40) + 10;
                } while (isPrime(num));
                const factors = getPrimeFactors(num);
                const options = [factors.join('√ó')];
                
                // Generate wrong answers
                while (options.length < 4) {
                    const wrongFactors = getPrimeFactors(Math.floor(Math.random() * 40) + 10);
                    const wrongAnswer = wrongFactors.join('√ó');
                    if (!options.includes(wrongAnswer)) {
                        options.push(wrongAnswer);
                    }
                }
                options.sort(() => Math.random() - 0.5);
                
                document.getElementById('challengeQuestion').textContent = `Prime factorization of ${num}:`;
                optionsDiv.innerHTML = options.map(opt => 
                    `<button onclick="answerChallenge('${factors.join('√ó')}', '${opt}')">${opt}</button>`
                ).join('');
            } else {
                const p1 = getRandomPrime(5, 20);
                const p2 = getRandomPrime(5, 20);
                const correct = p1 * p2;
                const options = [correct];
                
                while (options.length < 4) {
                    const wrong = correct + Math.floor(Math.random() * 20) - 10;
                    if (wrong > 0 && !options.includes(wrong)) {
                        options.push(wrong);
                    }
                }
                options.sort(() => Math.random() - 0.5);
                
                document.getElementById('challengeQuestion').textContent = `${p1} √ó ${p2} = ?`;
                optionsDiv.innerHTML = options.map(opt => 
                    `<button onclick="answerChallenge(${correct}, ${opt})">${opt}</button>`
                ).join('');
            }
        }

        function answerChallenge(correct, answer) {
            const resultDiv = document.getElementById('challengeResult');
            const optionButtons = document.querySelectorAll('#challengeOptions button');
            optionButtons.forEach(btn => btn.disabled = true);
            
            if (String(correct) === String(answer)) {
                challengeScore++;
                resultDiv.className = 'result correct';
                resultDiv.textContent = '‚úì Correct!';
            } else {
                resultDiv.className = 'result incorrect';
                resultDiv.textContent = `‚úó Incorrect. The answer is ${correct}`;
            }
            
            document.getElementById('challengeScore').textContent = challengeScore;
            resultDiv.style.display = 'block';
            
            setTimeout(() => {
                nextChallengeQuestion();
            }, 1500);
        }

        function endChallenge() {
            clearInterval(timerInterval);
            document.getElementById('challengeQuestion').textContent = 'Challenge Complete!';
            document.getElementById('challengeOptions').innerHTML = '';
            document.getElementById('challengeResult').style.display = 'none';
            
            const progress = 100;
            document.getElementById('challengeProgress').style.width = progress + '%';
            document.getElementById('challengeProgress').textContent = '10/10';
            
            document.getElementById('finalScore').textContent = challengeScore;
            document.getElementById('accuracy').textContent = (challengeScore * 10);
            document.getElementById('challengeFinal').style.display = 'block';
            document.getElementById('startChallenge').style.display = 'inline-block';
        }

        // Initialize on load
        window.onload = function() {
            generatePrimeGrid();
        };
    </script>
</body>
</html>
