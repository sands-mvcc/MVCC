<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Master Diagrammer: Collegiate Edition</title>
    <style>
        :root { --green: #2e7d32; --black: #000000; --white: #ffffff; --gray: #f0f0f0; }
        body { font-family: 'Georgia', serif; margin: 0; background: var(--white); display: flex; flex-direction: column; height: 100vh; }
        
        header { background: var(--black); color: white; padding: 1rem; border-bottom: 4px solid var(--green); text-align: center; }
        
        .layout { display: flex; flex: 1; overflow: hidden; }

        /* Component Glossary Sidebar */
        .glossary { width: 320px; background: var(--gray); border-right: 2px solid var(--black); overflow-y: auto; padding: 1rem; font-size: 0.85rem; }
        .comp-item { background: white; border: 1px solid #ccc; margin-bottom: 0.8rem; padding: 0.5rem; }
        .comp-item h4 { margin: 0 0 5px 0; color: var(--green); border-bottom: 1px solid #eee; }
        .symbol-box { font-family: monospace; background: #eee; padding: 2px 5px; font-weight: bold; }

        /* Main Workspace */
        .workspace { flex: 1; padding: 2rem; display: flex; flex-direction: column; background: white; }
        #canvas { 
            flex: 1; border: 2px solid var(--black); position: relative; background-color: white;
            background-image: linear-gradient(#eee 1px, transparent 1px), linear-gradient(90deg, #eee 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .word-token { 
            padding: 8px 12px; background: white; border: 2px solid var(--black); 
            position: absolute; cursor: move; font-weight: bold; z-index: 100;
        }

        /* SVG Overlay for complex structures */
        svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        
        .controls { padding: 1rem; background: var(--gray); border-top: 1px solid #ccc; display: flex; gap: 20px; align-items: center; }
        .btn { padding: 10px 20px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; }
        .btn-green { background: var(--green); color: white; }
    </style>
</head>
<body>

<header>
    <h1>Reed-Kellogg Syntax Assessment Tool</h1>
</header>

<div class="layout">
    <aside class="glossary">
        <h3>Symbol Key</h3>
        
        <div class="comp-item">
            <h4>Main Baseline</h4>
            <p>The core horizontal line. <span class="symbol-box">━━━━</span></p>
        </div>
        <div class="comp-item">
            <h4>Subj/Pred Divider</h4>
            <p>Crosses the baseline. <span class="symbol-box">──┼──</span></p>
        </div>
        <div class="comp-item">
            <h4>Direct Object</h4>
            <p>Stops at the baseline. <span class="symbol-box">──┬──</span></p>
        </div>
        <div class="comp-item">
            <h4>Indirect Object</h4>
            <p>Hangs on a "shelf" below verb. <span class="symbol-box">└─</span></p>
        </div>
        <div class="comp-item">
            <h4>Predicate Adj/Noun</h4>
            <p>Slanted backslash. <span class="symbol-box">──\──</span></p>
        </div>
        <div class="comp-item">
            <h4>Gerund Structure</h4>
            <p>A "stepped" line on a pedestal. <span class="symbol-box">_┌─</span></p>
        </div>
        <div class="comp-item">
            <h4>Infinitive</h4>
            <p>An upside-down 'V' stilt. <span class="symbol-box">──/\──</span></p>
        </div>
    </aside>

    <main class="workspace">
        <div id="tutorial-banner" style="background: #e8f5e9; border: 1px solid var(--green); padding: 1rem; margin-bottom: 1rem;">
            <strong>Task:</strong> <span id="task-desc">Diagram: "Swimming is fun." (Gerund Subject)</span>
        </div>
        
        <div id="canvas">
            <svg id="svg-layer">
                <line x1="50" y1="200" x2="800" y2="200" stroke="black" stroke-width="3" />
                <line x1="300" y1="160" x2="300" y2="240" stroke="black" stroke-width="2" />
                <line x1="550" y1="170" x2="580" y2="200" stroke="black" stroke-width="2" />
                <line x1="150" y1="200" x2="150" y2="150" stroke="black" stroke-width="1" stroke-dasharray="4" />
                <line x1="100" y1="150" x2="200" y2="150" stroke="black" stroke-width="2" />
            </svg>
            
            <div class="word-token" style="top:50px; left:50px;">Swimming</div>
            <div class="word-token" style="top:50px; left:180px;">is</div>
            <div class="word-token" style="top:50px; left:280px;">fun</div>
        </div>

        <div class="controls">
            <button class="btn btn-green" onclick="alert('Analysis: Correct placement on Gerund Pedestal!')">Validate Diagram</button>
            <span>Current Module: <strong>Verbals & Advanced Structures</strong></span>
        </div>
    </main>
</div>

<script>
    // Drag and Drop Logic
    document.querySelectorAll('.word-token').forEach(token => {
        token.onmousedown = function(event) {
            let shiftX = event.clientX - token.getBoundingClientRect().left;
            let shiftY = event.clientY - token.getBoundingClientRect().top;

            function moveAt(pageX, pageY) {
                token.style.left = pageX - shiftX - document.querySelector('.workspace').getBoundingClientRect().left + 'px';
                token.style.top = pageY - shiftY - document.querySelector('.workspace').getBoundingClientRect().top + 'px';
            }

            function onMouseMove(event) { moveAt(event.pageX, event.pageY); }
            document.addEventListener('mousemove', onMouseMove);
            token.onmouseup = function() {
                document.removeEventListener('mousemove', onMouseMove);
                token.onmouseup = null;
            };
        };
        token.ondragstart = function() { return false; };
    });
</script>

</body>
</html>
