<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noun Detective: Category Match</title>
    <style>
        :root {
            --primary-green: #2e7d32;
            --dark-green: #1b5e20;
            --black: #1a1a1a;
            --white: #ffffff;
            --light-gray: #f4f4f4;
            --error-red: #d32f2f;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--white);
            color: var(--black);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #game-container {
            width: 95%;
            max-width: 900px;
            background: var(--white);
            border: 3px solid var(--black);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 12px 12px 0px var(--primary-green);
            text-align: center;
        }

        h1 {
            color: var(--primary-green);
            margin-top: 0;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        .setup-screen, .game-screen, .results-screen {
            display: none;
        }

        .active {
            display: block;
        }

        /* Instructions Styles */
        .instructions {
            text-align: left;
            background: #f9fff9;
            border-left: 4px solid var(--primary-green);
            padding: 15px;
            margin: 20px auto;
            max-width: 500px;
            font-size: 0.95rem;
        }

        .instructions ul {
            padding-left: 20px;
            margin: 10px 0 0 0;
        }

        /* Setup Styles */
        .config-box {
            margin: 20px 0;
            padding: 20px;
            background: var(--light-gray);
            border-radius: 8px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }

        select {
            padding: 10px;
            font-size: 1.1rem;
            border: 2px solid var(--black);
            border-radius: 4px;
            width: 100px;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: var(--black);
            color: var(--white);
            border-radius: 8px;
            font-weight: bold;
        }

        /* Action Prompt */
        .action-prompt {
            background-color: var(--primary-green);
            color: white;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        /* Game Board */
        .game-layout {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 20px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .category-card {
            padding: 15px;
            background: var(--white);
            border: 2px solid var(--black);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 50px;
        }

        .category-card:hover {
            background: var(--light-gray);
        }

        .category-card.selected {
            background: var(--primary-green);
            color: var(--white);
            border-color: var(--primary-green);
            transform: scale(1.05);
        }

        .word-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-content: flex-start;
            border: 2px dashed #ccc;
            padding: 20px;
            border-radius: 8px;
            min-height: 300px;
        }

        .word-card {
            padding: 10px 15px;
            background: var(--white);
            border: 2px solid var(--black);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.1s;
            user-select: none;
        }

        .word-card:active {
            transform: scale(0.95);
        }

        .word-card.hidden {
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
        }

        /* Buttons */
        .btn {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            border: 2px solid var(--black);
            border-radius: 6px;
            transition: 0.2s;
            margin: 10px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--dark-green);
            box-shadow: 4px 4px 0px var(--black);
        }

        /* Feedback UI */
        #feedback {
            height: 30px;
            margin: 10px 0;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .game-layout { grid-template-columns: 1fr; }
            .word-pool { min-height: 150px; }
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>Noun Detective</h1>

    <!-- Setup Screen -->
    <div id="setup-screen" class="setup-screen active">
        <p>Based on <strong>"The Naming of Things"</strong> Infographic</p>
        
        <div class="instructions">
            <strong>How to Play:</strong>
            <ul>
                <li>Pick a word from the pool on the right.</li>
                <li>Match it to <strong>any</strong> correct category on the left.</li>
                <li>Note: Some words belong to multiple categories!</li>
                <li>Clear all words as fast as you can to win!</li>
            </ul>
        </div>

        <div class="config-box">
            <label for="match-count">Select Difficulty (Matches):</label>
            <select id="match-count">
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25" selected>25</option>
            </select>
        </div>
        <button class="btn btn-primary" onclick="startGame()">Start Game</button>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="game-screen">
        <div class="stats-bar">
            <div>TIME: <span id="timer">00:00</span></div>
            <div>PROGRESS: <span id="progress">0</span> / <span id="goal">0</span></div>
        </div>

        <div class="action-prompt">
            Instruction: Click a word, then click any valid category to match!
        </div>

        <div id="feedback">Ready, Detective? Go!</div>

        <div class="game-layout">
            <div class="categories-grid" id="categories-grid">
                <!-- Categories rendered by JS -->
            </div>
            <div class="word-pool" id="word-pool">
                <!-- Words rendered by JS -->
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="results-screen">
        <h2>Case Closed, Detective!</h2>
        <div class="config-box">
            <p style="font-size: 1.5rem;">Total Time: <span id="final-time">0</span></p>
            <p id="rank-message"></p>
        </div>
        <button class="btn btn-primary" onclick="location.reload()">Play Again</button>
    </div>
</div>

<script>
    // Comprehensive noun data with multiple category support
    const rawNouns = [
        { word: "city", categories: ["Common Noun", "Concrete Noun", "Countable Noun"] },
        { word: "teacher", categories: ["Common Noun", "Concrete Noun", "Countable Noun"] },
        { word: "smartphone", categories: ["Common Noun", "Concrete Noun", "Countable Noun"] },
        { word: "happiness", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "river", categories: ["Common Noun", "Concrete Noun", "Countable Noun"] },
        { word: "London", categories: ["Proper Noun", "Concrete Noun", "Countable Noun"] },
        { word: "iPhone", categories: ["Proper Noun", "Concrete Noun", "Countable Noun", "Compound Noun"] },
        { word: "Independence", categories: ["Proper Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "freedom", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "courage", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "water", categories: ["Common Noun", "Concrete Noun", "Uncountable Noun"] },
        { word: "rice", categories: ["Common Noun", "Concrete Noun", "Uncountable Noun"] },
        { word: "toothpaste", categories: ["Common Noun", "Concrete Noun", "Uncountable Noun", "Compound Noun"] },
        { word: "team", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Collective Noun"] },
        { word: "swimming pool", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Compound Noun"] },
        { word: "Mr. Stevens", categories: ["Proper Noun", "Concrete Noun", "Countable Noun"] },
        { word: "Monday", categories: ["Proper Noun", "Abstract Noun", "Countable Noun"] },
        { word: "jury", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Collective Noun"] },
        { word: "information", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "son-in-law", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Compound Noun"] },
        { word: "apple", categories: ["Common Noun", "Concrete Noun", "Countable Noun"] },
        { word: "music", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "staff", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Collective Noun"] },
        { word: "notebook", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Compound Noun"] },
        { word: "oxygen", categories: ["Common Noun", "Concrete Noun", "Uncountable Noun"] },
        { word: "Google", categories: ["Proper Noun", "Concrete Noun", "Countable Noun"] },
        { word: "anxiety", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] },
        { word: "firefly", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Compound Noun"] },
        { word: "orchestra", categories: ["Common Noun", "Concrete Noun", "Countable Noun", "Collective Noun"] },
        { word: "gravity", categories: ["Common Noun", "Abstract Noun", "Uncountable Noun"] }
    ];

    const categoryNames = [
        "Common Noun", "Proper Noun", "Concrete Noun", "Abstract Noun",
        "Countable Noun", "Uncountable Noun", "Collective Noun", "Compound Noun"
    ];

    let selectedWord = null;
    let selectedCategory = null;
    let matchesFound = 0;
    let totalNeeded = 0;
    let timerInterval = null;
    let startTime = null;

    function startGame() {
        totalNeeded = parseInt(document.getElementById('match-count').value);
        document.getElementById('setup-screen').classList.remove('active');
        document.getElementById('game-screen').classList.add('active');
        document.getElementById('goal').innerText = totalNeeded;
        
        setupBoard();
        startTimer();
    }

    function setupBoard() {
        const categoriesGrid = document.getElementById('categories-grid');
        const wordPool = document.getElementById('word-pool');
        categoriesGrid.innerHTML = '';
        wordPool.innerHTML = '';

        // Create Category Cards
        categoryNames.forEach(cat => {
            const div = document.createElement('div');
            div.className = 'category-card';
            div.innerText = cat;
            div.onclick = () => selectCategory(cat, div);
            categoriesGrid.appendChild(div);
        });

        // Pick random words from the pool
        let shuffledPool = [...rawNouns].sort(() => Math.random() - 0.5);
        let gameWords = shuffledPool.slice(0, totalNeeded);

        // Render Word Cards
        gameWords.forEach((item, index) => {
            const span = document.createElement('span');
            span.className = 'word-card';
            span.innerText = item.word;
            span.id = `word-${index}`;
            span.onclick = () => selectWord(item, `word-${index}`);
            wordPool.appendChild(span);
        });
    }

    function selectWord(item, elementId) {
        document.querySelectorAll('.word-card').forEach(el => el.style.borderColor = 'var(--black)');
        selectedWord = { ...item, id: elementId };
        document.getElementById(elementId).style.borderColor = 'var(--primary-green)';
        checkMatch();
    }

    function selectCategory(cat, element) {
        document.querySelectorAll('.category-card').forEach(el => el.classList.remove('selected'));
        selectedCategory = cat;
        element.classList.add('selected');
        checkMatch();
    }

    function checkMatch() {
        const feedback = document.getElementById('feedback');
        
        if (selectedWord && selectedCategory) {
            // Check if the selected category is within the word's list of valid categories
            if (selectedWord.categories.includes(selectedCategory)) {
                feedback.innerText = `Correct! "${selectedWord.word}" is indeed a ${selectedCategory}.`;
                feedback.style.color = 'var(--primary-green)';
                
                document.getElementById(selectedWord.id).classList.add('hidden');
                matchesFound++;
                document.getElementById('progress').innerText = matchesFound;
                
                selectedWord = null;
                if (matchesFound === totalNeeded) endGame();
            } else {
                feedback.innerText = `Not quite. "${selectedWord.word}" does not belong to ${selectedCategory}.`;
                feedback.style.color = 'var(--error-red)';
                selectedWord = null;
                document.querySelectorAll('.word-card').forEach(el => el.style.borderColor = 'var(--black)');
            }
        }
    }

    function startTimer() {
        startTime = Date.now();
        timerInterval = setInterval(() => {
            const delta = Date.now() - startTime;
            const mins = Math.floor(delta / 60000).toString().padStart(2, '0');
            const secs = Math.floor((delta % 60000) / 1000).toString().padStart(2, '0');
            document.getElementById('timer').innerText = `${mins}:${secs}`;
        }, 1000);
    }

    function endGame() {
        clearInterval(timerInterval);
        const finalTimeStr = document.getElementById('timer').innerText;
        document.getElementById('game-screen').classList.remove('active');
        document.getElementById('results-screen').classList.add('active');
        document.getElementById('final-time').innerText = finalTimeStr;
        
        const rankMsg = document.getElementById('rank-message');
        const seconds = (Date.now() - startTime) / 1000;
        
        if (seconds < 60) rankMsg.innerText = "Linguistic Genius! You navigated the overlaps perfectly.";
        else if (seconds < 120) rankMsg.innerText = "Excellent Work! You have a strong grasp of noun types.";
        else rankMsg.innerText = "Good Job! Try again to see if you can spot other category overlaps.";
    }
</script>

</body>
</html>
