<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîê LDAP Learning Center</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', sans-serif; background: #fff; color: #222; line-height: 1.6; }

  /* Header */
  .header {
    background: linear-gradient(135deg, #003580 0%, #0057b8 60%, #cc0000 100%);
    color: white; text-align: center; padding: 40px 20px;
  }
  .header h1 { font-size: 2.6rem; margin-bottom: 8px; }
  .header p { font-size: 1.1rem; opacity: 0.9; }

  /* Nav */
  nav {
    background: #003580; position: sticky; top: 0; z-index: 100;
    display: flex; justify-content: center; flex-wrap: wrap; gap: 4px; padding: 8px;
  }
  nav button {
    background: transparent; border: 2px solid rgba(255,255,255,0.3);
    color: white; padding: 8px 18px; border-radius: 20px; cursor: pointer;
    font-size: 0.9rem; transition: all 0.2s;
  }
  nav button:hover, nav button.active {
    background: #cc0000; border-color: #cc0000;
  }

  /* Sections */
  .section { display: none; max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
  .section.active { display: block; }

  h2 { font-size: 1.9rem; color: #003580; border-left: 5px solid #cc0000; padding-left: 14px; margin-bottom: 20px; }
  h3 { font-size: 1.3rem; color: #003580; margin: 24px 0 10px; }

  /* Cards */
  .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin: 20px 0; }
  .card {
    background: #f0f5ff; border: 2px solid #c5d8f7; border-radius: 10px;
    padding: 18px; text-align: center; transition: transform 0.2s;
  }
  .card:hover { transform: translateY(-3px); border-color: #0057b8; }
  .card .icon { font-size: 2rem; margin-bottom: 8px; }
  .card h4 { color: #003580; margin-bottom: 6px; }
  .card p { font-size: 0.85rem; color: #555; }

  /* Flow steps */
  .flow { display: flex; flex-wrap: wrap; align-items: center; gap: 6px; margin: 20px 0; }
  .step {
    background: #003580; color: white; border-radius: 8px;
    padding: 12px 14px; font-size: 0.85rem; text-align: center; min-width: 110px;
    flex: 1;
  }
  .step strong { display: block; font-size: 1rem; margin-bottom: 4px; }
  .arrow { color: #cc0000; font-size: 1.4rem; font-weight: bold; }

  /* DN Builder */
  .dn-parts { display: flex; flex-wrap: wrap; gap: 8px; margin: 14px 0; }
  .dn-part {
    padding: 8px 14px; border-radius: 6px; font-family: monospace; font-size: 0.9rem;
  }
  .dn-cn { background: #ffecec; border: 2px solid #cc0000; color: #cc0000; }
  .dn-ou { background: #fff3e0; border: 2px solid #e67e00; color: #e67e00; }
  .dn-dc { background: #e8f0fe; border: 2px solid #003580; color: #003580; }

  /* Attribute table */
  .attr-table { width: 100%; border-collapse: collapse; margin: 16px 0; }
  .attr-table th { background: #003580; color: white; padding: 10px 14px; text-align: left; }
  .attr-table tr:nth-child(even) { background: #f0f5ff; }
  .attr-table td { padding: 9px 14px; border-bottom: 1px solid #dde; }
  .attr-table td:first-child { font-family: monospace; color: #cc0000; font-weight: bold; }

  /* Message structure */
  .msg-box { font-family: monospace; background: #f8f8ff; border: 2px solid #0057b8;
    border-radius: 8px; padding: 16px; margin: 16px 0; }
  .msg-row {
    display: flex; gap: 0; margin-bottom: 4px; border-radius: 4px; overflow: hidden;
  }
  .msg-field {
    padding: 8px 12px; font-size: 0.82rem; text-align: center; border-right: 1px solid white;
    flex: 1;
  }
  .f-blue { background: #003580; color: white; }
  .f-red  { background: #cc0000; color: white; }
  .f-lightblue { background: #5b8de8; color: white; }
  .f-lightred  { background: #e85b5b; color: white; }
  .f-gray  { background: #888; color: white; }

  /* Interactive LDAP Query Builder */
  .builder { background: #f8f8ff; border: 2px solid #c5d8f7; border-radius: 10px; padding: 24px; margin: 20px 0; }
  .builder label { display: block; font-weight: 600; color: #003580; margin: 14px 0 4px; }
  .builder input, .builder select {
    width: 100%; padding: 9px 12px; border: 2px solid #c5d8f7; border-radius: 6px;
    font-size: 0.95rem; outline: none;
  }
  .builder input:focus, .builder select:focus { border-color: #0057b8; }
  .btn {
    background: #003580; color: white; border: none; padding: 11px 26px;
    border-radius: 6px; cursor: pointer; font-size: 0.95rem; margin: 6px 4px 0 0;
    transition: background 0.2s;
  }
  .btn:hover { background: #cc0000; }
  .btn-red { background: #cc0000; }
  .btn-red:hover { background: #003580; }
  .output-box {
    background: #1a1a2e; color: #7ec8e3; font-family: monospace; font-size: 0.88rem;
    padding: 16px; border-radius: 8px; margin-top: 16px; min-height: 80px;
    white-space: pre-wrap; line-height: 1.7;
  }

  /* Quiz */
  .quiz-card { background: #f0f5ff; border: 2px solid #c5d8f7; border-radius: 10px; padding: 24px; margin: 20px 0; }
  .quiz-card h3 { color: #003580; margin-bottom: 14px; }
  .options label {
    display: block; padding: 10px 14px; margin: 6px 0; cursor: pointer;
    border: 2px solid #c5d8f7; border-radius: 6px; transition: background 0.2s;
  }
  .options label:hover { background: #e8f0fe; }
  .options input { margin-right: 10px; }
  .correct { background: #e6ffed !important; border-color: #28a745 !important; }
  .incorrect { background: #ffecec !important; border-color: #cc0000 !important; }
  .score-box {
    background: linear-gradient(135deg, #003580, #cc0000); color: white;
    border-radius: 10px; padding: 20px; text-align: center; margin: 20px 0;
    font-size: 1.2rem;
  }

  /* Filter builder */
  .filter-preview {
    background: #1a1a2e; color: #90ee90; font-family: monospace;
    padding: 12px 16px; border-radius: 6px; font-size: 1rem; margin: 10px 0;
    min-height: 40px;
  }

  /* Info box */
  .info-box {
    background: #e8f0fe; border-left: 5px solid #003580; border-radius: 0 8px 8px 0;
    padding: 14px 18px; margin: 16px 0;
  }
  .warn-box {
    background: #ffecec; border-left: 5px solid #cc0000; border-radius: 0 8px 8px 0;
    padding: 14px 18px; margin: 16px 0;
  }

  /* Tree */
  .tree { font-family: monospace; background: #f8f8ff; border: 2px solid #c5d8f7;
    border-radius: 8px; padding: 20px; font-size: 0.9rem; line-height: 2; }
  .tree .dc { color: #003580; font-weight: bold; }
  .tree .ou { color: #0057b8; }
  .tree .cn { color: #cc0000; }

  footer { background: #003580; color: rgba(255,255,255,0.8); text-align: center; padding: 20px; font-size: 0.85rem; }

  @media(max-width:600px) {
    .header h1 { font-size: 1.8rem; }
    .flow { flex-direction: column; }
    .arrow { transform: rotate(90deg); }
  }
</style>
</head>
<body>

<div class="header">
  <h1>üîê LDAP Learning Center</h1>
  <p>Master the Lightweight Directory Access Protocol with interactive lessons and hands-on practice</p>
</div>

<nav id="nav">
  <button class="active" onclick="showSection('overview',this)">Overview</button>
  <button onclick="showSection('howworks',this)">How LDAP Works</button>
  <button onclick="showSection('structure',this)">Directory Structure</button>
  <button onclick="showSection('message',this)">LDAP Message</button>
  <button onclick="showSection('builder',this)">Query Builder</button>
  <button onclick="showSection('quiz',this)">Quiz</button>
</nav>

<!-- ===================== OVERVIEW ===================== -->
<div id="overview" class="section active">
  <h2>What is LDAP?</h2>
  <p>The <strong>Lightweight Directory Access Protocol (LDAP)</strong> is an open, vendor-neutral protocol used to access and maintain distributed directory information services over an IP network. Think of it as a specialized database optimized for <em>reading</em> user accounts, groups, and organizational data.</p>

  <div class="info-box">
    <strong>üîë Key fact:</strong> LDAP runs on <strong>TCP/UDP port 389</strong> (plaintext) and <strong>port 636</strong> for LDAPS (SSL/TLS encrypted). It was standardized as RFC 4511.
  </div>

  <h3>Why Do We Need LDAP?</h3>
  <p>Organizations need a centralized way to store and retrieve information about users, computers, printers, and policies. LDAP provides a lightweight, standardized way to do this ‚Äî powering Active Directory, OpenLDAP, and countless authentication systems.</p>

  <div class="card-grid">
    <div class="card">
      <div class="icon">üè¢</div>
      <h4>Centralized Auth</h4>
      <p>One place to manage all user credentials and access rights</p>
    </div>
    <div class="card">
      <div class="icon">‚ö°</div>
      <h4>Fast Reads</h4>
      <p>Optimized for millions of read queries; ideal for authentication</p>
    </div>
    <div class="card">
      <div class="icon">üåê</div>
      <h4>Open Standard</h4>
      <p>Vendor-neutral RFC standard supported by every major OS</p>
    </div>
    <div class="card">
      <div class="icon">üîí</div>
      <h4>Secure (LDAPS)</h4>
      <p>Supports TLS encryption and SASL authentication</p>
    </div>
    <div class="card">
      <div class="icon">üìÅ</div>
      <h4>Hierarchical</h4>
      <p>Tree structure mirrors real-world organizational charts</p>
    </div>
    <div class="card">
      <div class="icon">üîó</div>
      <h4>Integration</h4>
      <p>Used by AD, Linux PAM, web apps, VPNs, and more</p>
    </div>
  </div>

  <h3>Common LDAP Implementations</h3>
  <table class="attr-table">
    <thead><tr><th>Product</th><th>Vendor</th><th>Use Case</th></tr></thead>
    <tbody>
      <tr><td>Active Directory</td><td>Microsoft</td><td>Enterprise Windows environments</td></tr>
      <tr><td>OpenLDAP</td><td>Open Source</td><td>Linux/Unix directory services</td></tr>
      <tr><td>389 Directory Server</td><td>Red Hat</td><td>Enterprise Linux environments</td></tr>
      <tr><td>Oracle Internet Directory</td><td>Oracle</td><td>Oracle middleware stack</td></tr>
      <tr><td>ApacheDS</td><td>Apache</td><td>Java-based embedded LDAP</td></tr>
    </tbody>
  </table>
</div>

<!-- ===================== HOW LDAP WORKS ===================== -->
<div id="howworks" class="section">
  <h2>How LDAP Works</h2>
  <p>LDAP follows a client-server model. The client sends <strong>operations</strong> (bind, search, modify, add, delete) and the server responds. Every session begins with authentication (bind) and ends with an unbind.</p>

  <h3>LDAP Session Flow</h3>
  <div class="flow">
    <div class="step"><strong>1. Connect</strong>TCP to port 389/636</div>
    <div class="arrow">‚Üí</div>
    <div class="step"><strong>2. Bind</strong>Authenticate to server</div>
    <div class="arrow">‚Üí</div>
    <div class="step"><strong>3. Operation</strong>Search / Add / Modify</div>
    <div class="arrow">‚Üí</div>
    <div class="step"><strong>4. Response</strong>Server returns result</div>
    <div class="arrow">‚Üí</div>
    <div class="step"><strong>5. Unbind</strong>End the session</div>
  </div>

  <h3>LDAP Operations</h3>
  <table class="attr-table">
    <thead><tr><th>Operation</th><th>Code</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td>Bind</td><td>0</td><td>Authenticate (Simple or SASL) ‚Äî starts a session</td></tr>
      <tr><td>Unbind</td><td>2</td><td>Terminate the session gracefully</td></tr>
      <tr><td>Search</td><td>3</td><td>Query the directory with filters and scope</td></tr>
      <tr><td>Modify</td><td>6</td><td>Add, delete, or replace attribute values</td></tr>
      <tr><td>Add</td><td>8</td><td>Add a new entry to the directory</td></tr>
      <tr><td>Delete</td><td>10</td><td>Remove an entry from the directory</td></tr>
      <tr><td>ModifyDN</td><td>12</td><td>Rename or move an entry</td></tr>
      <tr><td>Compare</td><td>14</td><td>Test whether an attribute value exists</td></tr>
      <tr><td>Abandon</td><td>16</td><td>Cancel a previously sent request</td></tr>
    </tbody>
  </table>

  <h3>Bind Types</h3>
  <div class="card-grid">
    <div class="card">
      <div class="icon">üë§</div>
      <h4>Anonymous Bind</h4>
      <p>No credentials ‚Äî read-only access to public directory info. Common for lookups.</p>
    </div>
    <div class="card">
      <div class="icon">üîë</div>
      <h4>Simple Bind</h4>
      <p>DN + password in plaintext. Must use LDAPS/TLS to protect credentials.</p>
    </div>
    <div class="card">
      <div class="icon">üõ°Ô∏è</div>
      <h4>SASL Bind</h4>
      <p>Kerberos, DIGEST-MD5, or GSSAPI. Most secure ‚Äî used in enterprise AD.</p>
    </div>
  </div>

  <div class="warn-box">
    <strong>‚ö†Ô∏è Security Note:</strong> Simple bind over plain LDAP (port 389) sends credentials in cleartext. Always use <strong>LDAPS (port 636)</strong> or <strong>STARTTLS</strong> to encrypt credentials in transit.
  </div>

  <h3>Search Scope</h3>
  <table class="attr-table">
    <thead><tr><th>Scope</th><th>Meaning</th></tr></thead>
    <tbody>
      <tr><td>baseObject</td><td>Only the base DN entry itself</td></tr>
      <tr><td>singleLevel</td><td>Direct children of the base DN (one level down)</td></tr>
      <tr><td>wholeSubtree</td><td>Base DN and all descendants ‚Äî most common</td></tr>
    </tbody>
  </table>
</div>

<!-- ===================== DIRECTORY STRUCTURE ===================== -->
<div id="structure" class="section">
  <h2>Directory Structure</h2>
  <p>LDAP organizes information in a <strong>Directory Information Tree (DIT)</strong> ‚Äî a hierarchical structure similar to a file system. Each node is an <em>entry</em> identified by a <strong>Distinguished Name (DN)</strong>.</p>

  <h3>Distinguished Name (DN)</h3>
  <p>A DN is the unique identifier for an entry, reading from specific (left) to general (right):</p>
  <div class="dn-parts">
    <div class="dn-part dn-cn">cn=John Smith</div>
    <span style="font-size:1.3rem; align-self:center; color:#888;">,</span>
    <div class="dn-part dn-ou">ou=Users</div>
    <span style="font-size:1.3rem; align-self:center; color:#888;">,</span>
    <div class="dn-part dn-ou">ou=IT</div>
    <span style="font-size:1.3rem; align-self:center; color:#888;">,</span>
    <div class="dn-part dn-dc">dc=example</div>
    <span style="font-size:1.3rem; align-self:center; color:#888;">,</span>
    <div class="dn-part dn-dc">dc=com</div>
  </div>

  <h3>DN Component Types (RDN)</h3>
  <table class="attr-table">
    <thead><tr><th>Abbreviation</th><th>Full Name</th><th>Example</th></tr></thead>
    <tbody>
      <tr><td>cn</td><td>Common Name</td><td>cn=John Smith</td></tr>
      <tr><td>sn</td><td>Surname</td><td>sn=Smith</td></tr>
      <tr><td>ou</td><td>Organizational Unit</td><td>ou=Engineering</td></tr>
      <tr><td>o</td><td>Organization</td><td>o=Acme Corp</td></tr>
      <tr><td>dc</td><td>Domain Component</td><td>dc=example</td></tr>
      <tr><td>uid</td><td>User ID</td><td>uid=jsmith</td></tr>
      <tr><td>c</td><td>Country</td><td>c=US</td></tr>
    </tbody>
  </table>

  <h3>Example Directory Tree</h3>
  <div class="tree">
<span class="dc">dc=example,dc=com</span>  (Root)
‚îú‚îÄ‚îÄ <span class="ou">ou=Users</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="cn">cn=Alice Johnson</span>   ‚Üí uid=ajohnson, mail=alice@example.com
‚îÇ   ‚îú‚îÄ‚îÄ <span class="cn">cn=Bob Martinez</span>    ‚Üí uid=bmartinez, mail=bob@example.com
‚îÇ   ‚îî‚îÄ‚îÄ <span class="cn">cn=Carol White</span>     ‚Üí uid=cwhite, mail=carol@example.com
‚îú‚îÄ‚îÄ <span class="ou">ou=Groups</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="cn">cn=IT-Admins</span>       ‚Üí member: cn=Alice Johnson,...
‚îÇ   ‚îî‚îÄ‚îÄ <span class="cn">cn=HR-Staff</span>        ‚Üí member: cn=Carol White,...
‚îú‚îÄ‚îÄ <span class="ou">ou=Computers</span>
‚îÇ   ‚îú‚îÄ‚îÄ <span class="cn">cn=WS001</span>           ‚Üí operatingSystem: Windows 11
‚îÇ   ‚îî‚îÄ‚îÄ <span class="cn">cn=SRV-DC01</span>       ‚Üí operatingSystem: Windows Server 2022
‚îî‚îÄ‚îÄ <span class="ou">ou=ServiceAccounts</span>
    ‚îî‚îÄ‚îÄ <span class="cn">cn=svc-backup</span>      ‚Üí uid=svcbackup
  </div>

  <h3>Common LDAP Attributes</h3>
  <table class="attr-table">
    <thead><tr><th>Attribute</th><th>OID Short</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td>objectClass</td><td>2.5.4.*</td><td>Defines schema rules for the entry (e.g., inetOrgPerson)</td></tr>
      <tr><td>uid</td><td>0.9.2342‚Ä¶</td><td>User login name</td></tr>
      <tr><td>cn</td><td>2.5.4.3</td><td>Common name (display name)</td></tr>
      <tr><td>sn</td><td>2.5.4.4</td><td>Surname / family name</td></tr>
      <tr><td>mail</td><td>0.9.2342‚Ä¶</td><td>Email address</td></tr>
      <tr><td>userPassword</td><td>2.5.4.35</td><td>Hashed password (SSHA, bcrypt, etc.)</td></tr>
      <tr><td>telephoneNumber</td><td>2.5.4.20</td><td>Phone number</td></tr>
      <tr><td>memberOf</td><td>‚Äî</td><td>Groups this entry belongs to</td></tr>
      <tr><td>givenName</td><td>2.5.4.42</td><td>First name</td></tr>
      <tr><td>title</td><td>2.5.4.12</td><td>Job title</td></tr>
    </tbody>
  </table>

  <h3>Object Classes</h3>
  <p>Every LDAP entry must have an <strong>objectClass</strong> that defines which attributes are required and permitted:</p>
  <div class="card-grid">
    <div class="card">
      <div class="icon">üë§</div>
      <h4>inetOrgPerson</h4>
      <p>Standard user account ‚Äî includes uid, mail, cn, sn</p>
    </div>
    <div class="card">
      <div class="icon">üë•</div>
      <h4>groupOfNames</h4>
      <p>Group entry containing a list of member DNs</p>
    </div>
    <div class="card">
      <div class="icon">üñ•Ô∏è</div>
      <h4>device</h4>
      <p>Represents computers, printers, and network devices</p>
    </div>
    <div class="card">
      <div class="icon">üè¢</div>
      <h4>organization</h4>
      <p>Top-level org entry with the 'o' attribute required</p>
    </div>
  </div>
</div>

<!-- ===================== LDAP MESSAGE ===================== -->
<div id="message" class="section">
  <h2>LDAP Message Format</h2>
  <p>LDAP messages are encoded using <strong>ASN.1 BER (Basic Encoding Rules)</strong>. Every message ‚Äî request or response ‚Äî wraps in a common envelope called the <em>LDAPMessage</em>.</p>

  <h3>LDAPMessage Envelope</h3>
  <div class="msg-box">
    <div class="msg-row">
      <div class="msg-field f-blue">Tag (SEQUENCE)</div>
      <div class="msg-field f-blue">Length</div>
      <div class="msg-field f-lightblue">messageID (Integer)</div>
      <div class="msg-field f-red">protocolOp (Operation)</div>
      <div class="msg-field f-lightred">controls (Optional)</div>
    </div>
    <br>
    <strong style="color:#003580;">Search Request ‚Äî protocolOp breakdown:</strong>
    <div class="msg-row" style="margin-top:8px;">
      <div class="msg-field f-blue">baseObject (DN)</div>
      <div class="msg-field f-lightblue">scope (0/1/2)</div>
      <div class="msg-field f-lightblue">derefAliases</div>
      <div class="msg-field f-gray">sizeLimit</div>
      <div class="msg-field f-gray">timeLimit</div>
      <div class="msg-field f-red">filter</div>
      <div class="msg-field f-lightred">attributes</div>
    </div>
  </div>

  <h3>Field Descriptions</h3>
  <table class="attr-table">
    <thead><tr><th>Field</th><th>Description</th></tr></thead>
    <tbody>
      <tr><td>messageID</td><td>Unique integer to match requests with asynchronous responses (1‚Äì2,147,483,647)</td></tr>
      <tr><td>protocolOp</td><td>The actual LDAP operation (e.g., SearchRequest, BindRequest, SearchResultEntry)</td></tr>
      <tr><td>controls</td><td>Optional extensions ‚Äî paging, sort, LDAP transactions, etc.</td></tr>
      <tr><td>baseObject</td><td>The DN where the search starts (e.g., dc=example,dc=com)</td></tr>
      <tr><td>scope</td><td>0=baseObject, 1=singleLevel, 2=wholeSubtree</td></tr>
      <tr><td>derefAliases</td><td>How to handle alias entries (never, inSearching, findingBaseObj, always)</td></tr>
      <tr><td>sizeLimit</td><td>Max number of entries to return (0=no limit)</td></tr>
      <tr><td>timeLimit</td><td>Max seconds to execute (0=no limit)</td></tr>
      <tr><td>filter</td><td>Boolean expression selecting which entries to return</td></tr>
      <tr><td>attributes</td><td>List of attribute types to return (empty = return all)</td></tr>
    </tbody>
  </table>

  <h3>LDAP Result Codes</h3>
  <table class="attr-table">
    <thead><tr><th>Code</th><th>Name</th><th>Meaning</th></tr></thead>
    <tbody>
      <tr><td>0</td><td>success</td><td>Operation completed successfully</td></tr>
      <tr><td>1</td><td>operationsError</td><td>Server encountered an internal processing error</td></tr>
      <tr><td>2</td><td>protocolError</td><td>Malformed request sent by client</td></tr>
      <tr><td>3</td><td>timeLimitExceeded</td><td>Operation exceeded the time limit</td></tr>
      <tr><td>4</td><td>sizeLimitExceeded</td><td>More results exist than the size limit allows</td></tr>
      <tr><td>10</td><td>referral</td><td>Server cannot handle request; refers to another server</td></tr>
      <tr><td>32</td><td>noSuchObject</td><td>The target DN does not exist</td></tr>
      <tr><td>34</td><td>invalidDNSyntax</td><td>The provided DN is malformed</td></tr>
      <tr><td>49</td><td>invalidCredentials</td><td>Wrong password / bad credentials (auth failure)</td></tr>
      <tr><td>50</td><td>insufficientAccessRights</td><td>Caller lacks permission for the operation</td></tr>
      <tr><td>53</td><td>unwillingToPerform</td><td>Server refuses (e.g., password policy)</td></tr>
    </tbody>
  </table>

  <h3>LDAP Filter Syntax</h3>
  <p>Search filters use prefix (Polish) notation wrapped in parentheses:</p>
  <table class="attr-table">
    <thead><tr><th>Filter</th><th>Example</th><th>Meaning</th></tr></thead>
    <tbody>
      <tr><td>Equality</td><td>(cn=Alice)</td><td>cn equals "Alice"</td></tr>
      <tr><td>Substring</td><td>(mail=*@example.com)</td><td>mail ends with @example.com</td></tr>
      <tr><td>Present</td><td>(telephoneNumber=*)</td><td>telephoneNumber attribute exists</td></tr>
      <tr><td>AND</td><td>(&(uid=jsmith)(objectClass=person))</td><td>Both conditions true</td></tr>
      <tr><td>OR</td><td>(|(cn=Alice)(cn=Bob))</td><td>Either condition true</td></tr>
      <tr><td>NOT</td><td>(!(accountLocked=TRUE))</td><td>Condition is false</td></tr>
      <tr><td>Approx</td><td>(cn~=Alyss)</td><td>Approximately equal (soundex)</td></tr>
      <tr><td>Greater/Less</td><td>(uidNumber>=1000)</td><td>Numeric/lexicographic comparison</td></tr>
    </tbody>
  </table>
</div>

<!-- ===================== QUERY BUILDER ===================== -->
<div id="builder" class="section">
  <h2>LDAP Query Builder</h2>
  <p>Build and simulate LDAP search queries interactively. Construct a filter and see the generated query string plus a simulated response.</p>

  <div class="builder">
    <h3 style="margin-top:0; color:#003580;">üîß Build a Search Filter</h3>

    <label>Base DN</label>
    <input type="text" id="baseDN" value="dc=example,dc=com" placeholder="e.g. ou=Users,dc=example,dc=com">

    <label>Scope</label>
    <select id="scope">
      <option value="2">wholeSubtree (2) ‚Äî All descendants</option>
      <option value="1">singleLevel (1) ‚Äî Direct children only</option>
      <option value="0">baseObject (0) ‚Äî Base entry only</option>
    </select>

    <label>Filter Type</label>
    <select id="filterType" onchange="updateFilterUI()">
      <option value="simple">Simple (attribute=value)</option>
      <option value="and">AND (&) ‚Äî Multiple conditions</option>
      <option value="or">OR (|) ‚Äî Any condition</option>
      <option value="not">NOT (!) ‚Äî Negate condition</option>
      <option value="substring">Substring ‚Äî Wildcard match</option>
      <option value="present">Present ‚Äî Attribute exists</option>
    </select>

    <div id="filterFields">
      <label>Attribute</label>
      <input type="text" id="attr1" value="objectClass" placeholder="e.g. uid, cn, mail">
      <label>Value</label>
      <input type="text" id="val1" value="inetOrgPerson" placeholder="e.g. jsmith, Alice">
    </div>

    <div id="andOrFields" style="display:none;">
      <label>Condition 1 ‚Äî Attribute</label>
      <input type="text" id="attr2" value="objectClass" placeholder="e.g. objectClass">
      <label>Condition 1 ‚Äî Value</label>
      <input type="text" id="val2" value="person">
      <label>Condition 2 ‚Äî Attribute</label>
      <input type="text" id="attr3" value="uid" placeholder="e.g. uid">
      <label>Condition 2 ‚Äî Value</label>
      <input type="text" id="val3" value="jsmith">
    </div>

    <label>Return Attributes (comma-separated, blank = all)</label>
    <input type="text" id="retAttrs" value="cn,uid,mail,telephoneNumber" placeholder="cn,uid,mail">

    <label style="margin-top:16px;">Generated LDAP Filter Preview</label>
    <div class="filter-preview" id="filterPreview">(objectClass=inetOrgPerson)</div>

    <button class="btn" onclick="buildQuery()">‚ñ∂ Simulate Search</button>
    <button class="btn btn-red" onclick="clearOutput()">‚úï Clear</button>

    <div id="queryOutput" class="output-box" style="display:none;"></div>
  </div>

  <div class="builder" style="margin-top:30px;">
    <h3 style="margin-top:0; color:#003580;">üìù LDIF Entry Creator</h3>
    <p style="margin-bottom:14px; color:#555;">LDIF (LDAP Data Interchange Format) is the standard text format for importing/exporting LDAP entries.</p>

    <label>Common Name (cn)</label>
    <input type="text" id="ldifCN" placeholder="e.g. Jane Doe">
    <label>User ID (uid)</label>
    <input type="text" id="ldifUID" placeholder="e.g. jdoe">
    <label>Email</label>
    <input type="text" id="ldifMail" placeholder="e.g. jdoe@example.com">
    <label>Department (ou)</label>
    <input type="text" id="ldifOU" value="Users" placeholder="e.g. Engineering">
    <label>Phone</label>
    <input type="text" id="ldifPhone" placeholder="e.g. +1 555 123 4567">

    <button class="btn" onclick="generateLDIF()">üìÑ Generate LDIF</button>
    <button class="btn btn-red" onclick="document.getElementById('ldifOutput').style.display='none'">‚úï Clear</button>
    <div id="ldifOutput" class="output-box" style="display:none;"></div>
  </div>
</div>

<!-- ===================== QUIZ ===================== -->
<div id="quiz" class="section">
  <h2>LDAP Knowledge Quiz</h2>
  <p>Test your understanding of LDAP concepts!</p>

  <div id="quizArea">
    <div id="quizStart" style="text-align:center; padding:40px;">
      <p style="font-size:1.1rem; margin-bottom:20px;">10 questions covering LDAP fundamentals, message format, directory structure, and security.</p>
      <button class="btn" style="font-size:1.1rem; padding:14px 36px;" onclick="startQuiz()">‚ñ∂ Start Quiz</button>
    </div>
    <div id="quizQuestions" style="display:none;"></div>
    <div id="quizResult" style="display:none;"></div>
  </div>
</div>

<footer>
  <p>üîê LDAP Learning Center &nbsp;|&nbsp; Moraine Valley Community College &nbsp;|&nbsp; Cybersecurity & AI Program</p>
  <p style="margin-top:6px; opacity:0.7;">LDAP RFC 4511 &nbsp;¬∑&nbsp; Port 389 (plain) &nbsp;¬∑&nbsp; Port 636 (LDAPS)</p>
</footer>

<script>
// ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showSection(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});
}

// ‚îÄ‚îÄ Filter Builder (live preview) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateFilterUI() {
  const type = document.getElementById('filterType').value;
  const simple = document.getElementById('filterFields');
  const compound = document.getElementById('andOrFields');
  simple.style.display = (type === 'and' || type === 'or') ? 'none' : 'block';
  compound.style.display = (type === 'and' || type === 'or') ? 'block' : 'none';
  buildLiveFilter();
}

function buildLiveFilter() {
  const type = document.getElementById('filterType').value;
  let filter = '';
  const a1 = document.getElementById('attr1').value || 'attribute';
  const v1 = document.getElementById('val1').value || 'value';
  const a2 = document.getElementById('attr2')?.value || 'objectClass';
  const v2 = document.getElementById('val2')?.value || 'person';
  const a3 = document.getElementById('attr3')?.value || 'uid';
  const v3 = document.getElementById('val3')?.value || 'jsmith';

  switch(type) {
    case 'simple':    filter = `(${a1}=${v1})`; break;
    case 'and':       filter = `(&(${a2}=${v2})(${a3}=${v3}))`; break;
    case 'or':        filter = `(|(${a2}=${v2})(${a3}=${v3}))`; break;
    case 'not':       filter = `(!(${a1}=${v1}))`; break;
    case 'substring': filter = `(${a1}=*${v1}*)`; break;
    case 'present':   filter = `(${a1}=*)`; break;
  }
  document.getElementById('filterPreview').textContent = filter;
  return filter;
}

// Live update on input
document.addEventListener('input', function(e) {
  if (e.target.closest('.builder')) buildLiveFilter();
});

// ‚îÄ‚îÄ Simulate LDAP Search ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const sampleData = [
  { dn:'cn=Alice Johnson,ou=Users,dc=example,dc=com', cn:'Alice Johnson', uid:'ajohnson', mail:'alice@example.com', telephoneNumber:'+1 555 100 2001', objectClass:'inetOrgPerson' },
  { dn:'cn=Bob Martinez,ou=Users,dc=example,dc=com',  cn:'Bob Martinez',  uid:'bmartinez', mail:'bob@example.com', telephoneNumber:'+1 555 100 2002', objectClass:'inetOrgPerson' },
  { dn:'cn=Carol White,ou=Users,dc=example,dc=com',   cn:'Carol White',   uid:'cwhite',  mail:'carol@example.com', telephoneNumber:'+1 555 100 2003', objectClass:'inetOrgPerson' },
  { dn:'cn=svc-backup,ou=ServiceAccounts,dc=example,dc=com', cn:'svc-backup', uid:'svcbackup', mail:'backup@example.com', objectClass:'inetOrgPerson' },
];

function buildQuery() {
  const base    = document.getElementById('baseDN').value;
  const scope   = document.getElementById('scope').value;
  const filter  = buildLiveFilter();
  const attrs   = document.getElementById('retAttrs').value;
  const attrList = attrs ? attrs.split(',').map(a=>a.trim()) : [];

  const scopeNames = ['baseObject','singleLevel','wholeSubtree'];
  let out = `# LDAP Search Request\n`;
  out += `# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
  out += `ldapsearch -H ldap://ldap.example.com \\\n`;
  out += `  -D "cn=readonly,dc=example,dc=com" \\\n`;
  out += `  -w ******* \\\n`;
  out += `  -b "${base}" \\\n`;
  out += `  -s ${scopeNames[scope]} \\\n`;
  out += `  "${filter}"`;
  if (attrList.length) out += ` \\\n  ${attrList.join(' ')}`;
  out += `\n\n# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
  out += `# Server Response (simulated)\n\n`;

  // Simple simulation: return entries matching objectClass or uid
  let matched = sampleData.filter(e => {
    if (filter.includes('inetOrgPerson')) return true;
    if (filter.includes('ajohnson') || filter.includes('Alice')) return e.uid === 'ajohnson';
    if (filter.includes('bmartinez') || filter.includes('Bob'))   return e.uid === 'bmartinez';
    return true;
  });

  if (scope == 0) matched = matched.slice(0,1);

  matched.forEach(entry => {
    out += `dn: ${entry.dn}\n`;
    const show = attrList.length ? attrList : ['objectClass','cn','uid','mail','telephoneNumber'];
    show.forEach(a => {
      if (entry[a]) out += `${a}: ${entry[a]}\n`;
    });
    out += `\n`;
  });

  out += `# numResponses: ${matched.length + 1}\n`;
  out += `# numEntries:   ${matched.length}\n`;
  out += `# Result Code:  0 (success)`;

  const box = document.getElementById('queryOutput');
  box.style.display = 'block';
  box.textContent = out;
}

function clearOutput() {
  document.getElementById('queryOutput').style.display = 'none';
  document.getElementById('filterPreview').textContent = '(objectClass=inetOrgPerson)';
}

// ‚îÄ‚îÄ LDIF Generator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function generateLDIF() {
  const cn   = document.getElementById('ldifCN').value   || 'New User';
  const uid  = document.getElementById('ldifUID').value  || 'newuser';
  const mail = document.getElementById('ldifMail').value || uid + '@example.com';
  const ou   = document.getElementById('ldifOU').value   || 'Users';
  const phone= document.getElementById('ldifPhone').value;
  const sn   = cn.includes(' ') ? cn.split(' ').slice(-1)[0] : cn;
  const gn   = cn.includes(' ') ? cn.split(' ')[0] : cn;

  let ldif = `# LDIF Entry for ${cn}\n`;
  ldif += `# Generated by LDAP Learning Center\n\n`;
  ldif += `dn: cn=${cn},ou=${ou},dc=example,dc=com\n`;
  ldif += `objectClass: top\n`;
  ldif += `objectClass: person\n`;
  ldif += `objectClass: organizationalPerson\n`;
  ldif += `objectClass: inetOrgPerson\n`;
  ldif += `cn: ${cn}\n`;
  ldif += `sn: ${sn}\n`;
  ldif += `givenName: ${gn}\n`;
  ldif += `uid: ${uid}\n`;
  ldif += `mail: ${mail}\n`;
  if (phone) ldif += `telephoneNumber: ${phone}\n`;
  ldif += `userPassword: {SSHA}[hashed_password_here]\n`;
  ldif += `\n# To add this entry:\n`;
  ldif += `# ldapadd -H ldap://localhost -D "cn=admin,dc=example,dc=com" -W -f entry.ldif`;

  const box = document.getElementById('ldifOutput');
  box.style.display = 'block';
  box.textContent = ldif;
}

// ‚îÄ‚îÄ Quiz ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const questions = [
  { q:'What port does standard (unencrypted) LDAP use?',
    opts:['Port 443','Port 389','Port 636','Port 53'], ans:1,
    exp:'LDAP uses TCP/UDP port 389 for plaintext connections. Port 636 is for LDAPS (SSL/TLS).' },
  { q:'What does "DN" stand for in LDAP?',
    opts:['Directory Node','Domain Name','Distinguished Name','Dynamic Namespace'], ans:2,
    exp:'DN stands for Distinguished Name ‚Äî the unique identifier for an entry in the directory tree.' },
  { q:'Which LDAP operation is used to authenticate to the server?',
    opts:['Connect','Search','Bind','Add'], ans:2,
    exp:'The Bind operation authenticates the client. It can use Simple (DN+password) or SASL methods.' },
  { q:'In a DN of "cn=Alice,ou=Users,dc=example,dc=com", what does "ou" represent?',
    opts:['Operational Unit','Object URL','Organizational Unit','Open User'], ans:2,
    exp:'"ou" stands for Organizational Unit, used to group entries such as departments or teams.' },
  { q:'What result code 49 indicates in an LDAP response?',
    opts:['No such object','Success','Invalid credentials','Insufficient access rights'], ans:2,
    exp:'Result code 49 means invalidCredentials ‚Äî the supplied password or credentials are incorrect.' },
  { q:'Which LDAP search scope returns the base entry AND all its descendants?',
    opts:['baseObject (0)','singleLevel (1)','wholeSubtree (2)','allEntries (3)'], ans:2,
    exp:'wholeSubtree (scope=2) searches the base DN and all entries below it in the tree.' },
  { q:'What does the LDAP filter "(!(accountLocked=TRUE))" mean?',
    opts:['Account must be locked','Account locking is unknown','Account must NOT be locked','Account locked equals false only'], ans:2,
    exp:'The NOT operator (!) negates the condition, so this filter returns entries where accountLocked is NOT TRUE.' },
  { q:'What encoding format does LDAP use for its message protocol?',
    opts:['JSON','XML','ASN.1 BER','Base64 text'], ans:2,
    exp:'LDAP messages are encoded using ASN.1 BER (Basic Encoding Rules), a compact binary format.' },
  { q:'What is LDIF used for?',
    opts:['Encrypting LDAP traffic','Importing and exporting LDAP directory data','Defining LDAP schemas only','Monitoring LDAP server health'], ans:1,
    exp:'LDIF (LDAP Data Interchange Format) is a text-based format for importing and exporting LDAP entries.' },
  { q:'Which port does LDAPS (LDAP over SSL/TLS) use?',
    opts:['389','443','636','8443'], ans:2,
    exp:'LDAPS uses port 636, providing an encrypted channel for LDAP communications using SSL/TLS.' },
];

let currentQ = 0, score = 0, answered = [];

function startQuiz() {
  currentQ = 0; score = 0; answered = new Array(questions.length).fill(null);
  document.getElementById('quizStart').style.display = 'none';
  document.getElementById('quizResult').style.display = 'none';
  document.getElementById('quizQuestions').style.display = 'block';
  renderQuestion();
}

function renderQuestion() {
  const q = questions[currentQ];
  const container = document.getElementById('quizQuestions');
  container.innerHTML = `
    <div style="color:#888; margin-bottom:8px;">Question ${currentQ+1} of ${questions.length}</div>
    <div class="quiz-card">
      <h3>${q.q}</h3>
      <div class="options" id="opts">
        ${q.opts.map((o,i) => `
          <label id="opt_${i}" onclick="selectAnswer(${i})">
            <input type="radio" name="opt" value="${i}"> ${o}
          </label>`).join('')}
      </div>
      <div id="feedback" style="margin-top:12px; font-weight:600;"></div>
      <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn" id="submitBtn" onclick="submitAnswer()">‚úî Submit Answer</button>
        <button class="btn btn-red" id="nextBtn" style="display:none;" onclick="nextQuestion()">Next ‚Üí</button>
      </div>
    </div>
    <div style="background:#e8f0fe; border-radius:8px; padding:10px 16px; margin-top:10px; color:#555;">
      Score so far: <strong style="color:#003580;">${score}/${currentQ}</strong>
    </div>`;
}

let selectedOpt = null;
function selectAnswer(i) {
  selectedOpt = i;
  document.querySelectorAll('.options label').forEach((l,idx) => {
    l.style.background = idx === i ? '#e8f0fe' : '';
    l.style.borderColor = idx === i ? '#003580' : '';
  });
}

function submitAnswer() {
  if (selectedOpt === null) { alert('Please select an answer first!'); return; }
  const q = questions[currentQ];
  const correct = selectedOpt === q.ans;
  if (correct) score++;
  answered[currentQ] = selectedOpt;

  document.querySelectorAll('.options label').forEach((l,i) => {
    if (i === q.ans) l.classList.add('correct');
    else if (i === selectedOpt && !correct) l.classList.add('incorrect');
    l.style.pointerEvents = 'none';
  });

  const fb = document.getElementById('feedback');
  fb.innerHTML = correct
    ? `<span style="color:#28a745;">‚úÖ Correct!</span> ${q.exp}`
    : `<span style="color:#cc0000;">‚ùå Incorrect.</span> ${q.exp}`;

  document.getElementById('submitBtn').style.display = 'none';
  document.getElementById('nextBtn').style.display = 'inline-block';
  document.getElementById('nextBtn').textContent = currentQ < questions.length-1 ? 'Next ‚Üí' : 'See Results';
  selectedOpt = null;
}

function nextQuestion() {
  currentQ++;
  if (currentQ >= questions.length) {
    showResults();
  } else {
    renderQuestion();
  }
}

function showResults() {
  document.getElementById('quizQuestions').style.display = 'none';
  const pct = Math.round((score/questions.length)*100);
  const grade = pct >= 90 ? 'üèÜ Excellent!' : pct >= 70 ? 'üëç Good job!' : pct >= 50 ? 'üìö Keep studying!' : 'üîÑ Review the material!';
  document.getElementById('quizResult').style.display = 'block';
  document.getElementById('quizResult').innerHTML = `
    <div class="score-box">
      <div style="font-size:2rem; margin-bottom:10px;">${grade}</div>
      <div style="font-size:1.4rem;">You scored <strong>${score}/${questions.length}</strong> (${pct}%)</div>
    </div>
    <div style="text-align:center; margin-top:20px;">
      <button class="btn" style="font-size:1rem; padding:12px 30px;" onclick="startQuiz()">üîÑ Retake Quiz</button>
    </div>`;
}
</script>
</body>
</html>
