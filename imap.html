<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMAP Protocol - Interactive Learning Module</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');

        :root {
            --blue: #003399;
            --blue-mid: #0055cc;
            --blue-light: #3377ee;
            --blue-pale: #dce8ff;
            --red: #cc0000;
            --red-mid: #ee2222;
            --red-pale: #ffe0e0;
            --white: #ffffff;
            --offwhite: #f7f9ff;
            --gray-light: #eef0f5;
            --gray-mid: #c0c8d8;
            --gray-dark: #4a5568;
            --text: #111827;
            --mono: 'Share Tech Mono', monospace;
            --display: 'Rajdhani', sans-serif;
            --body: 'Inter', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--body);
            background: var(--white);
            color: var(--text);
            line-height: 1.6;
        }

        /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
        header {
            background: var(--blue);
            color: white;
            padding: 0;
            position: relative;
            overflow: hidden;
        }
        .header-inner {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 30px 30px;
            position: relative;
            z-index: 2;
        }
        .header-grid {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        .header-icon {
            width: 72px;
            height: 72px;
            background: rgba(255,255,255,0.12);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            flex-shrink: 0;
        }
        .header-text h1 {
            font-family: var(--display);
            font-size: 2.6rem;
            font-weight: 700;
            letter-spacing: 2px;
            line-height: 1.1;
        }
        .header-text h1 span { color: #ff6666; }
        .header-text p {
            font-size: 0.95rem;
            opacity: 0.85;
            margin-top: 6px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }
        .badge-row {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .badge {
            background: rgba(255,255,255,0.12);
            border: 1px solid rgba(255,255,255,0.25);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.78rem;
            font-family: var(--mono);
            letter-spacing: 1px;
        }
        .badge.red { background: rgba(204,0,0,0.4); border-color: rgba(255,100,100,0.4); }
        /* decorative circles */
        header::before, header::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            opacity: 0.06;
            background: white;
        }
        header::before { width: 400px; height: 400px; top: -200px; right: -100px; }
        header::after  { width: 250px; height: 250px; bottom: -150px; right: 200px; }

        /* ‚îÄ‚îÄ‚îÄ NAV TABS ‚îÄ‚îÄ‚îÄ */
        .nav-bar {
            background: var(--blue);
            border-top: 1px solid rgba(255,255,255,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 12px rgba(0,0,0,0.2);
        }
        .nav-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            overflow-x: auto;
        }
        .nav-tab {
            padding: 14px 22px;
            font-family: var(--display);
            font-size: 0.88rem;
            font-weight: 600;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.65);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
            text-transform: uppercase;
        }
        .nav-tab:hover { color: white; background: rgba(255,255,255,0.07); }
        .nav-tab.active { color: white; border-bottom-color: var(--red-mid); }

        /* ‚îÄ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ‚îÄ */
        main {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px;
        }

        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

        /* ‚îÄ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ‚îÄ */
        .card {
            background: var(--white);
            border: 1px solid var(--gray-light);
            border-radius: 10px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,51,153,0.05);
        }
        .card-blue {
            border-left: 4px solid var(--blue-mid);
            background: var(--offwhite);
        }
        .card-red {
            border-left: 4px solid var(--red);
            background: #fff8f8;
        }
        .card h2 {
            font-family: var(--display);
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        .card h3 {
            font-family: var(--display);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--blue-mid);
            margin-bottom: 8px;
        }

        /* ‚îÄ‚îÄ‚îÄ OVERVIEW GRID ‚îÄ‚îÄ‚îÄ */
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        .stat-box {
            background: var(--blue);
            color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .stat-box .val {
            font-family: var(--mono);
            font-size: 2rem;
            font-weight: bold;
            color: #aaccff;
        }
        .stat-box .lbl {
            font-size: 0.78rem;
            opacity: 0.8;
            margin-top: 4px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        .stat-box.red-box { background: var(--red); }
        .stat-box.red-box .val { color: #ffaaaa; }

        /* ‚îÄ‚îÄ‚îÄ HOW IT WORKS DIAGRAM ‚îÄ‚îÄ‚îÄ */
        .diagram-container {
            background: var(--offwhite);
            border: 1px solid var(--gray-light);
            border-radius: 10px;
            padding: 30px 20px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        .diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            min-width: 600px;
        }
        .diag-box {
            border-radius: 8px;
            padding: 14px 18px;
            text-align: center;
            font-family: var(--display);
            font-weight: 600;
            font-size: 0.9rem;
            min-width: 120px;
        }
        .diag-box.client { background: var(--blue); color: white; }
        .diag-box.server { background: var(--red); color: white; }
        .diag-box.cloud  { background: #4477cc; color: white; }
        .diag-box.mail   { background: #aa0000; color: white; }
        .diag-box small  { display: block; font-size: 0.72rem; opacity: 0.8; margin-top: 2px; font-family: var(--mono); }
        .diag-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: 0 8px;
        }
        .diag-arrow .label {
            font-family: var(--mono);
            font-size: 0.68rem;
            color: var(--blue-mid);
            white-space: nowrap;
        }
        .diag-arrow .line {
            display: flex;
            align-items: center;
            gap: 2px;
        }
        .diag-arrow .shaft {
            width: 60px;
            height: 2px;
            background: var(--blue-mid);
        }
        .diag-arrow .head { color: var(--blue-mid); font-size: 1rem; line-height: 1; }
        .diag-arrow.red-arr .shaft { background: var(--red); }
        .diag-arrow.red-arr .head { color: var(--red); }
        .diag-arrow.red-arr .label { color: var(--red); }

        /* ‚îÄ‚îÄ‚îÄ TERMINAL / SIMULATOR ‚îÄ‚îÄ‚îÄ */
        .terminal-wrap {
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #ccd;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,80,0.1);
        }
        .terminal-bar {
            background: #1a2040;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .terminal-bar .dots span {
            display: inline-block;
            width: 12px; height: 12px;
            border-radius: 50%;
            margin-right: 4px;
        }
        .dot-red { background: #ff5f57; }
        .dot-yellow { background: #ffbd2e; }
        .dot-green { background: #28c840; }
        .terminal-bar .title {
            font-family: var(--mono);
            font-size: 0.8rem;
            color: #8899cc;
            margin-left: 8px;
        }
        .terminal-body {
            background: #0d1128;
            padding: 20px;
            font-family: var(--mono);
            font-size: 0.85rem;
            line-height: 1.8;
            min-height: 220px;
            max-height: 380px;
            overflow-y: auto;
        }
        .t-server { color: #66aaff; }
        .t-client { color: #ff8888; }
        .t-comment { color: #556688; font-style: italic; }
        .t-ok { color: #44dd88; }
        .t-tag { color: #ffcc44; }

        .sim-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        .sim-btn {
            padding: 9px 18px;
            border: none;
            border-radius: 6px;
            font-family: var(--display);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }
        .sim-btn.blue { background: var(--blue); color: white; }
        .sim-btn.blue:hover { background: var(--blue-light); }
        .sim-btn.red  { background: var(--red); color: white; }
        .sim-btn.red:hover  { background: var(--red-mid); }
        .sim-btn.gray { background: var(--gray-light); color: var(--gray-dark); }
        .sim-btn.gray:hover { background: var(--gray-mid); }

        /* ‚îÄ‚îÄ‚îÄ COMMANDS TABLE ‚îÄ‚îÄ‚îÄ */
        .cmd-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        .cmd-table th {
            background: var(--blue);
            color: white;
            padding: 11px 14px;
            text-align: left;
            font-family: var(--display);
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 0.82rem;
            text-transform: uppercase;
        }
        .cmd-table td {
            padding: 10px 14px;
            border-bottom: 1px solid var(--gray-light);
        }
        .cmd-table tr:nth-child(even) td { background: var(--offwhite); }
        .cmd-table tr:hover td { background: var(--blue-pale); }
        .cmd-tag {
            font-family: var(--mono);
            font-size: 0.82rem;
            background: var(--blue);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        .cmd-tag.red { background: var(--red); }
        .resp-ok  { color: #007700; font-family: var(--mono); font-size: 0.82rem; font-weight: 600; }
        .resp-bad { color: var(--red); font-family: var(--mono); font-size: 0.82rem; font-weight: 600; }

        /* ‚îÄ‚îÄ‚îÄ STATE MACHINE ‚îÄ‚îÄ‚îÄ */
        .state-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 14px;
            margin-bottom: 20px;
        }
        .state-card {
            border: 2px solid var(--gray-mid);
            border-radius: 10px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .state-card:hover { border-color: var(--blue-mid); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,51,153,0.1); }
        .state-card.s-active { border-color: var(--blue); background: var(--blue-pale); }
        .state-card.s-error  { border-color: var(--red); background: var(--red-pale); }
        .state-card .s-name  { font-family: var(--display); font-weight: 700; font-size: 1rem; color: var(--blue); margin-bottom: 6px; }
        .state-card.s-error .s-name { color: var(--red); }
        .state-card .s-desc  { font-size: 0.82rem; color: var(--gray-dark); }
        .state-card .s-badge {
            position: absolute;
            top: 10px; right: 10px;
            width: 10px; height: 10px;
            border-radius: 50%;
            background: var(--gray-mid);
        }
        .state-card.s-active .s-badge { background: var(--blue); box-shadow: 0 0 6px var(--blue); }
        .state-card.s-error  .s-badge { background: var(--red); box-shadow: 0 0 6px var(--red); }
        .state-detail {
            display: none;
            margin-top: 12px;
            font-size: 0.83rem;
            border-top: 1px solid var(--gray-mid);
            padding-top: 10px;
            color: var(--text);
        }
        .state-card.open .state-detail { display: block; }

        /* ‚îÄ‚îÄ‚îÄ IMAP vs POP3 COMPARE ‚îÄ‚îÄ‚îÄ */
        .compare-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.88rem;
        }
        .compare-table th {
            padding: 12px 16px;
            text-align: center;
            font-family: var(--display);
            font-weight: 700;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        .compare-table th.h-feature { background: #1a2040; color: white; }
        .compare-table th.h-imap    { background: var(--blue); color: white; }
        .compare-table th.h-pop3    { background: var(--red);  color: white; }
        .compare-table td {
            padding: 10px 16px;
            border-bottom: 1px solid var(--gray-light);
            vertical-align: top;
        }
        .compare-table td:nth-child(1) { font-weight: 600; color: var(--gray-dark); width: 30%; }
        .compare-table td:nth-child(2) { color: #003399; width: 35%; }
        .compare-table td:nth-child(3) { color: var(--red);  width: 35%; }
        .compare-table tr:nth-child(even) td { background: var(--offwhite); }
        .win  { color: #006600; font-weight: 600; }
        .lose { color: #aa0000; }

        /* ‚îÄ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ‚îÄ */
        .quiz-q {
            background: var(--offwhite);
            border: 1px solid var(--gray-light);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 16px;
        }
        .quiz-q .q-text {
            font-weight: 600;
            margin-bottom: 14px;
            color: var(--blue);
            font-size: 0.95rem;
        }
        .quiz-option {
            display: block;
            padding: 10px 16px;
            margin-bottom: 8px;
            border: 2px solid var(--gray-mid);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.18s;
            font-size: 0.88rem;
            background: white;
        }
        .quiz-option:hover { border-color: var(--blue-mid); background: var(--blue-pale); }
        .quiz-option.correct { border-color: #00aa55; background: #e8fff4; color: #004422; }
        .quiz-option.wrong   { border-color: var(--red); background: var(--red-pale); color: #880000; }
        .quiz-feedback { margin-top: 10px; font-size: 0.84rem; font-weight: 500; display: none; }
        .quiz-feedback.show { display: block; }
        .quiz-score-box {
            background: var(--blue);
            color: white;
            border-radius: 10px;
            padding: 24px;
            text-align: center;
            display: none;
        }
        .quiz-score-box.show { display: block; }
        .quiz-score-box .big-score { font-family: var(--mono); font-size: 3rem; }
        .quiz-score-box p { opacity: 0.85; margin-top: 6px; }

        /* ‚îÄ‚îÄ‚îÄ MAILBOX EXPLORER ‚îÄ‚îÄ‚îÄ */
        .mailbox-layout {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 0;
            border: 1px solid var(--gray-mid);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            min-height: 340px;
        }
        .mailbox-sidebar {
            background: #0d1840;
            color: white;
            padding: 12px 0;
        }
        .mailbox-sidebar .sb-header {
            font-family: var(--display);
            font-size: 0.72rem;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            opacity: 0.5;
            padding: 0 14px 8px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            margin-bottom: 6px;
        }
        .mb-folder {
            padding: 9px 14px;
            cursor: pointer;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.15s;
            border-left: 3px solid transparent;
        }
        .mb-folder:hover { background: rgba(255,255,255,0.07); }
        .mb-folder.active { background: rgba(0,85,204,0.4); border-left-color: var(--blue-light); }
        .mb-folder .cnt {
            margin-left: auto;
            background: var(--red);
            color: white;
            font-size: 0.68rem;
            border-radius: 10px;
            padding: 1px 6px;
            font-family: var(--mono);
        }
        .mailbox-main { background: white; display: flex; flex-direction: column; }
        .mb-toolbar {
            background: var(--gray-light);
            padding: 8px 14px;
            display: flex;
            gap: 8px;
            border-bottom: 1px solid var(--gray-mid);
        }
        .mb-tbtn {
            background: white;
            border: 1px solid var(--gray-mid);
            border-radius: 5px;
            padding: 4px 10px;
            font-size: 0.78rem;
            cursor: pointer;
            font-family: var(--body);
            transition: all 0.15s;
        }
        .mb-tbtn:hover { background: var(--blue); color: white; border-color: var(--blue); }
        .mb-tbtn.danger:hover { background: var(--red); border-color: var(--red); }
        .email-list { flex: 1; overflow-y: auto; }
        .email-row {
            padding: 10px 14px;
            border-bottom: 1px solid var(--gray-light);
            cursor: pointer;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 10px;
            align-items: center;
            transition: background 0.15s;
            font-size: 0.85rem;
        }
        .email-row:hover { background: var(--blue-pale); }
        .email-row.unread { font-weight: 600; }
        .email-row.selected { background: var(--blue-pale); border-left: 3px solid var(--blue); }
        .email-row .e-flag { width: 8px; height: 8px; border-radius: 50%; background: var(--blue); flex-shrink: 0; }
        .email-row .e-flag.read { background: transparent; border: 1px solid var(--gray-mid); }
        .email-row .e-from { font-weight: inherit; }
        .email-row .e-subject { font-size: 0.8rem; color: var(--gray-dark); font-weight: 300; }
        .email-row .e-time { font-family: var(--mono); font-size: 0.72rem; color: var(--gray-dark); }
        .mb-imap-note {
            background: var(--blue-pale);
            border-top: 1px solid #c0d0ff;
            padding: 8px 14px;
            font-size: 0.78rem;
            color: var(--blue-mid);
            font-family: var(--mono);
        }

        /* ‚îÄ‚îÄ‚îÄ SECTION TITLE ‚îÄ‚îÄ‚îÄ */
        .section-title {
            font-family: var(--display);
            font-size: 1.7rem;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 6px;
            letter-spacing: 0.5px;
        }
        .section-title span { color: var(--red); }
        .section-sub { color: var(--gray-dark); font-size: 0.9rem; margin-bottom: 20px; }

        /* ‚îÄ‚îÄ‚îÄ INFO CALLOUT ‚îÄ‚îÄ‚îÄ */
        .callout {
            border-radius: 8px;
            padding: 14px 18px;
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
            font-size: 0.88rem;
        }
        .callout.info { background: var(--blue-pale); border: 1px solid #aabfff; }
        .callout.warn { background: var(--red-pale);  border: 1px solid #ffaaaa; }
        .callout .icon { font-size: 1.2rem; flex-shrink: 0; }

        /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
        footer {
            background: #0d1128;
            color: rgba(255,255,255,0.55);
            text-align: center;
            padding: 20px;
            font-size: 0.8rem;
            font-family: var(--mono);
            margin-top: 40px;
        }
        footer span { color: var(--blue-light); }

        /* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
        @media (max-width: 640px) {
            .header-text h1 { font-size: 1.8rem; }
            .overview-grid { grid-template-columns: 1fr 1fr; }
            .mailbox-layout { grid-template-columns: 1fr; }
            .mailbox-sidebar { display: none; }
        }
    </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header>
    <div class="header-inner">
        <div class="header-grid">
            <div class="header-icon">üì¨</div>
            <div class="header-text">
                <h1><span>IMAP</span> Protocol</h1>
                <p>Internet Message Access Protocol &nbsp;¬∑&nbsp; RFC 3501 &nbsp;¬∑&nbsp; Interactive Learning Module</p>
            </div>
        </div>
        <div class="badge-row">
            <span class="badge">PORT 143</span>
            <span class="badge red">IMAPS: 993</span>
            <span class="badge">Application Layer</span>
            <span class="badge">RFC 3501</span>
            <span class="badge">Server-Side Storage</span>
        </div>
    </div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="nav-bar">
    <div class="nav-inner">
        <div class="nav-tab active" onclick="showSection('overview')">Overview</div>
        <div class="nav-tab" onclick="showSection('commands')">Commands</div>
        <div class="nav-tab" onclick="showSection('simulator')">Simulator</div>
        <div class="nav-tab" onclick="showSection('states')">States</div>
        <div class="nav-tab" onclick="showSection('mailbox')">Mailbox Demo</div>
        <div class="nav-tab" onclick="showSection('compare')">IMAP vs POP3</div>
        <div class="nav-tab" onclick="showSection('quiz')">Quiz</div>
    </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<main>

    <!-- ‚îÄ‚îÄ OVERVIEW ‚îÄ‚îÄ -->
    <section id="overview" class="section active">
        <div class="section-title">What is <span>IMAP</span>?</div>
        <p class="section-sub">Internet Message Access Protocol ‚Äî the standard for reading email while keeping messages on the server.</p>

        <div class="overview-grid">
            <div class="stat-box"><div class="val">143</div><div class="lbl">Standard Port</div></div>
            <div class="stat-box red-box"><div class="val">993</div><div class="lbl">IMAPS (TLS/SSL)</div></div>
            <div class="stat-box"><div class="val">3501</div><div class="lbl">Defining RFC</div></div>
            <div class="stat-box"><div class="val">1988</div><div class="lbl">Year Introduced</div></div>
        </div>

        <div class="diagram-container">
            <div style="font-family:var(--display);font-weight:700;color:var(--blue);margin-bottom:20px;font-size:1rem;text-align:center;letter-spacing:1px;text-transform:uppercase;">IMAP Architecture Flow</div>
            <div class="diagram">
                <div class="diag-box client">üì± Email Client<small>Thunderbird / Outlook</small></div>
                <div class="diag-arrow">
                    <span class="label">IMAP cmds (143)</span>
                    <div class="line"><div class="shaft"></div><div class="head">‚ñ∂</div></div>
                </div>
                <div class="diag-box server">üñ• IMAP Server<small>mail.server.com</small></div>
                <div class="diag-arrow red-arr">
                    <span class="label">Responses</span>
                    <div class="line"><div class="shaft"></div><div class="head">‚ñ∂</div></div>
                </div>
                <div class="diag-box cloud">‚òÅ Mail Store<small>Messages stay here</small></div>
                <div class="diag-arrow">
                    <span class="label">SMTP delivery</span>
                    <div class="line"><div class="shaft"></div><div class="head">‚ñ∂</div></div>
                </div>
                <div class="diag-box mail">‚úâ MTA<small>Mail Transfer Agent</small></div>
            </div>
        </div>

        <div class="callout info">
            <span class="icon">‚ÑπÔ∏è</span>
            <div><strong>Key Concept:</strong> Unlike POP3 which downloads and often deletes messages, IMAP leaves all messages <em>on the server</em>. Your client merely views and manages them remotely, enabling multi-device access to the same mailbox.</div>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
            <div class="card card-blue">
                <h3>üîµ IMAP Advantages</h3>
                <ul style="font-size:0.88rem;padding-left:18px;line-height:2;">
                    <li>Messages stored on server ‚Äî access from any device</li>
                    <li>Folder management on the server</li>
                    <li>Supports partial message fetch (just headers)</li>
                    <li>Flags: Seen, Answered, Flagged, Deleted, Draft</li>
                    <li>Server-side search capabilities</li>
                    <li>Multiple simultaneous connections</li>
                </ul>
            </div>
            <div class="card card-red">
                <h3>üî¥ IMAP Considerations</h3>
                <ul style="font-size:0.88rem;padding-left:18px;line-height:2;">
                    <li>Requires persistent internet connection</li>
                    <li>Consumes server storage space</li>
                    <li>More complex protocol than POP3</li>
                    <li>Port 143 (unencrypted) ‚Äî always use port 993</li>
                    <li>Higher server resource usage</li>
                    <li>Misconfigured IDLE can drain battery</li>
                </ul>
            </div>
        </div>

        <div class="card" style="margin-top:4px;">
            <h2>IMAP Message Flags</h2>
            <p style="font-size:0.88rem;margin-bottom:14px;color:var(--gray-dark);">IMAP tracks message state using server-side flags. These persist across all devices.</p>
            <div style="display:flex;flex-wrap:wrap;gap:10px;">
                <div style="background:var(--blue);color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Seen</div>
                <div style="background:#5500aa;color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Answered</div>
                <div style="background:var(--red);color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Flagged</div>
                <div style="background:#aa5500;color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Deleted</div>
                <div style="background:#006644;color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Draft</div>
                <div style="background:#2255aa;color:white;border-radius:6px;padding:8px 14px;font-family:var(--mono);font-size:0.8rem;">\\Recent</div>
            </div>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ COMMANDS ‚îÄ‚îÄ -->
    <section id="commands" class="section">
        <div class="section-title">IMAP <span>Commands</span></div>
        <p class="section-sub">IMAP uses tagged commands ‚Äî each command is prefixed with a unique tag (A001, A002‚Ä¶) so responses can be matched to requests.</p>

        <div class="callout info">
            <span class="icon">üè∑Ô∏è</span>
            <div><strong>Tagged Commands:</strong> Every IMAP command begins with a client-generated tag (e.g., <code style="font-family:var(--mono);background:#dce8ff;padding:2px 6px;border-radius:3px;">A001 LOGIN user@example.com mypassword</code>). The server response includes the same tag to confirm completion.</div>
        </div>

        <table class="cmd-table">
            <thead>
                <tr>
                    <th>Command</th>
                    <th>State Required</th>
                    <th>Description</th>
                    <th>Example Response</th>
                </tr>
            </thead>
            <tbody>
                <tr><td><span class="cmd-tag">CAPABILITY</span></td><td>Any</td><td>List server capabilities and extensions supported</td><td><span class="resp-ok">* CAPABILITY IMAP4rev1 STARTTLS AUTH=PLAIN</span></td></tr>
                <tr><td><span class="cmd-tag">STARTTLS</span></td><td>Not Auth</td><td>Upgrade connection to TLS encryption</td><td><span class="resp-ok">A001 OK Begin TLS negotiation</span></td></tr>
                <tr><td><span class="cmd-tag">LOGIN</span></td><td>Not Auth</td><td>Authenticate with username and password</td><td><span class="resp-ok">A001 OK LOGIN completed</span></td></tr>
                <tr><td><span class="cmd-tag">AUTHENTICATE</span></td><td>Not Auth</td><td>Authenticate via SASL mechanism (e.g., OAUTH2)</td><td><span class="resp-ok">A001 OK AUTHENTICATE completed</span></td></tr>
                <tr><td><span class="cmd-tag">SELECT</span></td><td>Authenticated</td><td>Open a mailbox for read/write access</td><td><span class="resp-ok">* 12 EXISTS &nbsp;* 2 RECENT</span></td></tr>
                <tr><td><span class="cmd-tag">EXAMINE</span></td><td>Authenticated</td><td>Open a mailbox for read-only access</td><td><span class="resp-ok">A002 OK [READ-ONLY] EXAMINE completed</span></td></tr>
                <tr><td><span class="cmd-tag">LIST</span></td><td>Authenticated</td><td>List available mailboxes / folders</td><td><span class="resp-ok">* LIST (\HasNoChildren) "." INBOX</span></td></tr>
                <tr><td><span class="cmd-tag">LSUB</span></td><td>Authenticated</td><td>List subscribed mailboxes</td><td><span class="resp-ok">* LSUB () "." "INBOX.Sent"</span></td></tr>
                <tr><td><span class="cmd-tag">CREATE</span></td><td>Authenticated</td><td>Create a new mailbox/folder on the server</td><td><span class="resp-ok">A003 OK CREATE completed</span></td></tr>
                <tr><td><span class="cmd-tag">DELETE</span></td><td>Authenticated</td><td>Delete an existing mailbox</td><td><span class="resp-ok">A004 OK DELETE completed</span></td></tr>
                <tr><td><span class="cmd-tag">RENAME</span></td><td>Authenticated</td><td>Rename a mailbox</td><td><span class="resp-ok">A005 OK RENAME completed</span></td></tr>
                <tr><td><span class="cmd-tag">STATUS</span></td><td>Authenticated</td><td>Query mailbox status (messages, unseen count)</td><td><span class="resp-ok">* STATUS INBOX (MESSAGES 12 UNSEEN 3)</span></td></tr>
                <tr><td><span class="cmd-tag">FETCH</span></td><td>Selected</td><td>Retrieve message data (headers, body, flags)</td><td><span class="resp-ok">* 1 FETCH (FLAGS (\Seen) BODY[TEXT] {42})</span></td></tr>
                <tr><td><span class="cmd-tag">SEARCH</span></td><td>Selected</td><td>Search messages matching criteria on the server</td><td><span class="resp-ok">* SEARCH 2 5 9</span></td></tr>
                <tr><td><span class="cmd-tag">STORE</span></td><td>Selected</td><td>Modify message flags (e.g., mark as read)</td><td><span class="resp-ok">* 1 FETCH (FLAGS (\Seen \Flagged))</span></td></tr>
                <tr><td><span class="cmd-tag">COPY</span></td><td>Selected</td><td>Copy messages to another mailbox</td><td><span class="resp-ok">A006 OK COPY completed</span></td></tr>
                <tr><td><span class="cmd-tag">MOVE</span></td><td>Selected</td><td>Move messages to another mailbox (RFC 6851)</td><td><span class="resp-ok">A007 OK MOVE completed</span></td></tr>
                <tr><td><span class="cmd-tag red">EXPUNGE</span></td><td>Selected</td><td>Permanently remove messages marked \\Deleted</td><td><span class="resp-ok">* 3 EXPUNGE &nbsp;A008 OK EXPUNGE completed</span></td></tr>
                <tr><td><span class="cmd-tag">IDLE</span></td><td>Selected</td><td>Server push ‚Äî get notified of new mail without polling</td><td><span class="resp-ok">+ idling &nbsp;(until "DONE" sent)</span></td></tr>
                <tr><td><span class="cmd-tag">NOOP</span></td><td>Any</td><td>No operation ‚Äî keep connection alive, get updates</td><td><span class="resp-ok">A009 OK NOOP completed</span></td></tr>
                <tr><td><span class="cmd-tag red">CLOSE</span></td><td>Selected</td><td>Close mailbox, silently expunge \\Deleted messages</td><td><span class="resp-ok">A010 OK CLOSE completed</span></td></tr>
                <tr><td><span class="cmd-tag red">LOGOUT</span></td><td>Any</td><td>End IMAP session and disconnect from server</td><td><span class="resp-ok">* BYE IMAP4rev1 Server logging out &nbsp;A011 OK LOGOUT completed</span></td></tr>
            </tbody>
        </table>

        <div class="callout warn">
            <span class="icon">‚ö†Ô∏è</span>
            <div><strong>Security Note:</strong> Never use plain LOGIN over port 143 in production ‚Äî always enforce STARTTLS or use IMAPS on port 993. Plain-text credentials are trivially captured by network sniffers.</div>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ SIMULATOR ‚îÄ‚îÄ -->
    <section id="simulator" class="section">
        <div class="section-title">Protocol <span>Simulator</span></div>
        <p class="section-sub">Step through an IMAP session interactively. Blue = server responses. Red = client commands.</p>

        <div class="sim-controls">
            <button class="sim-btn blue" onclick="runScenario('login')">‚ñ∂ Login Session</button>
            <button class="sim-btn blue" onclick="runScenario('fetch')">üì® Fetch Messages</button>
            <button class="sim-btn blue" onclick="runScenario('search')">üîç Search Mail</button>
            <button class="sim-btn blue" onclick="runScenario('flags')">üö© Set Flags</button>
            <button class="sim-btn blue" onclick="runScenario('folder')">üìÅ Manage Folders</button>
            <button class="sim-btn blue" onclick="runScenario('idle')">‚ö° IDLE Push</button>
            <button class="sim-btn red"  onclick="runScenario('logout')">‚úñ Logout</button>
            <button class="sim-btn gray" onclick="clearTerminal()">‚¨õ Clear</button>
        </div>

        <div class="terminal-wrap">
            <div class="terminal-bar">
                <div class="dots">
                    <span class="dot-red"></span>
                    <span class="dot-yellow"></span>
                    <span class="dot-green"></span>
                </div>
                <span class="title">imap-session ‚Äî mail.example.com:143</span>
            </div>
            <div class="terminal-body" id="terminal">
                <span class="t-comment"># Select a scenario above to begin IMAP simulation</span><br>
                <span class="t-comment"># Blue = server &nbsp;&nbsp; Red = client commands</span><br>
            </div>
        </div>
        <div id="sim-explain" class="card card-blue" style="display:none;">
            <h3 id="sim-explain-title">Explanation</h3>
            <p id="sim-explain-body" style="font-size:0.88rem;"></p>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ STATES ‚îÄ‚îÄ -->
    <section id="states" class="section">
        <div class="section-title">Connection <span>States</span></div>
        <p class="section-sub">IMAP defines four distinct connection states. Commands are only valid in certain states. Click each state to learn more.</p>

        <div class="state-grid">
            <div class="state-card" onclick="toggleState(this)">
                <div class="s-badge"></div>
                <div class="s-name">Not Authenticated</div>
                <div class="s-desc">Initial state after TCP connection. Client must authenticate before accessing mail.</div>
                <div class="state-detail">
                    <strong>Valid commands:</strong> CAPABILITY, NOOP, AUTHENTICATE, LOGIN, STARTTLS, LOGOUT<br><br>
                    <strong>Entry point:</strong> Server sends greeting:<br>
                    <code style="font-family:var(--mono);font-size:0.8rem;color:var(--blue);">* OK IMAP4rev1 Service Ready</code><br><br>
                    <strong>Exit:</strong> Successful LOGIN or AUTHENTICATE ‚Üí Authenticated state
                </div>
            </div>
            <div class="state-card s-active" onclick="toggleState(this)">
                <div class="s-badge"></div>
                <div class="s-name">Authenticated</div>
                <div class="s-desc">User is logged in. Can manage mailboxes but has not opened one yet.</div>
                <div class="state-detail">
                    <strong>Valid commands:</strong> All Not-Auth commands plus SELECT, EXAMINE, CREATE, DELETE, RENAME, LIST, LSUB, STATUS, SUBSCRIBE, UNSUBSCRIBE, APPEND<br><br>
                    <strong>Exit:</strong> SELECT or EXAMINE ‚Üí Selected state &nbsp;|&nbsp; LOGOUT ‚Üí Logout state
                </div>
            </div>
            <div class="state-card s-active" onclick="toggleState(this)">
                <div class="s-badge"></div>
                <div class="s-name">Selected</div>
                <div class="s-desc">A mailbox is open. Full access to messages ‚Äî read, write, search, fetch.</div>
                <div class="state-detail">
                    <strong>Valid commands:</strong> All Authenticated commands plus CHECK, CLOSE, EXPUNGE, SEARCH, FETCH, STORE, COPY, MOVE, IDLE, UID commands<br><br>
                    <strong>Server sends unilateral responses:</strong> EXISTS, RECENT, EXPUNGE, FETCH<br><br>
                    <strong>Exit:</strong> SELECT/EXAMINE ‚Üí new Selected &nbsp;|&nbsp; CLOSE ‚Üí Authenticated &nbsp;|&nbsp; LOGOUT ‚Üí Logout
                </div>
            </div>
            <div class="state-card s-error" onclick="toggleState(this)">
                <div class="s-badge"></div>
                <div class="s-name">Logout</div>
                <div class="s-desc">Session is terminating. Server sends BYE and closes TCP connection.</div>
                <div class="state-detail">
                    <strong>Trigger:</strong> LOGOUT command, server-side timeout, or network error<br><br>
                    <strong>Server response:</strong><br>
                    <code style="font-family:var(--mono);font-size:0.8rem;color:#ff8888;">* BYE IMAP4rev1 Server logging out<br>A011 OK LOGOUT completed</code><br><br>
                    <strong>Client must:</strong> Close the TCP connection after receiving BYE
                </div>
            </div>
        </div>

        <div class="card">
            <h2>State Transition Diagram</h2>
            <div style="font-family:var(--mono);font-size:0.82rem;line-height:2.2;padding:10px;background:var(--offwhite);border-radius:8px;color:var(--text);">
                <span style="color:var(--gray-dark);">[TCP Connect]</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;‚Üì Server greeting: <span style="color:var(--blue);">* OK IMAP4rev1 Ready</span><br>
                <span style="color:#884400;font-weight:600;">NOT AUTHENTICATED</span> ‚îÄ‚îÄ(<span style="color:var(--red);">LOGIN / AUTHENTICATE</span>)‚îÄ‚îÄ‚Üí <span style="color:var(--blue);font-weight:600;">AUTHENTICATED</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì SELECT / EXAMINE<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:var(--blue);font-weight:600;">SELECTED</span> ‚Üê‚Üí FETCH/STORE/SEARCH<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì LOGOUT (from any state)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:var(--red);font-weight:600;">LOGOUT</span> ‚Üí TCP Close
            </div>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ MAILBOX DEMO ‚îÄ‚îÄ -->
    <section id="mailbox" class="section">
        <div class="section-title">Mailbox <span>Explorer</span></div>
        <p class="section-sub">Simulate IMAP's server-side folder management. Messages stay on the server ‚Äî this is the key difference from POP3.</p>

        <div class="mailbox-layout">
            <div class="mailbox-sidebar">
                <div class="sb-header">Folders</div>
                <div class="mb-folder active" onclick="selectFolder(this,'INBOX',3)">üì• INBOX <span class="cnt">3</span></div>
                <div class="mb-folder" onclick="selectFolder(this,'Sent',0)">üì§ Sent</div>
                <div class="mb-folder" onclick="selectFolder(this,'Drafts',1)">üìù Drafts <span class="cnt">1</span></div>
                <div class="mb-folder" onclick="selectFolder(this,'Spam',7)">üö´ Spam <span class="cnt">7</span></div>
                <div class="mb-folder" onclick="selectFolder(this,'Trash',0)">üóë Trash</div>
                <div class="mb-folder" onclick="selectFolder(this,'Work',2)">üíº Work <span class="cnt">2</span></div>
                <div class="mb-folder" onclick="selectFolder(this,'Archive',0)">üóÑ Archive</div>
            </div>
            <div class="mailbox-main">
                <div class="mb-toolbar">
                    <button class="mb-tbtn" onclick="mbAction('refresh')">üîÑ Refresh</button>
                    <button class="mb-tbtn" onclick="mbAction('mark')">‚úî Mark Read</button>
                    <button class="mb-tbtn danger" onclick="mbAction('delete')">üóë Delete</button>
                    <button class="mb-tbtn" onclick="mbAction('move')">üìÅ Move</button>
                    <span style="margin-left:auto;font-family:var(--mono);font-size:0.75rem;color:var(--gray-dark);">IMAP: <span id="mb-cmd-display">A001 SELECT INBOX</span></span>
                </div>
                <div class="email-list" id="email-list">
                    <!-- populated by JS -->
                </div>
                <div class="mb-imap-note" id="mb-imap-note">
                    üí° Messages remain on the server. IMAP just shows you a view ‚Äî your phone and laptop see the same mailbox.
                </div>
            </div>
        </div>

        <div class="card card-blue" style="margin-top:4px;">
            <h3>What IMAP does behind the scenes</h3>
            <div id="mb-log" style="font-family:var(--mono);font-size:0.8rem;line-height:2;color:var(--text);margin-top:8px;background:var(--offwhite);padding:10px;border-radius:6px;">
                <span style="color:var(--blue);">* OK IMAP4rev1 Service Ready</span><br>
                <span style="color:var(--red);">A001 LOGIN user@mvcc.edu ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span><br>
                <span style="color:var(--blue);">A001 OK LOGIN completed</span><br>
                <span style="color:var(--red);">A002 SELECT INBOX</span><br>
                <span style="color:var(--blue);">* 12 EXISTS &nbsp;* 3 RECENT &nbsp;* OK [UNSEEN 10]</span><br>
                <span style="color:var(--blue);">A002 OK [READ-WRITE] SELECT completed</span><br>
            </div>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ COMPARE ‚îÄ‚îÄ -->
    <section id="compare" class="section">
        <div class="section-title">IMAP <span>vs</span> POP3</div>
        <p class="section-sub">Understanding when to use each protocol is fundamental to email system design.</p>

        <table class="compare-table">
            <thead>
                <tr>
                    <th class="h-feature">Feature</th>
                    <th class="h-imap">IMAP (Port 143/993)</th>
                    <th class="h-pop3">POP3 (Port 110/995)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Storage Location</td><td class="win">Server-side ‚Äî always</td><td class="lose">Downloaded to client (usually deleted from server)</td></tr>
                <tr><td>Multi-device Access</td><td class="win">‚úî All devices see same mailbox</td><td class="lose">‚úò Downloaded messages only on one device</td></tr>
                <tr><td>Folder Management</td><td class="win">Server-side folders synced across devices</td><td class="lose">Local folders only (client-side)</td></tr>
                <tr><td>Offline Access</td><td>Requires sync / cache setup</td><td class="win">Full offline access after download</td></tr>
                <tr><td>Server Storage Required</td><td>High ‚Äî all messages stored indefinitely</td><td class="win">Low ‚Äî messages deleted after download</td></tr>
                <tr><td>Protocol Complexity</td><td>Complex ‚Äî 22+ commands, 4 states, tags</td><td class="win">Simple ‚Äî ~12 commands, 2 states</td></tr>
                <tr><td>Bandwidth Usage</td><td class="win">Fetch only what you need (headers first)</td><td>Downloads entire messages always</td></tr>
                <tr><td>Message Flags / State</td><td class="win">Rich flags: Seen, Flagged, Answered, Draft</td><td class="lose">No flag support</td></tr>
                <tr><td>Server-Side Search</td><td class="win">‚úî SEARCH command on server</td><td class="lose">‚úò Client must download all to search</td></tr>
                <tr><td>Push Notifications</td><td class="win">‚úî IDLE command for instant new mail</td><td class="lose">‚úò Must poll (check periodically)</td></tr>
                <tr><td>Partial Message Fetch</td><td class="win">‚úî Fetch headers, body sections separately</td><td class="lose">‚úò Must download complete message</td></tr>
                <tr><td>RFC Standard</td><td>RFC 3501 (IMAP4rev1), RFC 9051 (IMAP4rev2)</td><td>RFC 1939</td></tr>
                <tr><td>Best Use Case</td><td class="win">Most modern email ‚Äî multiple devices</td><td>Single-device, limited server storage</td></tr>
            </tbody>
        </table>

        <div class="callout info" style="margin-top:16px;">
            <span class="icon">üí°</span>
            <div><strong>Rule of thumb:</strong> IMAP is almost always the right choice for modern email deployments. POP3 may still be appropriate in bandwidth-constrained environments or where server storage is severely limited.</div>
        </div>
    </section>

    <!-- ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ -->
    <section id="quiz" class="section">
        <div class="section-title">Knowledge <span>Check</span></div>
        <p class="section-sub">Test your understanding of the IMAP protocol. Click an answer to receive immediate feedback.</p>

        <div id="quiz-container"></div>
        <div class="quiz-score-box" id="score-box">
            <div class="big-score" id="score-val">0/10</div>
            <p id="score-msg">Complete all questions to see your score.</p>
        </div>
        <div style="margin-top:16px;">
            <button class="sim-btn blue" onclick="resetQuiz()">üîÑ Retake Quiz</button>
        </div>
    </section>

</main>

<footer>
    <span>IMAP Protocol</span> Interactive Learning Module &nbsp;¬∑&nbsp; RFC 3501 &nbsp;¬∑&nbsp; Moraine Valley Community College &nbsp;¬∑&nbsp; Cybersecurity Program
</footer>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TERMINAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const scenarios = {
    login: {
        title: 'Login Session',
        explain: 'IMAP begins with a TCP connection to port 143. The server sends an untagged greeting. The client uses CAPABILITY to discover features, then sends a tagged LOGIN command. The server confirms with the same tag.',
        lines: [
            ['s', '* OK IMAP4rev1 Service Ready ‚Äî mail.example.com'],
            ['c', 'A001 CAPABILITY'],
            ['s', '* CAPABILITY IMAP4rev1 STARTTLS AUTH=PLAIN AUTH=LOGIN IDLE MOVE'],
            ['s', 'A001 OK CAPABILITY completed'],
            ['c', 'A002 STARTTLS'],
            ['s', 'A002 OK Begin TLS negotiation now'],
            ['x', '... TLS handshake completed ...'],
            ['c', 'A003 LOGIN john.smith@mvcc.edu MyS3cur3P@ss'],
            ['s', 'A003 OK [CAPABILITY IMAP4rev1 IDLE MOVE] LOGIN completed'],
        ]
    },
    fetch: {
        title: 'Fetch Messages',
        explain: 'After selecting a mailbox, IMAP uses the FETCH command to retrieve message data. You can fetch just headers (RFC822.HEADER) for efficiency, then fetch the full body only for messages the user opens.',
        lines: [
            ['c', 'A004 SELECT INBOX'],
            ['s', '* 12 EXISTS'],
            ['s', '* 3 RECENT'],
            ['s', '* OK [UNSEEN 10] Message 10 is first unseen'],
            ['s', '* OK [UIDVALIDITY 1234567890]'],
            ['s', 'A004 OK [READ-WRITE] SELECT completed'],
            ['c', 'A005 FETCH 1:3 (FLAGS RFC822.HEADER)'],
            ['s', '* 1 FETCH (FLAGS (\\Seen) RFC822.HEADER {245})'],
            ['s', 'From: alice@example.com'],
            ['s', 'Subject: IMAP Lab Assignment'],
            ['s', 'Date: Mon, 17 Feb 2026 09:00:00 -0600'],
            ['s', '* 2 FETCH (FLAGS (\\Recent) RFC822.HEADER {198})'],
            ['s', 'From: professor@mvcc.edu'],
            ['s', 'Subject: Midterm Review ‚Äî Networking Protocols'],
            ['s', '* 3 FETCH (FLAGS (\\Answered \\Seen) RFC822.HEADER {162})'],
            ['s', 'From: bob@example.com'],
            ['s', 'Subject: Re: Question about SMTP relay'],
            ['s', 'A005 OK FETCH completed'],
        ]
    },
    search: {
        title: 'Server-Side Search',
        explain: 'IMAP SEARCH runs on the server ‚Äî no need to download all messages. The server returns message sequence numbers matching the criteria. This is far more efficient than POP3 which requires full download.',
        lines: [
            ['c', 'A006 SEARCH UNSEEN'],
            ['s', '* SEARCH 2 4 7 9 10 11 12'],
            ['s', 'A006 OK SEARCH completed'],
            ['c', 'A007 SEARCH FROM "professor@mvcc.edu"'],
            ['s', '* SEARCH 2 6'],
            ['s', 'A007 OK SEARCH completed'],
            ['c', 'A008 SEARCH SINCE 10-Feb-2026 SUBJECT "IMAP"'],
            ['s', '* SEARCH 1 5'],
            ['s', 'A008 OK SEARCH completed'],
            ['c', 'A009 SEARCH LARGER 50000'],
            ['s', '* SEARCH 8 11'],
            ['s', 'A009 OK SEARCH completed'],
        ]
    },
    flags: {
        title: 'Setting Flags',
        explain: 'STORE modifies message flags on the server. Flags persist across all devices because they live on the server. +FLAGS adds, -FLAGS removes, FLAGS replaces. \\Seen marks as read; \\Deleted marks for eventual EXPUNGE.',
        lines: [
            ['c', 'A010 STORE 2 +FLAGS (\\Seen)'],
            ['s', '* 2 FETCH (FLAGS (\\Recent \\Seen))'],
            ['s', 'A010 OK STORE completed'],
            ['c', 'A011 STORE 5 +FLAGS (\\Flagged)'],
            ['s', '* 5 FETCH (FLAGS (\\Seen \\Flagged))'],
            ['s', 'A011 OK STORE completed'],
            ['c', 'A012 STORE 9 +FLAGS (\\Deleted)'],
            ['s', '* 9 FETCH (FLAGS (\\Seen \\Deleted))'],
            ['s', 'A012 OK STORE completed'],
            ['c', 'A013 EXPUNGE'],
            ['s', '* 9 EXPUNGE'],
            ['s', 'A013 OK EXPUNGE completed'],
        ]
    },
    folder: {
        title: 'Folder Management',
        explain: 'IMAP supports server-side folder creation, listing, and management. All folders are shared across devices because they live on the server ‚Äî unlike POP3 which has only local folders.',
        lines: [
            ['c', 'A014 LIST "" "*"'],
            ['s', '* LIST (\\HasNoChildren) "." INBOX'],
            ['s', '* LIST (\\HasNoChildren) "." INBOX.Sent'],
            ['s', '* LIST (\\HasNoChildren) "." INBOX.Drafts'],
            ['s', '* LIST (\\HasNoChildren) "." INBOX.Trash'],
            ['s', 'A014 OK LIST completed'],
            ['c', 'A015 CREATE "INBOX.Cybersecurity"'],
            ['s', 'A015 OK CREATE completed'],
            ['c', 'A016 COPY 1 "INBOX.Cybersecurity"'],
            ['s', 'A016 OK COPY completed'],
            ['c', 'A017 RENAME "INBOX.Cybersecurity" "INBOX.CyberLabs"'],
            ['s', 'A017 OK RENAME completed'],
        ]
    },
    idle: {
        title: 'IDLE ‚Äî Server Push',
        explain: 'IDLE allows the server to push new mail notifications to the client without polling. The client sends IDLE and waits; the server sends unilateral EXISTS/RECENT when mail arrives. Client sends DONE to exit.',
        lines: [
            ['c', 'A018 IDLE'],
            ['s', '+ idling'],
            ['x', '... client waits, server is watching for new mail ...'],
            ['s', '* 13 EXISTS'],
            ['s', '* 1 RECENT'],
            ['c', 'DONE'],
            ['s', 'A018 OK IDLE terminated'],
            ['c', 'A019 FETCH 13 (FLAGS RFC822.HEADER)'],
            ['s', '* 13 FETCH (FLAGS (\\Recent)) RFC822.HEADER {210}'],
            ['s', 'From: noc@mvcc.edu'],
            ['s', 'Subject: [ALERT] Firewall Rule Change Deployed'],
            ['s', 'A019 OK FETCH completed'],
        ]
    },
    logout: {
        title: 'Logout Session',
        explain: 'LOGOUT terminates the session. The server sends an untagged BYE explaining the logout, then a tagged OK confirming the LOGOUT command. The TCP connection is then closed.',
        lines: [
            ['c', 'A020 CLOSE'],
            ['s', 'A020 OK CLOSE completed (messages expunged)'],
            ['c', 'A021 LOGOUT'],
            ['s', '* BYE IMAP4rev1 Server logging out'],
            ['s', 'A021 OK LOGOUT completed'],
            ['x', '... TCP connection closed ...'],
        ]
    }
};

let terminalQueue = null;

function clearTerminal() {
    clearTimeout(terminalQueue);
    document.getElementById('terminal').innerHTML =
        '<span class="t-comment"># Terminal cleared. Select a scenario to begin.</span><br>';
    document.getElementById('sim-explain').style.display = 'none';
}

function runScenario(key) {
    clearTimeout(terminalQueue);
    const s = scenarios[key];
    const term = document.getElementById('terminal');
    term.innerHTML = `<span class="t-comment"># Scenario: ${s.title}</span><br><span class="t-comment"># ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><br>`;

    const explainEl = document.getElementById('sim-explain');
    document.getElementById('sim-explain-title').textContent = s.title + ' ‚Äî Explanation';
    document.getElementById('sim-explain-body').textContent = s.explain;
    explainEl.style.display = 'block';

    let i = 0;
    function printLine() {
        if (i >= s.lines.length) return;
        const [type, text] = s.lines[i++];
        let cls = type === 's' ? 't-server' : type === 'c' ? 't-client' : 't-comment';
        let prefix = type === 's' ? 'S: ' : type === 'c' ? 'C: ' : '   ';
        term.innerHTML += `<span class="${cls}">${prefix}${text}</span><br>`;
        term.scrollTop = term.scrollHeight;
        terminalQueue = setTimeout(printLine, 280);
    }
    printLine();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STATE TOGGLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toggleState(el) {
    el.classList.toggle('open');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAILBOX DEMO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const mailboxData = {
    INBOX: [
        { from: 'alice@example.com', subject: 'IMAP Lab Assignment', time: '9:02 AM', read: false },
        { from: 'professor@mvcc.edu', subject: 'Midterm Review ‚Äî Networking Protocols', time: '8:45 AM', read: false },
        { from: 'bob@example.com', subject: 'Re: Question about SMTP relay', time: 'Yesterday', read: true },
        { from: 'noc@mvcc.edu', subject: '[ALERT] Firewall Rule Change', time: 'Yesterday', read: false },
        { from: 'admin@mvcc.edu', subject: 'Lab Portal Maintenance Window', time: 'Mon', read: true },
    ],
    Sent: [
        { from: 'me ‚Üí alice@example.com', subject: 'Re: IMAP Lab Assignment', time: '9:15 AM', read: true },
        { from: 'me ‚Üí bob@example.com', subject: 'Question about SMTP relay', time: 'Yesterday', read: true },
    ],
    Drafts: [
        { from: '(Draft)', subject: 'Project Proposal ‚Äî Network Protocol Analysis', time: 'Mon', read: true },
    ],
    Spam: [
        { from: 'promo@deals.io', subject: 'You won a prize!!!', time: '11:00 AM', read: false },
        { from: 'noreply@phish.net', subject: 'Urgent: Account Verification Required', time: '10:22 AM', read: false },
    ],
    Trash: [],
    Work: [
        { from: 'hr@mvcc.edu', subject: 'Faculty Meeting ‚Äî Feb 20 2026', time: 'Mon', read: false },
        { from: 'grants@nsf.gov', subject: 'NSF ATE Grant Quarterly Report', time: 'Sun', read: false },
    ],
    Archive: []
};

let currentFolder = 'INBOX';

function selectFolder(el, name, cnt) {
    document.querySelectorAll('.mb-folder').forEach(f => f.classList.remove('active'));
    el.classList.add('active');
    currentFolder = name;
    const cmd = `A0${Math.floor(Math.random()*90+10)} SELECT ${name}`;
    document.getElementById('mb-cmd-display').textContent = cmd;
    renderEmails(name);
    const msgs = mailboxData[name] || [];
    document.getElementById('mb-log').innerHTML =
        `<span style="color:var(--red);">${cmd}</span><br>` +
        `<span style="color:var(--blue);">* ${msgs.length} EXISTS</span><br>` +
        `<span style="color:var(--blue);">* ${cnt} RECENT</span><br>` +
        `<span style="color:var(--blue);">A0${Math.floor(Math.random()*90+10)} OK [READ-WRITE] SELECT completed</span>`;
}

function renderEmails(folder) {
    const list = document.getElementById('email-list');
    const msgs = mailboxData[folder] || [];
    if (msgs.length === 0) {
        list.innerHTML = '<div style="padding:30px;text-align:center;color:var(--gray-dark);font-size:0.88rem;">No messages in this folder.</div>';
        return;
    }
    list.innerHTML = msgs.map((m,i) => `
        <div class="email-row${m.read?'':' unread'}" onclick="selectEmail(this,${i},'${folder}')">
            <span class="e-flag${m.read?' read':''}"></span>
            <div>
                <div class="e-from">${m.from}</div>
                <div class="e-subject">${m.subject}</div>
            </div>
            <div class="e-time">${m.time}</div>
        </div>
    `).join('');
}

function selectEmail(el, idx, folder) {
    document.querySelectorAll('.email-row').forEach(r => r.classList.remove('selected'));
    el.classList.add('selected');
    const msgs = mailboxData[folder];
    msgs[idx].read = true;
    el.classList.remove('unread');
    el.querySelector('.e-flag').classList.add('read');
    const n = idx + 1;
    const cmd = `A0${Math.floor(Math.random()*90+10)} FETCH ${n} (FLAGS BODY[])`;
    document.getElementById('mb-cmd-display').textContent = cmd;
    document.getElementById('mb-log').innerHTML =
        `<span style="color:var(--red);">${cmd}</span><br>` +
        `<span style="color:var(--blue);">* ${n} FETCH (FLAGS (\\Seen) BODY[] {1024})</span><br>` +
        `<span style="color:var(--blue);">From: ${msgs[idx].from}</span><br>` +
        `<span style="color:var(--blue);">Subject: ${msgs[idx].subject}</span><br>` +
        `<span style="color:var(--blue);">Date: Mon, 17 Feb 2026</span><br>` +
        `<span style="color:var(--blue);">A0${Math.floor(Math.random()*90+10)} OK FETCH completed</span>`;
}

function mbAction(action) {
    const cmds = {
        refresh: `A0${Math.floor(Math.random()*90+10)} NOOP`,
        mark: `A0${Math.floor(Math.random()*90+10)} STORE 1:* +FLAGS (\\Seen)`,
        delete: `A0${Math.floor(Math.random()*90+10)} STORE 1 +FLAGS (\\Deleted)`,
        move: `A0${Math.floor(Math.random()*90+10)} MOVE 1 "INBOX.Archive"`,
    };
    document.getElementById('mb-cmd-display').textContent = cmds[action];
}

// init mailbox
renderEmails('INBOX');

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê QUIZ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const questions = [
    {
        q: 'What port does standard (unencrypted) IMAP use?',
        opts: ['110','143','25','993'],
        ans: 1,
        explain: 'IMAP uses port 143 for standard connections. Port 993 is IMAPS (IMAP over SSL/TLS). Port 110 is POP3 and port 25 is SMTP.'
    },
    {
        q: 'How does IMAP differ from POP3 in terms of message storage?',
        opts: ['IMAP deletes messages from the server after download','IMAP stores all messages locally on the client','IMAP keeps messages on the server; clients access them remotely','IMAP and POP3 both store messages on the server'],
        ans: 2,
        explain: 'IMAP stores messages on the server permanently (by default). Clients access and manage them remotely, enabling multi-device synchronization.'
    },
    {
        q: 'Which IMAP command permanently removes messages marked \\Deleted?',
        opts: ['DELETE','REMOVE','EXPUNGE','PURGE'],
        ans: 2,
        explain: 'EXPUNGE permanently removes all messages with the \\Deleted flag from the selected mailbox. Messages are only marked with STORE +FLAGS (\\Deleted) first.'
    },
    {
        q: 'What is the purpose of the IDLE command in IMAP?',
        opts: ['To keep the connection alive with a keepalive ping','To allow the server to push new mail notifications without polling','To pause message delivery','To idle the CPU when there is no mail'],
        ans: 1,
        explain: 'IDLE enables server push notifications. The client enters an IDLE state and the server sends unilateral updates (EXISTS, RECENT) when new mail arrives.'
    },
    {
        q: 'In IMAP, what distinguishes client commands from each other?',
        opts: ['Commands are numbered sequentially 1, 2, 3‚Ä¶','Each command has a unique client-generated tag prefix (e.g., A001)','Commands are differentiated by port number','No distinction ‚Äî servers process them in order'],
        ans: 1,
        explain: 'IMAP uses client-generated tags (like A001, A002) to match each response to its command. This allows pipelining of multiple simultaneous requests.'
    },
    {
        q: 'Which flag marks a message for deletion but does NOT immediately remove it?',
        opts: ['\\Recent','\\Seen','\\Answered','\\Deleted'],
        ans: 3,
        explain: '\\Deleted marks a message for deletion. The message is only permanently removed when EXPUNGE (or CLOSE) is called. This two-step approach prevents accidental deletion.'
    },
    {
        q: 'What does the SELECT command return that tells you about unread messages?',
        opts: ['* UNREAD <count>','* OK [UNSEEN <n>]','* NEW <count>','* STATUS (UNSEEN <n>)'],
        ans: 1,
        explain: 'SELECT returns "* OK [UNSEEN <n>]" indicating the sequence number of the first unseen message. It also returns EXISTS (total count) and RECENT (new since last SELECT).'
    },
    {
        q: 'Which IMAP command searches messages on the server without downloading them?',
        opts: ['FIND','FILTER','QUERY','SEARCH'],
        ans: 3,
        explain: 'SEARCH runs the search on the server and returns only matching message sequence numbers. This is far more efficient than POP3 which requires downloading all messages to search them.'
    },
    {
        q: 'What is the difference between SELECT and EXAMINE?',
        opts: ['SELECT is for folders; EXAMINE is for individual messages','SELECT opens a mailbox read/write; EXAMINE opens it read-only','SELECT is faster; EXAMINE is more detailed','No difference ‚Äî they are aliases'],
        ans: 1,
        explain: 'SELECT opens a mailbox with [READ-WRITE] access allowing modifications. EXAMINE opens the same mailbox with [READ-ONLY] access ‚Äî no flags can be changed, no EXPUNGE is allowed.'
    },
    {
        q: 'Which IMAP version is defined in RFC 3501?',
        opts: ['IMAP2','IMAP3','IMAP4rev1','IMAP4rev2'],
        ans: 2,
        explain: 'RFC 3501 defines IMAP4rev1, the most widely deployed version. IMAP4rev2 (RFC 9051) is newer. IMAP2 was the original implementation in the 1980s.'
    }
];

let quizAnswered = Array(questions.length).fill(false);
let quizScore = 0;

function buildQuiz() {
    const container = document.getElementById('quiz-container');
    container.innerHTML = questions.map((q,i) => `
        <div class="quiz-q" id="q${i}">
            <div class="q-text">${i+1}. ${q.q}</div>
            ${q.opts.map((opt,j) => `
                <div class="quiz-option" onclick="answerQ(${i},${j})">${opt}</div>
            `).join('')}
            <div class="quiz-feedback" id="fb${i}"></div>
        </div>
    `).join('');
    document.getElementById('score-box').classList.remove('show');
    quizAnswered = Array(questions.length).fill(false);
    quizScore = 0;
}

function answerQ(qi, ai) {
    if (quizAnswered[qi]) return;
    quizAnswered[qi] = true;
    const q = questions[qi];
    const opts = document.querySelectorAll(`#q${qi} .quiz-option`);
    opts.forEach((opt, j) => {
        if (j === q.ans) opt.classList.add('correct');
        else if (j === ai && ai !== q.ans) opt.classList.add('wrong');
        opt.style.pointerEvents = 'none';
    });
    const fb = document.getElementById(`fb${qi}`);
    fb.textContent = (ai === q.ans ? '‚úî Correct! ' : '‚úò Incorrect. ') + q.explain;
    fb.style.color = ai === q.ans ? '#006633' : '#880000';
    fb.classList.add('show');
    if (ai === q.ans) quizScore++;
    if (quizAnswered.every(Boolean)) showScore();
}

function showScore() {
    const box = document.getElementById('score-box');
    document.getElementById('score-val').textContent = `${quizScore}/${questions.length}`;
    const pct = Math.round(quizScore / questions.length * 100);
    const msgs = ['Keep studying ‚Äî review the Commands and Simulator sections!', 'Good effort ‚Äî review the sections on flags and states.', 'Solid understanding! Review any missed questions.', 'Excellent! You have a strong grasp of the IMAP protocol.'];
    document.getElementById('score-msg').textContent = `${pct}% ‚Äî ` + msgs[pct < 50 ? 0 : pct < 70 ? 1 : pct < 90 ? 2 : 3];
    box.classList.add('show');
}

function resetQuiz() { buildQuiz(); }

buildQuiz();
</script>
</body>
</html>
