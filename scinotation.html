<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering Scientific Notation</title>
    <style>
        :root {
            --primary: #2563eb; /* Royal Blue */
            --secondary: #1e293b; /* Slate Dark */
            --accent: #10b981; /* Emerald Green for success */
            --error: #ef4444; /* Red for errors */
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #334155;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            background-color: var(--secondary);
            color: white;
            width: 100%;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        h1 { margin: 0; font-size: 2.5rem; letter-spacing: -0.05em; }
        .subtitle { color: #94a3b8; font-weight: 300; margin-top: 0.5rem; }

        main {
            width: 90%;
            max-width: 900px;
            margin: 2rem auto;
            display: grid;
            gap: 2rem;
        }

        /* Card Styling */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        h2 { color: var(--secondary); border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem; margin-top: 0; }

        /* INTERACTIVE VISUALIZER STYLES */
        .visualizer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #f1f5f9;
            padding: 2rem;
            border-radius: 8px;
        }

        .equation-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 2rem;
            font-weight: bold;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .highlight { color: var(--primary); }
        .exp-highlight { color: var(--accent); }

        .slider-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            width: 100%;
            max-width: 400px;
            margin-top: 1rem;
        }
        
        input[type=range] { flex-grow: 1; }

        .explanation-box {
            margin-top: 1rem;
            padding: 1rem;
            background: #dbeafe;
            border-left: 4px solid var(--primary);
            color: #1e40af;
            border-radius: 4px;
        }

        /* GAME STYLES */
        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-weight: bold;
            color: var(--secondary);
        }

        .question-box {
            text-align: center;
            font-size: 1.5rem;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--secondary);
            color: white;
            border-radius: 8px;
        }

        .input-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 0.5rem;
            border: 2px solid #cbd5e1;
            border-radius: 6px;
            font-size: 1.2rem;
            width: 100px;
            text-align: center;
        }

        input[type="number"]:focus {
            border-color: var(--primary);
            outline: none;
        }

        .static-text { font-size: 1.2rem; font-weight: bold; }
        .sup { vertical-align: super; font-size: 0.8em; }

        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            margin-top: 1.5rem;
        }

        .btn:hover { background-color: #1d4ed8; }
        .btn.secondary { background-color: var(--secondary); }

        .feedback-msg {
            margin-top: 1rem;
            text-align: center;
            font-weight: bold;
            min-height: 1.5em;
        }
        
        .success { color: var(--accent); }
        .failure { color: var(--error); }

        /* Tab switching for game modes */
        .tabs { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .tab { 
            padding: 0.5rem 1rem; 
            cursor: pointer; 
            border-bottom: 3px solid transparent; 
            font-weight: bold; 
            color: #64748b;
        }
        .tab.active { 
            border-bottom-color: var(--primary); 
            color: var(--primary); 
        }

    </style>
</head>
<body>

    <header>
        <h1>Scientific Notation Lab</h1>
        <div class="subtitle">Visualizing & Converting Magnitude</div>
    </header>

    <main>
        <section class="card">
            <h2>1. Concept Visualizer</h2>
            <p>Scientific notation allows us to write very large or very small numbers easily. It follows the format: <strong>a × 10<sup>n</sup></strong>.</p>
            <ul>
                <li><strong>a (Coefficient):</strong> A number greater than or equal to 1 and less than 10.</li>
                <li><strong>n (Exponent):</strong> An integer showing how many places the decimal moves.</li>
            </ul>

            <div class="visualizer-container">
                <div class="equation-display" id="vizDisplay">
                    <span class="highlight">1.0</span> × 10<span class="exp-highlight sup" id="vizExpVal">0</span> = 1.0
                </div>

                <div class="slider-controls">
                    <span>Small (10<sup>-5</sup>)</span>
                    <input type="range" id="expSlider" min="-5" max="5" value="0" step="1">
                    <span>Large (10<sup>5</sup>)</span>
                </div>

                <div class="explanation-box" id="vizExplanation">
                    Exponent is 0. The number stays the same.
                </div>
            </div>
        </section>

        <section class="card">
            <h2>2. The Cosmic Converter Game</h2>
            
            <div class="game-stats">
                <span>Score: <span id="score">0</span></span>
                <span>Streak: <span id="streak">0</span></span>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="setMode('stdToSci')">Standard &rarr; Scientific</div>
                <div class="tab" onclick="setMode('sciToStd')">Scientific &rarr; Standard</div>
            </div>

            <div id="gameArea">
                <div class="question-box" id="questionText">
                    Loading...
                </div>

                <div class="input-group" id="inputArea">
                    </div>

                <div style="text-align: center;">
                    <button class="btn" onclick="checkAnswer()">Check Answer</button>
                    <button class="btn secondary" onclick="generateQuestion()">Skip</button>
                </div>

                <div class="feedback-msg" id="feedback"></div>
            </div>
        </section>
    </main>

    <script>
        /* --- VISUALIZER LOGIC --- */
        const slider = document.getElementById('expSlider');
        const vizDisplay = document.getElementById('vizDisplay');
        const vizExpVal = document.getElementById('vizExpVal');
        const vizExplanation = document.getElementById('vizExplanation');
        
        // Base number for visualization
        const baseNum = 1.25;

        slider.addEventListener('input', updateVisualizer);

        function updateVisualizer() {
            const exp = parseInt(slider.value);
            vizExpVal.textContent = exp;

            // Calculate standard form
            // Fix floating point precision issues using toLocaleString or limited sig figs
            let standardForm = (baseNum * Math.pow(10, exp));
            
            // Format output purely for display niceness avoiding JS scientific notation (e.g. 1e-5)
            let displayStr = standardForm.toLocaleString('en-US', {maximumFractionDigits: 10});
            if (Math.abs(exp) >= 5 || Math.abs(standardForm) < 0.0001) {
                 // Force full string for small numbers
                 displayStr = standardForm.toFixed(Math.abs(exp) + 2);
                 // Trim trailing zeros if it's a decimal
                 if(displayStr.includes('.')) {
                     displayStr = displayStr.replace(/\.?0+$/, "");
                 }
            }

            // Construct HTML
            const html = `<span class="highlight">${baseNum}</span> × 10<span class="exp-highlight sup">${exp}</span> = ${displayStr}`;
            vizDisplay.innerHTML = html;

            // Update explanation text
            if (exp > 0) {
                vizExplanation.textContent = `Positive Exponent (${exp}): The decimal point moves ${exp} places to the RIGHT. The number gets larger.`;
            } else if (exp < 0) {
                vizExplanation.textContent = `Negative Exponent (${exp}): The decimal point moves ${Math.abs(exp)} places to the LEFT. The number gets smaller.`;
            } else {
                vizExplanation.textContent = `Exponent is 0. The decimal does not move.`;
            }
        }

        /* --- GAME LOGIC --- */
        let currentMode = 'stdToSci'; // 'stdToSci' or 'sciToStd'
        let currentQuestion = {};
        let score = 0;
        let streak = 0;

        function setMode(mode) {
            currentMode = mode;
            // Update Tab UI
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            generateQuestion();
        }

        function generateQuestion() {
            // clear feedback and inputs
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').className = 'feedback-msg';
            
            // Generate random coefficient (1.00 to 9.99)
            let coeff = (Math.random() * 8.99 + 1);
            coeff = parseFloat(coeff.toFixed(2)); // Round to 2 decimals

            // Generate random exponent (-6 to 6, excluding 0 for challenge)
            let exp = Math.floor(Math.random() * 13) - 6; 
            if (exp === 0) exp = 2; // Default to 2 if 0 hits

            currentQuestion = { coeff, exp };
            
            renderGameUI();
        }

        function renderGameUI() {
            const qBox = document.getElementById('questionText');
            const iArea = document.getElementById('inputArea');

            if (currentMode === 'stdToSci') {
                // Question: Standard Number (e.g., 4500)
                // Answer: Coeff and Exp
                const stdNum = currentQuestion.coeff * Math.pow(10, currentQuestion.exp);
                let displayNum = stdNum.toLocaleString('en-US', {maximumFractionDigits: 10, useGrouping: false});
                
                // Fix JS very small number auto-formatting
                if(Math.abs(currentQuestion.exp) > 5) {
                    displayNum = stdNum.toFixed(Math.abs(currentQuestion.exp) + 2).replace(/\.?0+$/, "");
                }

                qBox.innerHTML = `Convert to Scientific Notation:<br><strong>${displayNum}</strong>`;
                
                iArea.innerHTML = `
                    <input type="number" id="ansCoeff" placeholder="a" step="0.01">
                    <span class="static-text"> × 10 </span>
                    <input type="number" id="ansExp" placeholder="n" step="1">
                `;
            } else {
                // Question: Scientific (e.g., 4.5 x 10^3)
                // Answer: Standard Number
                qBox.innerHTML = `Convert to Standard Form:<br><strong>${currentQuestion.coeff} × 10<sup>${currentQuestion.exp}</sup></strong>`;
                
                iArea.innerHTML = `
                    <input type="number" id="ansStd" placeholder="Standard Number" style="width: 200px;">
                `;
            }
            
            // Auto focus first input
            const firstInput = iArea.querySelector('input');
            if(firstInput) firstInput.focus();
        }

        function checkAnswer() {
            const feedback = document.getElementById('feedback');
            let isCorrect = false;

            if (currentMode === 'stdToSci') {
                const userCoeff = parseFloat(document.getElementById('ansCoeff').value);
                const userExp = parseInt(document.getElementById('ansExp').value);

                // Tolerance for coefficient floating point weirdness
                const coeffCorrect = Math.abs(userCoeff - currentQuestion.coeff) < 0.01;
                const expCorrect = userExp === currentQuestion.exp;

                if (coeffCorrect && expCorrect) isCorrect = true;

            } else {
                const userStd = parseFloat(document.getElementById('ansStd').value);
                const actualStd = currentQuestion.coeff * Math.pow(10, currentQuestion.exp);
                
                // Check relative error or small difference
                if (Math.abs(userStd - actualStd) < 0.0000001) isCorrect = true;
            }

            if (isCorrect) {
                feedback.textContent = "Correct! Great work.";
                feedback.className = "feedback-msg success";
                score += 10;
                streak++;
                updateStats();
                setTimeout(generateQuestion, 1500); // Auto next
            } else {
                feedback.textContent = "Not quite. Check your decimal placement and try again.";
                feedback.className = "feedback-msg failure";
                streak = 0;
                updateStats();
            }
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
        }

        // Initialize
        updateVisualizer();
        generateQuestion();

    </script>
</body>
</html>
