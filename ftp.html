<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTP Protocol Interactive Learning Module</title>
    <style>
        :root {
            --primary-green: #2ecc71;
            --dark-green: #27ae60;
            --black: #2c3e50;
            --white: #ffffff;
            --gray: #f4f7f6;
            --border: #ddd;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--white); color: var(--black); line-height: 1.6; margin: 0; padding: 0; }
        
        header { 
            background-color: var(--black); 
            color: var(--primary-green); 
            padding: 2rem; 
            text-align: center; 
            border-bottom: 5px solid var(--primary-green);
        }

        .container { max-width: 1000px; margin: 20px auto; padding: 0 20px; }

        /* Navigation Tabs */
        .tabs { display: flex; flex-wrap: wrap; background: var(--black); border-radius: 8px 8px 0 0; overflow: hidden; }
        .tab-btn { 
            flex: 1; padding: 15px; border: none; background: none; color: white; 
            cursor: pointer; transition: 0.3s; font-weight: bold; border-bottom: 3px solid transparent;
        }
        .tab-btn:hover { background: #3e4f5f; }
        .tab-btn.active { border-bottom: 3px solid var(--primary-green); background: #3e4f5f; }

        .tab-content { 
            display: none; padding: 30px; border: 1px solid var(--border); 
            border-top: none; animation: fadeIn 0.5s; min-height: 500px;
        }
        .active-content { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Content Styles */
        h2 { color: var(--dark-green); border-left: 5px solid var(--primary-green); padding-left: 10px; }
        .card { 
            background: var(--gray); border-radius: 8px; padding: 20px; margin-bottom: 20px;
            cursor: pointer; transition: transform 0.2s; border-left: 4px solid var(--black);
        }
        .card:hover { transform: translateY(-3px); border-left-color: var(--primary-green); }
        
        .terminal {
            background: #1e1e1e; color: #00ff00; font-family: 'Courier New', Courier, monospace;
            padding: 15px; border-radius: 5px; margin-top: 10px; font-size: 0.9rem; overflow-x: auto;
        }

        /* Flow Diagram Simulation */
        .sim-container { text-align: center; margin: 20px 0; }
        .node-box { 
            display: inline-block; width: 120px; padding: 10px; 
            border: 2px solid var(--black); border-radius: 5px; font-weight: bold;
        }
        .arrow { font-size: 2rem; color: var(--primary-green); margin: 0 20px; vertical-align: middle; }

        /* Form Elements */
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        select, input { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 4px; }
        button.action-btn { 
            background: var(--primary-green); color: white; border: none; 
            padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold;
        }
        button.action-btn:hover { background: var(--dark-green); }

        /* Quiz */
        .quiz-option { 
            display: block; padding: 10px; margin: 5px 0; border: 1px solid var(--border); 
            border-radius: 4px; cursor: pointer; 
        }
        .quiz-option:hover { background: var(--gray); }
        .progress-bar { width: 100%; height: 10px; background: #eee; border-radius: 5px; margin-bottom: 20px; }
        .progress-inner { height: 100%; background: var(--primary-green); width: 0%; transition: 0.3s; }
        .correct { background: #d4edda !important; border-color: #28a745 !important; }
        .incorrect { background: #f8d7da !important; border-color: #dc3545 !important; }

        /* Header Table Diagram */
        .header-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-family: monospace; }
        .header-table td { border: 1px solid #000; padding: 10px; text-align: center; }
        .bit-header { background: var(--black); color: white; font-size: 0.7rem; }
    </style>
</head>
<body>

<header>
    <h1>FTP Protocol Deep Dive</h1>
    <p>Instructional Module for Network+ & Cybersecurity Students</p>
</header>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab(event, 'tab1')">1. Overview</button>
        <button class="tab-btn" onclick="openTab(event, 'tab2')">2. How It Works</button>
        <button class="tab-btn" onclick="openTab(event, 'tab3')">3. Frame Types</button>
        <button class="tab-btn" onclick="openTab(event, 'tab4')">4. Header Format</button>
        <button class="tab-btn" onclick="openTab(event, 'tab5')">5. Build a Frame</button>
        <button class="tab-btn" onclick="openTab(event, 'tab6')">6. Quiz</button>
    </div>

    <div id="tab1" class="tab-content active-content">
        <h2>What is FTP?</h2>
        <p>The <strong>File Transfer Protocol (FTP)</strong> is a standard network protocol used for the transfer of computer files between a client and server on a computer network.</p>
        
        <div class="card">
            <h3>Purpose & Existence</h3>
            <p>FTP was developed in the early 1970s (RFC 114) to enable reliable data exchange across diverse systems. It solves the problem of file incompatibility and provides a structured way to navigate remote file systems.</p>
            <ul>
                <li><strong>Port 21:</strong> Control Connection (Commands)</li>
                <li><strong>Port 20:</strong> Data Connection (File transfer)</li>
            </ul>
        </div>
    </div>

    <div id="tab2" class="tab-content">
        <h2>The FTP Handshake & Connection</h2>
        <p>FTP is unique because it uses <strong>two separate channels</strong>.</p>
        
        <div class="sim-container">
            <div class="node-box">Client</div>
            <span class="arrow">â†”</span>
            <div class="node-box" style="border-color: var(--primary-green);">Server</div>
        </div>

        <div id="sim-steps">
            <button class="action-btn" onclick="nextSimStep()">Next Step in Handshake</button>
            <div id="sim-output" class="terminal" style="margin-top:20px;">
                > Click the button to start the connection simulation...
            </div>
        </div>
    </div>

    <div id="tab3" class="tab-content">
        <h2>FTP Message & Command Types</h2>
        <p>FTP communicates via plain-text commands and numeric status codes.</p>
        
        <div class="card" onclick="toggleTerminal('term1')">
            <h3>1. Authentication Commands (USER/PASS)</h3>
            <p>Used to identify the user and verify their credentials. Click to see example.</p>
            <div id="term1" class="terminal" style="display:none;">
                C: USER anonymous<br>
                S: 331 Password required for anonymous<br>
                C: PASS guest<br>
                S: 230 User logged in, proceed.
            </div>
        </div>

        <div class="card" onclick="toggleTerminal('term2')">
            <h3>2. Transfer Mode (TYPE)</h3>
            <p>Defines if the file is ASCII (text) or Image (binary). Click to see example.</p>
            <div id="term2" class="terminal" style="display:none;">
                C: TYPE I (Image/Binary mode)<br>
                S: 200 Type set to I.
            </div>
        </div>

        <div class="card" onclick="toggleTerminal('term3')">
            <h3>3. File Actions (RETR/STOR)</h3>
            <p>RETR retrieves a file from server; STOR uploads a file. Click to see example.</p>
            <div id="term3" class="terminal" style="display:none;">
                C: RETR manual.pdf<br>
                S: 150 Opening BINARY mode data connection for manual.pdf (50234 bytes).
            </div>
        </div>
    </div>

    <div id="tab4" class="tab-content">
        <h2>The Anatomy of an FTP Packet</h2>
        <p>Since FTP operates at the <strong>Application Layer</strong>, it doesn't have a bit-level binary header like TCP/IP. Instead, it relies on the TCP header for transport. The "header" in FTP terms is the Command/Response structure.</p>
        
        <table class="header-table">
            <tr class="bit-header">
                <td colspan="4">TCP Segment Data Area (The FTP Payload)</td>
            </tr>
            <tr>
                <td style="width: 25%; background: #eee;">Command (4-Chars)</td>
                <td style="width: 10%; background: #ddd;">Space</td>
                <td style="width: 50%; background: #eee;">Arguments / Parameters</td>
                <td style="width: 15%; background: #ddd;">CRLF (\r\n)</td>
            </tr>
        </table>

        <div class="card" style="margin-top:20px;">
            <h3>Field Breakdown</h3>
            <ul>
                <li><strong>Command:</strong> A 3 or 4 character string (e.g., LIST, QUIT).</li>
                <li><strong>Arguments:</strong> Variable length, specifies paths or options.</li>
                <li><strong>CRLF:</strong> Hex 0x0D 0x0A, signals the end of a command.</li>
            </ul>
        </div>
    </div>

    <div id="tab5" class="tab-content">
        <h2>Interactive FTP Command Builder</h2>
        <p>Construct a valid FTP command and see how it is formatted for the wire.</p>
        
        <div class="form-group">
            <label>Select Action:</label>
            <select id="builder-type" onchange="updateBuilderFields()">
                <option value="">-- Choose --</option>
                <option value="USER">Login (USER)</option>
                <option value="PORT">Active Mode (PORT)</option>
                <option value="RETR">Download (RETR)</option>
            </select>
        </div>

        <div id="dynamic-fields"></div>

        <div id="builder-feedback" style="color: red; margin: 10px 0;"></div>
        
        <button class="action-btn" onclick="buildFrame()">Generate FTP Command</button>
        <button class="action-btn" style="background:var(--black);" onclick="resetBuilder()">Reset</button>

        <div id="builder-result" class="terminal" style="margin-top:20px; display:none;"></div>
    </div>

    <div id="tab6" class="tab-content">
        <h2>Knowledge Check</h2>
        <div class="progress-bar"><div id="progress" class="progress-inner"></div></div>
        <div id="quiz-container">
            </div>
        <div id="quiz-results" style="display:none; text-align:center;">
            <h3 id="score-text"></h3>
            <button class="action-btn" onclick="resetQuiz()">Restart Quiz</button>
        </div>
    </div>
</div>

<script>
    // Tab Logic
    function openTab(evt, tabName) {
        let contents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < contents.length; i++) contents[i].className = contents[i].className.replace(" active-content", "");
        let buttons = document.getElementsByClassName("tab-btn");
        for (let i = 0; i < buttons.length; i++) buttons[i].className = buttons[i].className.replace(" active", "");
        document.getElementById(tabName).className += " active-content";
        evt.currentTarget.className += " active";
    }

    function toggleTerminal(id) {
        let el = document.getElementById(id);
        el.style.display = el.style.display === "none" ? "block" : "none";
    }

    // Simulation Logic
    let simStep = 0;
    const steps = [
        "1. Client initiates TCP 3-Way Handshake on Port 21.",
        "2. Server sends 220 Response (Service Ready).",
        "3. Client sends USER 'admin'.",
        "4. Server sends 331 (Password required).",
        "5. Client sends PASS 'password123'.",
        "6. Server sends 230 (User logged in). Connection is established!"
    ];
    function nextSimStep() {
        let out = document.getElementById('sim-output');
        if (simStep < steps.length) {
            out.innerHTML += `<br>> ${steps[simStep]}`;
            simStep++;
        } else {
            out.innerHTML = "> Connection active. Waiting for file commands...";
            simStep = 0;
        }
    }

    // Builder Logic
    function updateBuilderFields() {
        const type = document.getElementById('builder-type').value;
        const div = document.getElementById('dynamic-fields');
        div.innerHTML = '';
        if (type === 'USER') {
            div.innerHTML = '<label>Username:</label><input type="text" id="arg1" placeholder="e.g. jdoe">';
        } else if (type === 'PORT') {
            div.innerHTML = '<label>IP & Port (h1,h2,h3,h4,p1,p2):</label><input type="text" id="arg1" placeholder="192,168,1,1,12,34">';
        } else if (type === 'RETR') {
            div.innerHTML = '<label>Filename:</label><input type="text" id="arg1" placeholder="data.zip">';
        }
    }

    function buildFrame() {
        const type = document.getElementById('builder-type').value;
        const arg = document.getElementById('arg1')?.value;
        const feedback = document.getElementById('builder-feedback');
        const res = document.getElementById('builder-result');

        if (!type || !arg) {
            feedback.innerText = "Error: All fields are required.";
            return;
        }

        feedback.innerText = "";
        res.style.display = "block";
        res.innerHTML = `Constructed FTP Header Payload:<br>--------------------------------<br>${type} ${arg}\\r\\n<br><br>Status: Ready for Transmission via TCP.`;
    }

    function resetBuilder() {
        document.getElementById('builder-type').value = "";
        document.getElementById('dynamic-fields').innerHTML = "";
        document.getElementById('builder-result').style.display = "none";
        document.getElementById('builder-feedback').innerText = "";
    }

    // Quiz Logic
    const questions = [
        { q: "Which port is used for FTP Control commands?", a: ["20", "21", "22", "80"], c: 1 },
        { q: "What is the primary purpose of FTP?", a: ["Email", "Remote Desktop", "File Transfer", "Web Hosting"], c: 2 },
        { q: "What does code 230 indicate?", a: ["Ready", "Logged In", "Error", "Redirect"], c: 1 },
        { q: "FTP commands are sent in which format?", a: ["Binary", "Encrypted", "Plain Text", "Hex"], c: 2 },
        { q: "Which command is used to download a file?", a: ["GET", "RETR", "RECEIVE", "STOR"], c: 1 },
        { q: "Which port is used for FTP Data transfer in active mode?", a: ["20", "21", "25", "443"], c: 0 },
        { q: "What character sequence ends an FTP command?", a: ["EOF", "\\0", "\\r\\n", "QUIT"], c: 2 },
        { q: "Which command initiates an upload?", a: ["RETR", "PUSH", "STOR", "SAVE"], c: 2 },
        { q: "FTP is which layer of the OSI model?", a: ["Physical", "Network", "Transport", "Application"], c: 3 },
        { q: "What does 'TYPE I' stand for?", a: ["Internal", "Image (Binary)", "Internet", "Incremental"], c: 1 }
    ];

    let currentQ = 0;
    let score = 0;

    function loadQuestion() {
        if (currentQ >= questions.length) {
            showResults();
            return;
        }
        const q = questions[currentQ];
        let html = `<h3>Question ${currentQ + 1} of 10</h3><p>${q.q}</p>`;
        q.a.forEach((opt, i) => {
            html += `<div class="quiz-option" onclick="checkAnswer(${i})">${opt}</div>`;
        });
        document.getElementById('quiz-container').innerHTML = html;
        document.getElementById('progress').style.width = `${(currentQ / questions.length) * 100}%`;
    }

    function checkAnswer(idx) {
        if (idx === questions[currentQ].c) score++;
        currentQ++;
        loadQuestion();
    }

    function showResults() {
        document.getElementById('quiz-container').style.display = "none";
        document.getElementById('quiz-results').style.display = "block";
        document.getElementById('progress').style.width = `100%`;
        document.getElementById('score-text').innerText = `Final Score: ${score}/10`;
    }

    function resetQuiz() {
        currentQ = 0; score = 0;
        document.getElementById('quiz-container').style.display = "block";
        document.getElementById('quiz-results').style.display = "none";
        loadQuestion();
    }

    // Init
    loadQuestion();
</script>

</body>
</html>
