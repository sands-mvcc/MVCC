<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class C Subnetting Master</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Dark background */
            color: #e4e4e7; /* Light text */
        }
        .card {
            background-color: #2c2c54; /* Card background */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.25);
        }
        input[type="text"], input[type="number"] {
            background-color: #3b3b64;
            color: #f0f0f0;
            border: 1px solid #4a4a82;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #7b9cff;
            box-shadow: 0 0 0 3px rgba(123, 156, 255, 0.3);
        }
        .correct-answer {
            color: #6ee7b7; /* Green for success */
        }
        .incorrect-answer {
            color: #fca5a5; /* Red for error */
        }
        .btn-primary {
            background-color: #7b9cff;
            color: #1a1a2e;
            transition: background-color 0.2s, transform 0.1s;
        }
        .btn-primary:hover {
            background-color: #a0b7ff;
        }
        .btn-primary:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body>

    <div class="container mx-auto p-4 md:p-8">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-[#7b9cff]">Class C Subnetting Master</h1>
            <p class="mt-2 text-gray-400">Practice your subnetting skills and gain mastery over the network address space.</p>
        </header>

        <!-- Theory Section -->
        <div class="card p-6 rounded-xl mb-8">
            <h2 class="text-2xl font-semibold mb-4 border-b border-gray-600 pb-2">Class C Subnetting: The Core Analysis</h2>
            <p class="text-sm text-gray-300 mb-4">A standard Class "C" IPv4 network is defined by a default mask of <code class="bg-gray-700 p-1 rounded">255.255.255.0</code> or the CIDR notation <code class="bg-gray-700 p-1 rounded">/24</code>. Subnetting involves borrowing host bits (from the 4th octet) to create subnets.</p>

            <div id="theory-table" class="overflow-x-auto">
                <table class="min-w-full text-sm text-left text-gray-300">
                    <thead class="text-xs uppercase bg-gray-700">
                        <tr>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">CIDR</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">Subnet Mask</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">Borrowed Bits (n)</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3"># of Subnets ($2^n$)</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">Host Bits (h)</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">Usable Hosts ($2^h - 2$)</th>
                            <th scope="col" class="px-3 py-2 md:px-6 md:py-3">Block Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Subnetting examples -->
                        <tr class="bg-[#2c2c54] border-b border-gray-600">
                            <td class="px-3 py-2 md:px-6 md:py-4 font-medium whitespace-nowrap text-[#7b9cff]">/25</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">255.255.255.128</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">1</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">2</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">7</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">126</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">128</td>
                        </tr>
                        <tr class="bg-[#2c2c54] border-b border-gray-600">
                            <td class="px-3 py-2 md:px-6 md:py-4 font-medium whitespace-nowrap text-[#7b9cff]">/26</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">255.255.255.192</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">2</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">4</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">6</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">62</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">64</td>
                        </tr>
                        <tr class="bg-[#2c2c54] border-b border-gray-600">
                            <td class="px-3 py-2 md:px-6 md:py-4 font-medium whitespace-nowrap text-[#7b9cff]">/27</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">255.255.255.224</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">3</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">8</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">5</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">30</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">32</td>
                        </tr>
                        <tr class="bg-[#2c2c54]">
                            <td class="px-3 py-2 md:px-6 md:py-4 font-medium whitespace-nowrap text-[#7b9cff]">/28</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">255.255.255.240</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">4</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">16</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">4</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">14</td>
                            <td class="px-3 py-2 md:px-6 md:py-4">16</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p class="mt-4 text-xs text-gray-500">
                <span class="font-bold">Key Addresses:</span> For any subnet, the Network Address is the first address (all host bits 0) and the Broadcast Address is the last address (all host bits 1). Usable host addresses are those between the Network and Broadcast addresses.
            </p>
        </div>
        <!-- End Theory Section -->


        <!-- Practice Section -->
        <div class="card p-6 rounded-xl">
            <h2 class="text-2xl font-semibold mb-4 text-[#7b9cff]">Subnetting Challenge</h2>

            <!-- Problem Display -->
            <div id="problem-area" class="text-center p-4 mb-6 rounded-lg border border-yellow-500 bg-yellow-900/20">
                <p class="text-xl font-medium">Network Address: <span id="network-address" class="text-yellow-300 font-bold">192.168.1.0</span></p>
                <p class="text-xl font-medium">Required CIDR: <span id="cidr-prefix" class="text-yellow-300 font-bold">/26</span></p>
            </div>

            <div class="grid md:grid-cols-2 gap-6">

                <!-- Input Column -->
                <div>
                    <h3 class="text-lg font-medium mb-3">Your Answers</h3>
                    <div id="input-fields" class="space-y-4">
                        <!-- Subnet Mask -->
                        <div>
                            <label for="input-mask" class="block text-sm font-medium mb-1">Subnet Mask (Dotted Decimal)</label>
                            <input type="text" id="input-mask" placeholder="255.255.255.XXX" class="w-full p-2 rounded-lg" required>
                            <div id="feedback-mask" class="mt-1 text-sm"></div>
                        </div>

                        <!-- Number of Subnets -->
                        <div>
                            <label for="input-subnets" class="block text-sm font-medium mb-1">Total Number of Subnets</label>
                            <input type="number" id="input-subnets" placeholder="e.g. 8" class="w-full p-2 rounded-lg" required>
                            <div id="feedback-subnets" class="mt-1 text-sm"></div>
                        </div>

                        <!-- Hosts Per Subnet -->
                        <div>
                            <label for="input-hosts" class="block text-sm font-medium mb-1">Usable Hosts Per Subnet</label>
                            <input type="number" id="input-hosts" placeholder="e.g. 30" class="w-full p-2 rounded-lg" required>
                            <div id="feedback-hosts" class="mt-1 text-sm"></div>
                        </div>

                        <!-- Second Subnet Network Address -->
                        <div>
                            <label for="input-net-2" class="block text-sm font-medium mb-1">Network Address of the <span class="font-bold text-[#7b9cff]">Second</span> Subnet</label>
                            <input type="text" id="input-net-2" placeholder="X.X.X.XXX" class="w-full p-2 rounded-lg" required>
                            <div id="feedback-net-2" class="mt-1 text-sm"></div>
                        </div>

                        <!-- Second Subnet Broadcast Address -->
                        <div>
                            <label for="input-bcast-2" class="block text-sm font-medium mb-1">Broadcast Address of the <span class="font-bold text-[#7b9cff]">Second</span> Subnet</label>
                            <input type="text" id="input-bcast-2" placeholder="X.X.X.XXX" class="w-full p-2 rounded-lg" required>
                            <div id="feedback-bcast-2" class="mt-1 text-sm"></div>
                        </div>
                    </div>
                </div>

                <!-- Feedback and Controls Column -->
                <div class="flex flex-col">
                    <h3 class="text-lg font-medium mb-3">Controls & Feedback</h3>
                    <div class="space-y-4">
                        <button onclick="checkAnswers()" class="btn-primary w-full p-3 rounded-xl font-bold">
                            CHECK ANSWERS
                        </button>
                        <button onclick="resetGame()" class="btn-primary w-full p-3 rounded-xl font-bold bg-gray-500 hover:bg-gray-400">
                            NEW CHALLENGE
                        </button>
                    </div>

                    <div class="mt-6 p-4 rounded-lg bg-gray-800/50 flex-grow">
                        <h4 class="text-lg font-semibold mb-2">Detailed Feedback:</h4>
                        <div id="detailed-feedback" class="text-sm text-gray-400">
                            Ready for your first challenge! Press "NEW CHALLENGE" to begin.
                        </div>
                    </div>

                    <div class="mt-4 p-4 rounded-lg bg-[#3b3b64]">
                        <h4 class="text-lg font-semibold mb-2">Need a Hint?</h4>
                        <p id="hint-text" class="text-sm text-gray-300">
                            Focus on the borrowed bits ($n$) to find the block size ($2^{8-n}$).
                        </p>
                    </div>
                </div>

            </div>
        </div>
        <!-- End Practice Section -->
    </div>

    <script>
        // Global state for the current problem's correct answers
        let correctAnswer = {};
        const CLASS_C_NETWORK_PREFIX = 24;

        /**
         * Calculates the subnetting details based on a given CIDR.
         * @param {number} cidr The CIDR prefix (e.g., 26 for /26).
         */
        function calculateAnswers(cidr) {
            const borrowedBits = cidr - CLASS_C_NETWORK_PREFIX;
            const hostBits = 32 - cidr;

            // Block Size (Increment) is 2 raised to the power of host bits
            const blockSize = Math.pow(2, hostBits);

            // Subnet Mask (4th Octet only)
            const fourthOctetMask = 256 - blockSize;
            const subnetMask = `255.255.255.${fourthOctetMask}`;

            // Number of subnets is 2 raised to the power of borrowed bits
            const numberOfSubnets = Math.pow(2, borrowedBits);

            // Usable hosts is 2 raised to the power of host bits, minus 2 (network/broadcast)
            const usableHosts = blockSize - 2;

            // Assuming base network is X.Y.Z.0
            const thirdOctet = parseInt(document.getElementById('network-address').textContent.split('.')[2]);

            // Second Subnet: Network and Broadcast
            // Subnet 1: X.Y.Z.0 (Network) to X.Y.Z.(blockSize - 1) (Broadcast)
            // Subnet 2: X.Y.Z.(blockSize) (Network) to X.Y.Z.((2 * blockSize) - 1) (Broadcast)
            const secondSubnetNetworkOctet = blockSize;
            const secondSubnetBroadcastOctet = (2 * blockSize) - 1;

            const secondSubnetNetwork = `192.168.${thirdOctet}.${secondSubnetNetworkOctet}`;
            const secondSubnetBroadcast = `192.168.${thirdOctet}.${secondSubnetBroadcastOctet}`;


            return {
                subnetMask,
                numberOfSubnets,
                usableHosts,
                secondSubnetNetwork,
                secondSubnetBroadcast,
                blockSize
            };
        }

        /**
         * Generates a new random Class C subnetting problem.
         */
        function generateProblem() {
            // 1. Generate a random Class C IP (192.168.X.0 for practice)
            const thirdOctet = Math.floor(Math.random() * 256);
            const baseNetwork = `192.168.${thirdOctet}.0`;

            // 2. Generate a random CIDR prefix (/25 through /30)
            const minCidr = 25;
            const maxCidr = 30;
            const cidr = Math.floor(Math.random() * (maxCidr - minCidr + 1)) + minCidr;

            // 3. Update the UI problem display
            document.getElementById('network-address').textContent = baseNetwork;
            document.getElementById('cidr-prefix').textContent = `/${cidr}`;
            document.getElementById('hint-text').innerHTML = `The borrowed bits ($n$) are ${cidr - CLASS_C_NETWORK_PREFIX}. The host bits ($h$) are ${32 - cidr}. The block size is $2^h$.`;

            // 4. Calculate and store the correct answers
            correctAnswer = calculateAnswers(cidr);

            // 5. Clear previous inputs and feedback
            const inputs = document.querySelectorAll('#input-fields input');
            inputs.forEach(input => input.value = '');
            const feedbacks = document.querySelectorAll('#input-fields div[id^="feedback-"]');
            feedbacks.forEach(div => {
                div.textContent = '';
                div.classList.remove('correct-answer', 'incorrect-answer');
            });
            document.getElementById('detailed-feedback').textContent = `Your challenge is set: Subnet 192.168.${thirdOctet}.0 /${cidr}.`;
        }

        /**
         * Checks the user's answers against the calculated correct answers.
         */
        function checkAnswers() {
            if (Object.keys(correctAnswer).length === 0) {
                document.getElementById('detailed-feedback').textContent = 'Please start a new challenge first!';
                return;
            }

            let allCorrect = true;
            const userInputs = {
                mask: document.getElementById('input-mask').value.trim(),
                subnets: parseInt(document.getElementById('input-subnets').value),
                hosts: parseInt(document.getElementById('input-hosts').value),
                net2: document.getElementById('input-net-2').value.trim(),
                bcast2: document.getElementById('input-bcast-2').value.trim()
            };

            const checks = [
                {
                    key: 'mask',
                    input: userInputs.mask,
                    correct: correctAnswer.subnetMask,
                    feedbackId: 'feedback-mask',
                    errorMsg: `The subnet mask is determined by the ${correctAnswer.blockSize} block size. (256 - ${correctAnswer.blockSize} = ${correctAnswer.subnetMask.split('.')[3]}).`
                },
                {
                    key: 'subnets',
                    input: userInputs.subnets,
                    correct: correctAnswer.numberOfSubnets,
                    feedbackId: 'feedback-subnets',
                    errorMsg: `Subnets = $2^n$ where $n$ is the number of borrowed bits. You borrowed ${correctAnswer.blockSize < 64 ? 4 : correctAnswer.blockSize < 128 ? 3 : 2} bits.`
                },
                {
                    key: 'hosts',
                    input: userInputs.hosts,
                    correct: correctAnswer.usableHosts,
                    feedbackId: 'feedback-hosts',
                    errorMsg: `Hosts = $2^h - 2$. The block size is ${correctAnswer.blockSize}. (${correctAnswer.blockSize} - 2 = ${correctAnswer.usableHosts}).`
                },
                {
                    key: 'net2',
                    input: userInputs.net2,
                    correct: correctAnswer.secondSubnetNetwork,
                    feedbackId: 'feedback-net-2',
                    errorMsg: `The second subnet starts at the block size increment (${correctAnswer.blockSize}).`
                },
                {
                    key: 'bcast2',
                    input: userInputs.bcast2,
                    correct: correctAnswer.secondSubnetBroadcast,
                    feedbackId: 'feedback-bcast-2',
                    errorMsg: `The broadcast address is one less than the next network address (${correctAnswer.blockSize * 3 - 1})`
                }
            ];

            let detailedFeedbackText = "Review the following entries:\n";

            checks.forEach(check => {
                const feedbackElement = document.getElementById(check.feedbackId);
                const isCorrect = String(check.input) === String(check.correct);

                feedbackElement.textContent = isCorrect
                    ? `Correct: ${check.correct}`
                    : `Incorrect. Expected: ${check.correct}`;

                feedbackElement.classList.remove('correct-answer', 'incorrect-answer');
                feedbackElement.classList.add(isCorrect ? 'correct-answer' : 'incorrect-answer');

                if (!isCorrect) {
                    allCorrect = false;
                    detailedFeedbackText += `\n- ${check.feedbackId.replace('feedback-', '')}: ${check.errorMsg}`;
                }
            });

            if (allCorrect) {
                document.getElementById('detailed-feedback').textContent = "ðŸŽ‰ SUCCESS! You mastered this challenge! Click 'NEW CHALLENGE' to continue your practice.";
            } else {
                document.getElementById('detailed-feedback').textContent = detailedFeedbackText;
            }
        }

        /**
         * Clears the current problem and generates a new one.
         */
        function resetGame() {
            generateProblem();
        }

        // Initialize the game on page load
        document.addEventListener('DOMContentLoaded', generateProblem);
    </script>

</body>
</html>
