<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPv6 Mastery - Interactive Learning Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff;
            color: #000000;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #0066cc 0%, #004c99 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        nav {
            background-color: #003366;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            padding: 0 20px;
        }

        .nav-btn {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .nav-btn:hover {
            background-color: #28a745;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .nav-btn.active {
            background-color: #28a745;
            border-bottom: 3px solid #1e7e34;
        }

        .section {
            display: none;
            padding: 40px 20px;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-card {
            background-color: #f8f9fa;
            border-left: 5px solid #0066cc;
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .content-card h2 {
            color: #0066cc;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .content-card h3 {
            color: #003366;
            margin: 20px 0 10px 0;
            font-size: 1.4em;
        }

        .highlight-box {
            background-color: #e6f2ff;
            border: 2px solid #0066cc;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .success-box {
            background-color: #d4edda;
            border: 2px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #155724;
        }

        .warning-box {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #856404;
        }

        .activity-container {
            background-color: #f0f8ff;
            border: 3px solid #28a745;
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
        }

        .activity-container h3 {
            color: #28a745;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        input[type="text"], input[type="number"], select {
            padding: 10px;
            margin: 10px 5px;
            border: 2px solid #0066cc;
            border-radius: 5px;
            font-size: 1em;
            width: calc(100% - 10px);
            max-width: 400px;
        }

        button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            margin: 10px 5px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        button:hover {
            background-color: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .quiz-option {
            background-color: #ffffff;
            border: 2px solid #0066cc;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background-color: #e6f2ff;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .ipv6-display {
            font-family: 'Courier New', monospace;
            background-color: #000000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-size: 1.2em;
            overflow-x: auto;
        }

        .address-part {
            display: inline-block;
            padding: 5px 10px;
            margin: 2px;
            border-radius: 3px;
            cursor: help;
        }

        .network-prefix {
            background-color: rgba(0, 102, 204, 0.3);
            border: 1px solid #0066cc;
        }

        .interface-id {
            background-color: rgba(40, 167, 69, 0.3);
            border: 1px solid #28a745;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
        }

        th, td {
            border: 2px solid #0066cc;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #0066cc;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background-color: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0066cc 0%, #28a745 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .subnet-calculator {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .calculator-input, .calculator-output {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #0066cc;
        }

        .binary-display {
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            word-break: break-all;
        }

        .interactive-diagram {
            background-color: white;
            border: 2px solid #0066cc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            min-height: 200px;
        }

        .drag-drop-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .drop-zone {
            background-color: #f8f9fa;
            border: 3px dashed #0066cc;
            padding: 20px;
            min-height: 150px;
            min-width: 250px;
            border-radius: 8px;
            text-align: center;
        }

        .draggable {
            background-color: #0066cc;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: move;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .draggable:hover {
            background-color: #28a745;
            transform: scale(1.05);
        }

        .footer {
            background-color: #003366;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üåê IPv6 Mastery</h1>
        <p>Interactive Learning Module for Network Technicians</p>
    </header>

    <nav>
        <div class="nav-container">
            <button class="nav-btn active" onclick="showSection('intro')">Introduction</button>
            <button class="nav-btn" onclick="showSection('fundamentals')">Fundamentals</button>
            <button class="nav-btn" onclick="showSection('addressing')">Addressing</button>
            <button class="nav-btn" onclick="showSection('subnetting')">Subnetting</button>
            <button class="nav-btn" onclick="showSection('types')">Address Types</button>
            <button class="nav-btn" onclick="showSection('configuration')">Configuration</button>
            <button class="nav-btn" onclick="showSection('practice')">Practice Labs</button>
            <button class="nav-btn" onclick="showSection('assessment')">Assessment</button>
        </div>
    </nav>

    <div class="container">
        <!-- Introduction Section -->
        <div id="intro" class="section active">
            <div class="content-card">
                <h2>Welcome to IPv6 Mastery!</h2>
                <p>This comprehensive module will guide you through everything you need to know to effectively manage IPv6 networks as a network technician.</p>
                
                <h3>Why Do We Need IPv6?</h3>
                <p>The Internet Protocol (IP) is the foundation of network communication. For decades, we used IPv4, but we've outgrown it. Let's understand why IPv6 was developed.</p>

                <div class="highlight-box">
                    <h4>üìç IPv4 Address Structure</h4>
                    <p><strong>IPv4 addresses are based on a 32-bit binary address.</strong></p>
                    <p>This means:</p>
                    <ul style="margin-left: 20px;">
                        <li>Each IPv4 address consists of <strong>32 bits</strong> (ones and zeros)</li>
                        <li>These 32 bits can be arranged in 2¬≥¬≤ different combinations</li>
                        <li>2¬≥¬≤ = 4,294,967,296 unique addresses</li>
                        <li>We commonly express this as approximately <strong>4.3 billion addresses</strong></li>
                    </ul>
                    <p><strong>Example IPv4 address:</strong> 192.168.1.1</p>
                    <p style="font-family: monospace; background-color: #f0f0f0; padding: 10px; border-radius: 5px;">
                        Binary: 11000000.10101000.00000001.00000001<br>
                        Decimal: 192.168.1.1
                    </p>
                </div>

                <div class="highlight-box" style="border-left-color: #28a745;">
                    <h4>üåê IPv6 Address Structure</h4>
                    <p><strong>IPv6 addresses are based on a 128-bit binary address.</strong></p>
                    <p>This massive expansion means:</p>
                    <ul style="margin-left: 20px;">
                        <li>Each IPv6 address consists of <strong>128 bits</strong></li>
                        <li>These 128 bits can be arranged in 2¬π¬≤‚Å∏ different combinations</li>
                        <li>2¬π¬≤‚Å∏ = 340,282,366,920,938,463,463,374,607,431,768,211,456</li>
                        <li>We express this as approximately <strong>340 undecillion addresses</strong> (3.4 √ó 10¬≥‚Å∏)</li>
                    </ul>
                    <p><strong>Example IPv6 address:</strong> 2001:0db8:85a3:0000:0000:8a2e:0370:7334</p>
                    <p style="font-family: monospace; background-color: #f0f0f0; padding: 10px; border-radius: 5px;">
                        Written in hexadecimal instead of decimal for readability
                    </p>
                </div>

                <div class="success-box">
                    <h4>üî¢ Putting It In Perspective</h4>
                    <p><strong>IPv4:</strong> 4.3 billion addresses seemed like plenty in 1981, but with billions of devices, smartphones, IoT sensors, and people online, we ran out!</p>
                    <p><strong>IPv6:</strong> 340 undecillion addresses provides approximately <strong>340 trillion trillion trillion addresses</strong>‚Äîenough to assign billions of IP addresses to every person on Earth, with room to spare for centuries!</p>
                </div>

                <h3>Learning Objectives</h3>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Understand IPv6 address structure and notation</li>
                    <li>Master IPv6 address types and their uses</li>
                    <li>Learn IPv6 subnetting and CIDR notation</li>
                    <li>Configure IPv6 on network devices</li>
                    <li>Implement IPv6 routing protocols</li>
                    <li>Understand IPv6 autoconfiguration (SLAAC)</li>
                    <li>Work with DHCPv6</li>
                    <li>Troubleshoot IPv6 networks</li>
                </ul>

                <div class="highlight-box">
                    <h3>üìä Your Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="mainProgress" style="width: 0%">0%</div>
                    </div>
                </div>

                <div class="activity-container">
                    <h3>üéØ Activity: Test Your Understanding!</h3>
                    <p>Now that you've learned about IPv4 and IPv6 address structures, test your knowledge:</p>
                    
                    <p><strong>Question 1:</strong> How many unique IPv4 addresses exist?</p>
                    <p style="font-size: 0.9em; color: #666;"><em>Hint: IPv4 uses a 32-bit address. Calculate 2¬≥¬≤</em></p>
                    <input type="text" id="ipv4Count" placeholder="Enter your answer (e.g., 4.3 billion or the exact number)">
                    <button onclick="checkIPv4Count()">Check Answer</button>
                    <div id="ipv4Result"></div>
                    
                    <p style="margin-top: 20px;"><strong>Question 2:</strong> Approximately how many IPv6 addresses exist?</p>
                    <p style="font-size: 0.9em; color: #666;"><em>Hint: IPv6 uses a 128-bit address. The number is MUCH larger!</em></p>
                    <div class="quiz-option" onclick="selectIPv6Answer(this, false)">A) 4.3 trillion</div>
                    <div class="quiz-option" onclick="selectIPv6Answer(this, false)">B) 340 undecillion (3.4 √ó 10¬≥‚Å∏)</div>
                    <div class="quiz-option" onclick="selectIPv6Answer(this, true)">C) 340 undecillion (3.4 √ó 10¬≥‚Å∏)</div>
                    <div class="quiz-option" onclick="selectIPv6Answer(this, false)">D) 65,536</div>
                    <div id="ipv6AnswerResult"></div>
                </div>
            </div>
        </div>

        <!-- Fundamentals Section -->
        <div id="fundamentals" class="section">
            <div class="content-card">
                <h2>IPv6 Fundamentals</h2>
                
                <h3>Key Differences from IPv4</h3>
                <table>
                    <tr>
                        <th>Feature</th>
                        <th>IPv4</th>
                        <th>IPv6</th>
                    </tr>
                    <tr>
                        <td>Address Length</td>
                        <td>32 bits</td>
                        <td>128 bits</td>
                    </tr>
                    <tr>
                        <td>Notation</td>
                        <td>Dotted Decimal (192.168.1.1)</td>
                        <td>Hexadecimal with colons (2001:db8::1)</td>
                    </tr>
                    <tr>
                        <td>Address Space</td>
                        <td>~4.3 billion addresses</td>
                        <td>~340 undecillion addresses</td>
                    </tr>
                    <tr>
                        <td>Header Size</td>
                        <td>20-60 bytes (variable)</td>
                        <td>40 bytes (fixed)</td>
                    </tr>
                    <tr>
                        <td>Fragmentation</td>
                        <td>Routers and hosts</td>
                        <td>Hosts only</td>
                    </tr>
                    <tr>
                        <td>Broadcast</td>
                        <td>Yes</td>
                        <td>No (uses multicast)</td>
                    </tr>
                    <tr>
                        <td>IPSec</td>
                        <td>Optional</td>
                        <td>Mandatory (in original spec)</td>
                    </tr>
                </table>

                <div class="activity-container">
                    <h3>üîç Interactive: Binary to Hex Converter</h3>
                    <p>IPv6 uses hexadecimal notation. Practice converting 16-bit binary segments to hex:</p>
                    <input type="text" id="binaryInput" placeholder="Enter 16 binary digits (e.g., 0010000000000001)" maxlength="16">
                    <button onclick="convertBinaryToHex()">Convert to Hex</button>
                    <div id="hexResult"></div>
                    
                    <div style="margin-top: 20px;">
                        <p><strong>Try these practice values:</strong></p>
                        <button onclick="document.getElementById('binaryInput').value='0010000000000001'">2001</button>
                        <button onclick="document.getElementById('binaryInput').value='0000110110111000'">0db8</button>
                        <button onclick="document.getElementById('binaryInput').value='1111111111111110'">fffe</button>
                    </div>
                </div>

                <div class="highlight-box">
                    <h3>üéØ Key Concept: IPv6 Structure</h3>
                    <p>An IPv6 address consists of:</p>
                    <ul style="margin-left: 20px;">
                        <li><strong>128 bits</strong> total length</li>
                        <li><strong>8 groups</strong> of 16 bits each (called hextets)</li>
                        <li>Each hextet written as <strong>4 hexadecimal digits</strong></li>
                        <li>Groups separated by <strong>colons (:)</strong></li>
                    </ul>
                    <div class="ipv6-display">
                        2001:0db8:85a3:0000:0000:8a2e:0370:7334
                    </div>
                </div>
            </div>
        </div>

        <!-- Addressing Section -->
        <div id="addressing" class="section">
            <div class="content-card">
                <h2>IPv6 Address Notation & Compression</h2>
                
                <h3>Rule 1: Leading Zero Compression</h3>
                <p>You can omit leading zeros in each hextet:</p>
                <div class="ipv6-display">
                    <div>Full: 2001:0db8:0000:0042:0000:8a2e:0370:7334</div>
                    <div style="color: #28a745;">Compressed: 2001:db8:0:42:0:8a2e:370:7334</div>
                </div>

                <h3>Rule 2: Zero Compression with ::</h3>
                <p>You can replace consecutive groups of zeros with :: (only ONCE per address):</p>
                <div class="ipv6-display">
                    <div>Before: 2001:0db8:0000:0000:0000:0000:0000:0001</div>
                    <div style="color: #28a745;">After: 2001:db8::1</div>
                </div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è Important:</strong> You can only use :: once in an address! Otherwise, it would be ambiguous how many zeros to restore.
                </div>

                <div class="activity-container">
                    <h3>üéÆ Interactive: Address Compression Challenge</h3>
                    <p>Compress this IPv6 address as much as possible:</p>
                    <div class="ipv6-display" id="compressionChallenge">
                        2001:0db8:0000:0000:0000:ff00:0042:8329
                    </div>
                    <input type="text" id="compressedAddress" placeholder="Enter compressed version">
                    <button onclick="checkCompression()">Check My Answer</button>
                    <button onclick="generateNewCompressionChallenge()">New Challenge</button>
                    <div id="compressionResult"></div>
                </div>

                <div class="activity-container">
                    <h3>üîß Interactive: Address Expander</h3>
                    <p>Enter a compressed IPv6 address to see its full form:</p>
                    <input type="text" id="compressedInput" placeholder="e.g., 2001:db8::1">
                    <button onclick="expandAddress()">Expand Address</button>
                    <div id="expandResult"></div>
                </div>

                <h3>Prefix Notation (CIDR)</h3>
                <p>IPv6 uses prefix length notation, just like IPv4 CIDR:</p>
                <div class="ipv6-display">
                    2001:db8:85a3::/48
                </div>
                <p>The /48 means the first 48 bits are the network prefix (3 hextets)</p>

                <div class="interactive-diagram">
                    <h4>Address Breakdown</h4>
                    <div class="ipv6-display">
                        <span class="address-part network-prefix" title="Network Prefix">2001:0db8:85a3</span>:
                        <span class="address-part interface-id" title="Interface ID">0000:0000:8a2e:0370:7334</span>
                    </div>
                    <p><span style="color: #0066cc;">‚ñ†</span> Blue = Network Prefix (first 48 bits)</p>
                    <p><span style="color: #28a745;">‚ñ†</span> Green = Interface ID (last 80 bits)</p>
                </div>
            </div>
        </div>

        <!-- Subnetting Section -->
        <div id="subnetting" class="section">
            <div class="content-card">
                <h2>IPv6 Subnetting</h2>
                
                <h3>Standard Subnet Sizes</h3>
                <table>
                    <tr>
                        <th>Prefix</th>
                        <th>Purpose</th>
                        <th>Number of Subnets</th>
                    </tr>
                    <tr>
                        <td>/32</td>
                        <td>ISP allocation to customer</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>/48</td>
                        <td>Site/Organization</td>
                        <td>65,536 /64 subnets</td>
                    </tr>
                    <tr>
                        <td>/56</td>
                        <td>Small site/Home</td>
                        <td>256 /64 subnets</td>
                    </tr>
                    <tr>
                        <td>/64</td>
                        <td>Single subnet (standard)</td>
                        <td>18 quintillion hosts</td>
                    </tr>
                    <tr>
                        <td>/128</td>
                        <td>Single host</td>
                        <td>1 host</td>
                    </tr>
                </table>

                <div class="highlight-box">
                    <h3>üéØ Best Practice</h3>
                    <p><strong>/64 is the standard subnet size</strong> for IPv6 networks. This allows for:</p>
                    <ul style="margin-left: 20px;">
                        <li>SLAAC (Stateless Address Autoconfiguration)</li>
                        <li>EUI-64 interface ID generation</li>
                        <li>Enough addresses for any foreseeable need</li>
                    </ul>
                </div>

                <div class="activity-container">
                    <h3>üßÆ Interactive: IPv6 Subnet Calculator</h3>
                    <div class="subnet-calculator">
                        <div class="calculator-input">
                            <h4>Input</h4>
                            <label>IPv6 Prefix:</label>
                            <input type="text" id="subnetPrefix" placeholder="e.g., 2001:db8::/32" style="width: 100%;">
                            <label>Subnet Bits to Add:</label>
                            <input type="number" id="subnetBits" min="0" max="64" value="16" style="width: 100%;">
                            <button onclick="calculateSubnets()">Calculate Subnets</button>
                        </div>
                        <div class="calculator-output" id="subnetOutput">
                            <h4>Results</h4>
                            <p>Enter values and click Calculate</p>
                        </div>
                    </div>
                </div>

                <div class="activity-container">
                    <h3>üéØ Practice: Subnet Planning</h3>
                    <p>You have been allocated 2001:db8:abcd::/48 for your organization. Plan subnets for:</p>
                    <ul style="margin-left: 20px;">
                        <li>Building 1 LAN</li>
                        <li>Building 2 LAN</li>
                        <li>Building 3 LAN</li>
                        <li>DMZ</li>
                        <li>Management Network</li>
                    </ul>
                    
                    <p><strong>Building 1 LAN:</strong></p>
                    <input type="text" id="subnet1" placeholder="e.g., 2001:db8:abcd:1::/64">
                    
                    <p><strong>Building 2 LAN:</strong></p>
                    <input type="text" id="subnet2" placeholder="e.g., 2001:db8:abcd:2::/64">
                    
                    <p><strong>Building 3 LAN:</strong></p>
                    <input type="text" id="subnet3" placeholder="e.g., 2001:db8:abcd:3::/64">
                    
                    <button onclick="checkSubnetPlan()">Check My Plan</button>
                    <div id="subnetPlanResult"></div>
                </div>
            </div>
        </div>

        <!-- Address Types Section -->
        <div id="types" class="section">
            <div class="content-card">
                <h2>IPv6 Address Types</h2>
                
                <h3>1. Unicast Addresses</h3>
                <p>Identifies a single interface. Packet delivered to one destination.</p>
                
                <h4>Global Unicast (2000::/3)</h4>
                <div class="ipv6-display">2001:db8:85a3::8a2e:370:7334</div>
                <p>Routable on the internet (like public IPv4 addresses)</p>
                
                <h4>Link-Local (fe80::/10)</h4>
                <div class="ipv6-display">fe80::1</div>
                <p>Automatically configured on all IPv6 interfaces. Not routable beyond local link.</p>
                
                <h4>Unique Local (fc00::/7)</h4>
                <div class="ipv6-display">fd00:1234:5678::1</div>
                <p>Private addresses (like RFC 1918 in IPv4). Not routable on internet.</p>
                
                <h4>Loopback (::1/128)</h4>
                <div class="ipv6-display">::1</div>
                <p>Equivalent to 127.0.0.1 in IPv4</p>

                <h3>2. Multicast Addresses (ff00::/8)</h3>
                <p>Identifies a group of interfaces. Packet delivered to all members.</p>
                <table>
                    <tr>
                        <th>Address</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>ff02::1</td>
                        <td>All nodes on local link</td>
                    </tr>
                    <tr>
                        <td>ff02::2</td>
                        <td>All routers on local link</td>
                    </tr>
                    <tr>
                        <td>ff02::1:ff00:0/104</td>
                        <td>Solicited-node multicast</td>
                    </tr>
                </table>

                <h3>3. Anycast Addresses</h3>
                <p>Assigned to multiple interfaces. Packet delivered to nearest one (by routing metric).</p>
                <div class="success-box">
                    <strong>Note:</strong> IPv6 has NO broadcast addresses! Multicast replaces broadcast functionality.
                </div>

                <div class="activity-container">
                    <h3>üéÆ Drag & Drop: Classify IPv6 Addresses</h3>
                    <p>Drag each address to the correct category:</p>
                    
                    <div style="margin: 20px 0;">
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr1">2001:db8::1</div>
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr2">fe80::1</div>
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr3">ff02::1</div>
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr4">::1</div>
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr5">fd00::1</div>
                        <div class="draggable" draggable="true" ondragstart="drag(event)" id="addr6">ff02::2</div>
                    </div>

                    <div class="drag-drop-container">
                        <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-type="global">
                            <h4>Global Unicast</h4>
                            <div id="global-items"></div>
                        </div>
                        <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-type="link-local">
                            <h4>Link-Local</h4>
                            <div id="link-local-items"></div>
                        </div>
                        <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-type="multicast">
                            <h4>Multicast</h4>
                            <div id="multicast-items"></div>
                        </div>
                        <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-type="loopback">
                            <h4>Loopback</h4>
                            <div id="loopback-items"></div>
                        </div>
                        <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-type="unique-local">
                            <h4>Unique Local</h4>
                            <div id="unique-local-items"></div>
                        </div>
                    </div>
                    <button onclick="checkAddressClassification()">Check Answers</button>
                    <button onclick="resetDragDrop()">Reset</button>
                    <div id="dragDropResult"></div>
                </div>

                <div class="activity-container">
                    <h3>üìù Quick Quiz: Address Types</h3>
                    <p><strong>Question 1:</strong> Which address would you use for router advertisements on a local network?</p>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q1', false)">A) 2001:db8::1</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q1', true)">B) ff02::2</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q1', false)">C) fe80::1</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q1', false)">D) ::1</div>
                    <div id="q1Result"></div>

                    <p style="margin-top: 20px;"><strong>Question 2:</strong> What is the prefix for link-local addresses?</p>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q2', false)">A) fc00::/7</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q2', true)">B) fe80::/10</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q2', false)">C) ff00::/8</div>
                    <div class="quiz-option" onclick="selectQuizAnswer(this, 'q2', false)">D) 2000::/3</div>
                    <div id="q2Result"></div>
                </div>
            </div>
        </div>

        <!-- Configuration Section -->
        <div id="configuration" class="section">
            <div class="content-card">
                <h2>IPv6 Configuration Methods</h2>
                
                <h3>1. Static Configuration</h3>
                <p>Manually assign IPv6 address to interface</p>
                <div class="ipv6-display" style="background-color: #1e1e1e; color: #dcdcaa;">
Router(config)# interface gigabitethernet 0/0<br>
Router(config-if)# ipv6 address 2001:db8:1::1/64<br>
Router(config-if)# ipv6 enable<br>
Router(config-if)# no shutdown
                </div>

                <h3>2. SLAAC (Stateless Address Autoconfiguration)</h3>
                <p>Hosts automatically configure their own IPv6 addresses using:</p>
                <ul style="margin-left: 20px;">
                    <li>Router Advertisement (RA) messages for network prefix</li>
                    <li>EUI-64 or random generation for interface ID</li>
                </ul>
                
                <div class="highlight-box">
                    <h4>EUI-64 Process</h4>
                    <p>Converts MAC address to IPv6 interface ID:</p>
                    <ol style="margin-left: 20px;">
                        <li>Take MAC address: <code>00:1A:2B:3C:4D:5E</code></li>
                        <li>Insert FFFE in middle: <code>00:1A:2B:FF:FE:3C:4D:5E</code></li>
                        <li>Flip 7th bit: <code>02:1A:2B:FF:FE:3C:4D:5E</code></li>
                        <li>Result: <code>021a:2bff:fe3c:4d5e</code></li>
                    </ol>
                </div>

                <div class="activity-container">
                    <h3>üîß Interactive: EUI-64 Calculator</h3>
                    <p>Enter a MAC address to generate the EUI-64 interface ID:</p>
                    <input type="text" id="macAddress" placeholder="e.g., 00:1A:2B:3C:4D:5E">
                    <button onclick="calculateEUI64()">Calculate EUI-64</button>
                    <div id="eui64Result"></div>
                </div>

                <h3>3. DHCPv6 (Stateful Configuration)</h3>
                <p>Server assigns IPv6 addresses, similar to IPv4 DHCP</p>
                <div class="ipv6-display" style="background-color: #1e1e1e; color: #dcdcaa;">
Router(config)# ipv6 dhcp pool IPV6POOL<br>
Router(config-dhcpv6)# address prefix 2001:db8:1::/64<br>
Router(config-dhcpv6)# dns-server 2001:4860:4860::8888<br>
Router(config)# interface gigabitethernet 0/0<br>
Router(config-if)# ipv6 dhcp server IPV6POOL
                </div>

                <h3>Enabling IPv6 Routing</h3>
                <div class="ipv6-display" style="background-color: #1e1e1e; color: #dcdcaa;">
Router(config)# ipv6 unicast-routing
                </div>

                <div class="activity-container">
                    <h3>üéØ Configuration Challenge</h3>
                    <p>Configure the following scenario:</p>
                    <div class="highlight-box">
                        <strong>Scenario:</strong> You need to configure a router interface with:
                        <ul style="margin-left: 20px;">
                            <li>IPv6 address: 2001:db8:cafe:1::1</li>
                            <li>Prefix length: /64</li>
                            <li>Interface: GigabitEthernet 0/1</li>
                        </ul>
                    </div>
                    
                    <p>Write the commands (one per line):</p>
                    <textarea id="configCommands" rows="5" style="width: 100%; padding: 10px; font-family: monospace;"></textarea>
                    <button onclick="checkConfiguration()">Check Configuration</button>
                    <div id="configResult"></div>
                </div>

                <h3>Verification Commands</h3>
                <table>
                    <tr>
                        <th>Command</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>show ipv6 interface brief</td>
                        <td>Display IPv6 addresses on all interfaces</td>
                    </tr>
                    <tr>
                        <td>show ipv6 route</td>
                        <td>Display IPv6 routing table</td>
                    </tr>
                    <tr>
                        <td>show ipv6 neighbors</td>
                        <td>Display IPv6 neighbor cache (like ARP)</td>
                    </tr>
                    <tr>
                        <td>ping ipv6 <i>address</i></td>
                        <td>Test IPv6 connectivity</td>
                    </tr>
                    <tr>
                        <td>traceroute ipv6 <i>address</i></td>
                        <td>Trace IPv6 path to destination</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Practice Labs Section -->
        <div id="practice" class="section">
            <div class="content-card">
                <h2>Practice Labs</h2>
                
                <div class="activity-container">
                    <h3>üî¨ Lab 1: Address Validation</h3>
                    <p>Determine if each IPv6 address is valid or invalid:</p>
                    
                    <div style="margin: 15px 0;">
                        <div class="ipv6-display">2001:0db8:85a3::8a2e:0370:7334</div>
                        <button onclick="validateLab(1, true)">Valid</button>
                        <button onclick="validateLab(1, false)">Invalid</button>
                        <div id="lab1Result"></div>
                    </div>

                    <div style="margin: 15px 0;">
                        <div class="ipv6-display">2001:db8::8a2e::7334</div>
                        <button onclick="validateLab(2, true)">Valid</button>
                        <button onclick="validateLab(2, false)">Invalid</button>
                        <div id="lab2Result"></div>
                    </div>

                    <div style="margin: 15px 0;">
                        <div class="ipv6-display">fe80:0000:0000:0000:0202:b3ff:fe1e:8329</div>
                        <button onclick="validateLab(3, true)">Valid</button>
                        <button onclick="validateLab(3, false)">Invalid</button>
                        <div id="lab3Result"></div>
                    </div>

                    <div style="margin: 15px 0;">
                        <div class="ipv6-display">2001:db8:85a3::8a2g:370:7334</div>
                        <button onclick="validateLab(4, true)">Valid</button>
                        <button onclick="validateLab(4, false)">Invalid</button>
                        <div id="lab4Result"></div>
                    </div>
                </div>

                <div class="activity-container">
                    <h3>üî¨ Lab 2: Subnet Design Exercise</h3>
                    <p><strong>Scenario:</strong> Your company has been allocated 2001:db8:acad::/48</p>
                    <p>Design a subnet plan for the following departments, each needing a /64:</p>
                    <ul style="margin-left: 20px;">
                        <li>Finance (Subnet 10)</li>
                        <li>HR (Subnet 20)</li>
                        <li>IT (Subnet 30)</li>
                        <li>Sales (Subnet 40)</li>
                    </ul>

                    <p><strong>Finance Department:</strong></p>
                    <input type="text" id="financeSubnet" placeholder="Enter subnet">
                    
                    <p><strong>HR Department:</strong></p>
                    <input type="text" id="hrSubnet" placeholder="Enter subnet">
                    
                    <p><strong>IT Department:</strong></p>
                    <input type="text" id="itSubnet" placeholder="Enter subnet">
                    
                    <p><strong>Sales Department:</strong></p>
                    <input type="text" id="salesSubnet" placeholder="Enter subnet">
                    
                    <button onclick="checkSubnetDesign()">Check Design</button>
                    <div id="subnetDesignResult"></div>
                </div>

                <div class="activity-container">
                    <h3>üî¨ Lab 3: Neighbor Discovery Protocol</h3>
                    <p>Match each ICMPv6 message type with its function:</p>
                    
                    <table>
                        <tr>
                            <th>Message Type</th>
                            <th>Function</th>
                            <th>Your Answer</th>
                        </tr>
                        <tr>
                            <td>Router Solicitation (RS)</td>
                            <td>
                                <select id="ndp1">
                                    <option value="">Select...</option>
                                    <option value="a">Request router information</option>
                                    <option value="b">Advertise router presence</option>
                                    <option value="c">Resolve IPv6 to MAC</option>
                                    <option value="d">Detect duplicate addresses</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Router Advertisement (RA)</td>
                            <td>
                                <select id="ndp2">
                                    <option value="">Select...</option>
                                    <option value="a">Request router information</option>
                                    <option value="b">Advertise router presence</option>
                                    <option value="c">Resolve IPv6 to MAC</option>
                                    <option value="d">Detect duplicate addresses</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Neighbor Solicitation (NS)</td>
                            <td>
                                <select id="ndp3">
                                    <option value="">Select...</option>
                                    <option value="a">Request router information</option>
                                    <option value="b">Advertise router presence</option>
                                    <option value="c">Resolve IPv6 to MAC</option>
                                    <option value="d">Detect duplicate addresses</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Duplicate Address Detection (DAD)</td>
                            <td>
                                <select id="ndp4">
                                    <option value="">Select...</option>
                                    <option value="a">Request router information</option>
                                    <option value="b">Advertise router presence</option>
                                    <option value="c">Resolve IPv6 to MAC</option>
                                    <option value="d">Detect duplicate addresses</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                    <button onclick="checkNDP()">Check Answers</button>
                    <div id="ndpResult"></div>
                </div>
            </div>
        </div>

        <!-- Assessment Section -->
        <div id="assessment" class="section">
            <div class="content-card">
                <h2>Final Assessment</h2>
                <p>Test your IPv6 knowledge with this comprehensive quiz!</p>

                <div class="activity-container">
                    <h3>Question 1 of 10</h3>
                    <p><strong>What is the maximum number of times you can use :: in an IPv6 address?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(1, 'a', false)">A) Unlimited</div>
                    <div class="quiz-option" onclick="assessmentAnswer(1, 'b', true)">B) Once</div>
                    <div class="quiz-option" onclick="assessmentAnswer(1, 'c', false)">C) Twice</div>
                    <div class="quiz-option" onclick="assessmentAnswer(1, 'd', false)">D) Never</div>
                    <div id="assess1"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 2 of 10</h3>
                    <p><strong>What is the standard subnet size for IPv6 networks?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(2, 'a', false)">A) /48</div>
                    <div class="quiz-option" onclick="assessmentAnswer(2, 'b', false)">B) /56</div>
                    <div class="quiz-option" onclick="assessmentAnswer(2, 'c', true)">C) /64</div>
                    <div class="quiz-option" onclick="assessmentAnswer(2, 'd', false)">D) /128</div>
                    <div id="assess2"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 3 of 10</h3>
                    <p><strong>Which protocol allows hosts to automatically configure IPv6 addresses?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(3, 'a', false)">A) DHCPv6</div>
                    <div class="quiz-option" onclick="assessmentAnswer(3, 'b', true)">B) SLAAC</div>
                    <div class="quiz-option" onclick="assessmentAnswer(3, 'c', false)">C) NDP</div>
                    <div class="quiz-option" onclick="assessmentAnswer(3, 'd', false)">D) ICMPv6</div>
                    <div id="assess3"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 4 of 10</h3>
                    <p><strong>What is the IPv6 loopback address?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(4, 'a', false)">A) 127.0.0.1</div>
                    <div class="quiz-option" onclick="assessmentAnswer(4, 'b', true)">B) ::1</div>
                    <div class="quiz-option" onclick="assessmentAnswer(4, 'c', false)">C) fe80::1</div>
                    <div class="quiz-option" onclick="assessmentAnswer(4, 'd', false)">D) ff02::1</div>
                    <div id="assess4"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 5 of 10</h3>
                    <p><strong>Which address range is used for link-local addresses?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(5, 'a', false)">A) fc00::/7</div>
                    <div class="quiz-option" onclick="assessmentAnswer(5, 'b', true)">B) fe80::/10</div>
                    <div class="quiz-option" onclick="assessmentAnswer(5, 'c', false)">C) ff00::/8</div>
                    <div class="quiz-option" onclick="assessmentAnswer(5, 'd', false)">D) 2000::/3</div>
                    <div id="assess5"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 6 of 10</h3>
                    <p><strong>How many bits are in an IPv6 address?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(6, 'a', false)">A) 32</div>
                    <div class="quiz-option" onclick="assessmentAnswer(6, 'b', false)">B) 64</div>
                    <div class="quiz-option" onclick="assessmentAnswer(6, 'c', true)">C) 128</div>
                    <div class="quiz-option" onclick="assessmentAnswer(6, 'd', false)">D) 256</div>
                    <div id="assess6"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 7 of 10</h3>
                    <p><strong>What replaces broadcast in IPv6?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(7, 'a', false)">A) Unicast</div>
                    <div class="quiz-option" onclick="assessmentAnswer(7, 'b', true)">B) Multicast</div>
                    <div class="quiz-option" onclick="assessmentAnswer(7, 'c', false)">C) Anycast</div>
                    <div class="quiz-option" onclick="assessmentAnswer(7, 'd', false)">D) Geocast</div>
                    <div id="assess7"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 8 of 10</h3>
                    <p><strong>What command enables IPv6 routing on a Cisco router?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(8, 'a', false)">A) ipv6 enable</div>
                    <div class="quiz-option" onclick="assessmentAnswer(8, 'b', false)">B) ipv6 routing</div>
                    <div class="quiz-option" onclick="assessmentAnswer(8, 'c', true)">C) ipv6 unicast-routing</div>
                    <div class="quiz-option" onclick="assessmentAnswer(8, 'd', false)">D) enable ipv6</div>
                    <div id="assess8"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 9 of 10</h3>
                    <p><strong>Which ICMPv6 message type is used to resolve IPv6 addresses to MAC addresses?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(9, 'a', false)">A) Router Solicitation</div>
                    <div class="quiz-option" onclick="assessmentAnswer(9, 'b', false)">B) Router Advertisement</div>
                    <div class="quiz-option" onclick="assessmentAnswer(9, 'c', true)">C) Neighbor Solicitation</div>
                    <div class="quiz-option" onclick="assessmentAnswer(9, 'd', false)">D) Redirect</div>
                    <div id="assess9"></div>
                </div>

                <div class="activity-container">
                    <h3>Question 10 of 10</h3>
                    <p><strong>What is the prefix for unique local addresses?</strong></p>
                    <div class="quiz-option" onclick="assessmentAnswer(10, 'a', true)">A) fc00::/7</div>
                    <div class="quiz-option" onclick="assessmentAnswer(10, 'b', false)">B) fe80::/10</div>
                    <div class="quiz-option" onclick="assessmentAnswer(10, 'c', false)">C) ff00::/8</div>
                    <div class="quiz-option" onclick="assessmentAnswer(10, 'd', false)">D) 2000::/3</div>
                    <div id="assess10"></div>
                </div>

                <button onclick="calculateAssessmentScore()" style="font-size: 1.2em; padding: 15px 40px;">Calculate Final Score</button>
                <div id="finalScore"></div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; 2024 IPv6 Mastery Training Module | Designed for Network Technician Education</p>
        <p>Continue learning and practicing to master IPv6 networking!</p>
    </div>

    <script>
        // Navigation
        let currentSection = 'intro';
        const assessmentAnswers = {};

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            currentSection = sectionId;
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            updateProgress();
        }

        function updateProgress() {
            const sections = ['intro', 'fundamentals', 'addressing', 'subnetting', 'types', 'configuration', 'practice', 'assessment'];
            const currentIndex = sections.indexOf(currentSection);
            const progress = ((currentIndex + 1) / sections.length) * 100;
            const progressBar = document.getElementById('mainProgress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        // Introduction Activities
        function checkIPv4Count() {
            const input = document.getElementById('ipv4Count').value.trim();
            const result = document.getElementById('ipv4Result');
            const correctAnswers = ['4294967296', '4.3 billion', '4,294,967,296', '2^32'];
            
            if (correctAnswers.some(ans => input.toLowerCase().includes(ans.toLowerCase())) || 
                input.includes('4') && input.includes('billion')) {
                result.innerHTML = '<div class="success-box">‚úì Correct! IPv4 has approximately 4.3 billion addresses (2¬≥¬≤ = 4,294,967,296). This seemed like a lot in the 1980s, but we ran out!</div>';
            } else {
                result.innerHTML = '<div class="warning-box">Not quite. Think about 2¬≥¬≤ or approximately 4.3 billion addresses.</div>';
            }
        }

        function selectIPv6Answer(element, isCorrect) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                document.getElementById('ipv6AnswerResult').innerHTML = 
                    '<div class="success-box">‚úì Excellent! IPv6 provides 340 undecillion addresses (340,282,366,920,938,463,463,374,607,431,768,211,456 to be exact). That\'s enough to assign billions of addresses to every person on Earth!</div>';
            } else {
                element.classList.add('incorrect');
                document.getElementById('ipv6AnswerResult').innerHTML = 
                    '<div class="warning-box">Try again! Think about the massive expansion from IPv4.</div>';
            }
        }

        // Binary to Hex Converter
        function convertBinaryToHex() {
            const binary = document.getElementById('binaryInput').value.trim();
            const result = document.getElementById('hexResult');
            
            if (!/^[01]{16}$/.test(binary)) {
                result.innerHTML = '<div class="warning-box">Please enter exactly 16 binary digits (0s and 1s).</div>';
                return;
            }
            
            const hex = parseInt(binary, 2).toString(16).padStart(4, '0');
            result.innerHTML = `<div class="success-box">
                <strong>Binary:</strong> ${binary}<br>
                <strong>Hexadecimal:</strong> ${hex}<br>
                <strong>Explanation:</strong> Each group of 4 binary digits converts to 1 hex digit.
            </div>`;
        }

        // Address Compression
        const compressionChallenges = [
            { full: '2001:0db8:0000:0000:0000:ff00:0042:8329', compressed: '2001:db8::ff00:42:8329' },
            { full: '2001:0db8:0001:0000:0000:0000:0000:0001', compressed: '2001:db8:1::1' },
            { full: 'fe80:0000:0000:0000:0202:b3ff:fe1e:8329', compressed: 'fe80::202:b3ff:fe1e:8329' },
            { full: '2001:0db8:0000:0042:0000:8a2e:0370:7334', compressed: '2001:db8:0:42:0:8a2e:370:7334' }
        ];
        let currentChallenge = 0;

        function generateNewCompressionChallenge() {
            currentChallenge = Math.floor(Math.random() * compressionChallenges.length);
            document.getElementById('compressionChallenge').textContent = compressionChallenges[currentChallenge].full;
            document.getElementById('compressedAddress').value = '';
            document.getElementById('compressionResult').innerHTML = '';
        }

        function checkCompression() {
            const userAnswer = document.getElementById('compressedAddress').value.trim().toLowerCase();
            const correct = compressionChallenges[currentChallenge].compressed.toLowerCase();
            const result = document.getElementById('compressionResult');
            
            if (userAnswer === correct) {
                result.innerHTML = '<div class="success-box">‚úì Perfect! You correctly compressed the address!</div>';
            } else {
                result.innerHTML = `<div class="warning-box">Not quite. The correct answer is: <strong>${compressionChallenges[currentChallenge].compressed}</strong><br>
                Remember: Remove leading zeros and replace the longest run of consecutive zero groups with ::</div>`;
            }
        }

        // Address Expander
        function expandAddress() {
            const compressed = document.getElementById('compressedInput').value.trim();
            const result = document.getElementById('expandResult');
            
            try {
                const expanded = expandIPv6(compressed);
                result.innerHTML = `<div class="success-box">
                    <strong>Compressed:</strong> ${compressed}<br>
                    <strong>Expanded:</strong> <span class="ipv6-display">${expanded}</span>
                </div>`;
            } catch (error) {
                result.innerHTML = '<div class="warning-box">Invalid IPv6 address format.</div>';
            }
        }

        function expandIPv6(addr) {
            if (addr.includes('::')) {
                const parts = addr.split('::');
                const left = parts[0] ? parts[0].split(':') : [];
                const right = parts[1] ? parts[1].split(':') : [];
                const missing = 8 - (left.length + right.length);
                const middle = Array(missing).fill('0000');
                const all = [...left, ...middle, ...right];
                return all.map(h => h.padStart(4, '0')).join(':');
            }
            return addr.split(':').map(h => h.padStart(4, '0')).join(':');
        }

        // Subnet Calculator
        function calculateSubnets() {
            const prefix = document.getElementById('subnetPrefix').value.trim();
            const subnetBits = parseInt(document.getElementById('subnetBits').value);
            const output = document.getElementById('subnetOutput');
            
            const match = prefix.match(/^([0-9a-f:]+)\/(\d+)$/i);
            if (!match) {
                output.innerHTML = '<p style="color: red;">Invalid prefix format. Use format like 2001:db8::/32</p>';
                return;
            }
            
            const basePrefix = parseInt(match[2]);
            const newPrefix = basePrefix + subnetBits;
            const numSubnets = Math.pow(2, subnetBits);
            
            let html = '<h4>Results</h4>';
            html += `<p><strong>Original Prefix:</strong> /${basePrefix}</p>`;
            html += `<p><strong>New Prefix:</strong> /${newPrefix}</p>`;
            html += `<p><strong>Number of Subnets:</strong> ${numSubnets.toLocaleString()}</p>`;
            html += `<p><strong>Hosts per Subnet:</strong> ${Math.pow(2, 128 - newPrefix).toExponential(2)}</p>`;
            
            if (numSubnets <= 16) {
                html += '<h4>First Few Subnets:</h4>';
                html += '<div class="ipv6-display">';
                for (let i = 0; i < Math.min(numSubnets, 10); i++) {
                    const subnetHex = i.toString(16).padStart(4, '0');
                    html += `${match[1].split('/')[0]}:${subnetHex}::/${newPrefix}<br>`;
                }
                html += '</div>';
            }
            
            output.innerHTML = html;
        }

        // EUI-64 Calculator
        function calculateEUI64() {
            const mac = document.getElementById('macAddress').value.trim().replace(/[:-]/g, '');
            const result = document.getElementById('eui64Result');
            
            if (!/^[0-9a-f]{12}$/i.test(mac)) {
                result.innerHTML = '<div class="warning-box">Invalid MAC address. Use format like 00:1A:2B:3C:4D:5E</div>';
                return;
            }
            
            // Convert MAC to EUI-64
            const part1 = mac.substring(0, 6);
            const part2 = mac.substring(6, 12);
            const eui64 = part1 + 'fffe' + part2;
            
            // Flip 7th bit
            const firstByte = parseInt(eui64.substring(0, 2), 16);
            const flipped = (firstByte ^ 0x02).toString(16).padStart(2, '0');
            const final = flipped + eui64.substring(2);
            
            // Format as IPv6
            const formatted = final.match(/.{1,4}/g).join(':');
            
            result.innerHTML = `<div class="success-box">
                <strong>Original MAC:</strong> ${mac.match(/.{1,2}/g).join(':')}<br>
                <strong>Insert FFFE:</strong> ${part1}:fffe:${part2}<br>
                <strong>Flip 7th bit:</strong> ${flipped}${eui64.substring(2)}<br>
                <strong>EUI-64 Interface ID:</strong> <span class="ipv6-display">${formatted}</span>
            </div>`;
        }

        // Configuration Checker
        function checkConfiguration() {
            const commands = document.getElementById('configCommands').value.toLowerCase();
            const result = document.getElementById('configResult');
            
            const required = [
                'interface gigabitethernet 0/1',
                'ipv6 address 2001:db8:cafe:1::1/64',
                'ipv6 enable',
                'no shutdown'
            ];
            
            let correct = 0;
            let feedback = '<div class="result">';
            
            required.forEach(cmd => {
                if (commands.includes(cmd)) {
                    correct++;
                    feedback += `‚úì ${cmd}<br>`;
                } else {
                    feedback += `‚úó Missing or incorrect: ${cmd}<br>`;
                }
            });
            
            feedback += '</div>';
            
            if (correct === required.length) {
                result.innerHTML = '<div class="success-box"><strong>Perfect!</strong> All commands are correct.' + feedback + '</div>';
            } else {
                result.innerHTML = '<div class="warning-box"><strong>Not quite.</strong> Check the feedback below:' + feedback + '</div>';
            }
        }

        // Drag and Drop
        const addressTypes = {
            'addr1': 'global',
            'addr2': 'link-local',
            'addr3': 'multicast',
            'addr4': 'loopback',
            'addr5': 'unique-local',
            'addr6': 'multicast'
        };

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const dropZone = ev.target.closest('.drop-zone');
            if (dropZone) {
                dropZone.appendChild(document.getElementById(data));
            }
        }

        function checkAddressClassification() {
            let correct = 0;
            let total = Object.keys(addressTypes).length;
            
            for (let addrId in addressTypes) {
                const element = document.getElementById(addrId);
                const dropZone = element.closest('.drop-zone');
                if (dropZone && dropZone.dataset.type === addressTypes[addrId]) {
                    correct++;
                    element.style.backgroundColor = '#28a745';
                } else {
                    element.style.backgroundColor = '#dc3545';
                }
            }
            
            const result = document.getElementById('dragDropResult');
            const percentage = (correct / total) * 100;
            
            if (percentage === 100) {
                result.innerHTML = '<div class="success-box">üéâ Perfect! All addresses classified correctly!</div>';
            } else {
                result.innerHTML = `<div class="warning-box">You got ${correct} out of ${total} correct. Green = correct, Red = incorrect. Try again!</div>`;
            }
        }

        function resetDragDrop() {
            const container = document.querySelector('.activity-container');
            const addresses = ['addr1', 'addr2', 'addr3', 'addr4', 'addr5', 'addr6'];
            addresses.forEach(id => {
                const element = document.getElementById(id);
                element.style.backgroundColor = '#0066cc';
                container.insertBefore(element, container.querySelector('.drag-drop-container'));
            });
            document.getElementById('dragDropResult').innerHTML = '';
        }

        // Quiz Functions
        function selectQuizAnswer(element, questionId, isCorrect) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.style.pointerEvents = 'none';
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                document.getElementById(questionId + 'Result').innerHTML = 
                    '<div class="success-box">‚úì Correct!</div>';
            } else {
                element.classList.add('incorrect');
                document.getElementById(questionId + 'Result').innerHTML = 
                    '<div class="warning-box">Incorrect. Try reviewing the material.</div>';
            }
        }

        // Lab Validation
        const labAnswers = {
            1: true,   // Valid
            2: false,  // Invalid - double ::
            3: true,   // Valid
            4: false   // Invalid - contains 'g'
        };

        function validateLab(labNum, userAnswer) {
            const result = document.getElementById(`lab${labNum}Result`);
            const isCorrect = labAnswers[labNum] === userAnswer;
            
            if (isCorrect) {
                result.innerHTML = '<div class="success-box">‚úì Correct!</div>';
            } else {
                const explanation = labNum === 2 ? 'This address uses :: twice, which is invalid.' :
                                  labNum === 4 ? 'This address contains "g" which is not a valid hex digit.' : '';
                result.innerHTML = `<div class="warning-box">‚úó Incorrect. ${explanation}</div>`;
            }
        }

        // Subnet Design
        function checkSubnetDesign() {
            const finance = document.getElementById('financeSubnet').value.toLowerCase();
            const hr = document.getElementById('hrSubnet').value.toLowerCase();
            const it = document.getElementById('itSubnet').value.toLowerCase();
            const sales = document.getElementById('salesSubnet').value.toLowerCase();
            const result = document.getElementById('subnetDesignResult');
            
            const correctAnswers = {
                finance: '2001:db8:acad:a::/64',
                hr: '2001:db8:acad:14::/64',
                it: '2001:db8:acad:1e::/64',
                sales: '2001:db8:acad:28::/64'
            };
            
            let feedback = '<div class="result">';
            let correct = 0;
            
            if (finance === correctAnswers.finance) {
                feedback += '‚úì Finance subnet correct<br>';
                correct++;
            } else {
                feedback += `‚úó Finance should be ${correctAnswers.finance}<br>`;
            }
            
            if (hr === correctAnswers.hr) {
                feedback += '‚úì HR subnet correct<br>';
                correct++;
            } else {
                feedback += `‚úó HR should be ${correctAnswers.hr}<br>`;
            }
            
            if (it === correctAnswers.it) {
                feedback += '‚úì IT subnet correct<br>';
                correct++;
            } else {
                feedback += `‚úó IT should be ${correctAnswers.it}<br>`;
            }
            
            if (sales === correctAnswers.sales) {
                feedback += '‚úì Sales subnet correct<br>';
                correct++;
            } else {
                feedback += `‚úó Sales should be ${correctAnswers.sales}<br>`;
            }
            
            feedback += '</div>';
            
            if (correct === 4) {
                result.innerHTML = '<div class="success-box">Perfect! All subnets designed correctly!' + feedback + '</div>';
            } else {
                result.innerHTML = '<div class="warning-box">Some subnets need adjustment. Hint: Convert decimal subnet numbers to hexadecimal.' + feedback + '</div>';
            }
        }

        // NDP Quiz
        function checkNDP() {
            const answers = {
                ndp1: 'a',  // RS requests router info
                ndp2: 'b',  // RA advertises router
                ndp3: 'c',  // NS resolves addresses
                ndp4: 'd'   // DAD detects duplicates
            };
            
            let correct = 0;
            for (let id in answers) {
                const select = document.getElementById(id);
                if (select.value === answers[id]) {
                    correct++;
                    select.style.backgroundColor = '#d4edda';
                } else {
                    select.style.backgroundColor = '#f8d7da';
                }
            }
            
            const result = document.getElementById('ndpResult');
            if (correct === 4) {
                result.innerHTML = '<div class="success-box">‚úì Perfect! All NDP messages matched correctly!</div>';
            } else {
                result.innerHTML = `<div class="warning-box">You got ${correct} out of 4 correct. Review the highlighted answers.</div>`;
            }
        }

        // Assessment
        function assessmentAnswer(questionNum, choice, isCorrect) {
            assessmentAnswers[questionNum] = isCorrect;
            const result = document.getElementById(`assess${questionNum}`);
            
            if (isCorrect) {
                result.innerHTML = '<div class="success-box">‚úì Correct!</div>';
            } else {
                result.innerHTML = '<div class="warning-box">‚úó Incorrect</div>';
            }
        }

        function calculateAssessmentScore() {
            const total = 10;
            let correct = 0;
            
            for (let i = 1; i <= total; i++) {
                if (assessmentAnswers[i] === true) {
                    correct++;
                }
            }
            
            const percentage = (correct / total) * 100;
            const result = document.getElementById('finalScore');
            
            let grade, message;
            if (percentage >= 90) {
                grade = 'A';
                message = 'Outstanding! You have mastered IPv6 concepts!';
            } else if (percentage >= 80) {
                grade = 'B';
                message = 'Great job! You have a strong understanding of IPv6.';
            } else if (percentage >= 70) {
                grade = 'C';
                message = 'Good effort. Review the sections where you struggled.';
            } else {
                grade = 'F';
                message = 'Keep studying. Review all sections and try again.';
            }
            
            result.innerHTML = `<div class="success-box" style="font-size: 1.2em; text-align: center; padding: 30px;">
                <h2>Final Score: ${correct}/${total} (${percentage}%)</h2>
                <h3>Grade: ${grade}</h3>
                <p>${message}</p>
            </div>`;
            
            window.scrollTo({ top: document.getElementById('finalScore').offsetTop - 100, behavior: 'smooth' });
        }

        function checkSubnetPlan() {
            // Basic validation for subnet planning activity
            const subnet1 = document.getElementById('subnet1').value.toLowerCase();
            const subnet2 = document.getElementById('subnet2').value.toLowerCase();
            const subnet3 = document.getElementById('subnet3').value.toLowerCase();
            const result = document.getElementById('subnetPlanResult');
            
            if (subnet1.includes('2001:db8:abcd') && subnet1.includes('/64') &&
                subnet2.includes('2001:db8:abcd') && subnet2.includes('/64') &&
                subnet3.includes('2001:db8:abcd') && subnet3.includes('/64')) {
                result.innerHTML = '<div class="success-box">Good start! Make sure each subnet has a unique subnet ID in the 4th hextet.</div>';
            } else {
                result.innerHTML = '<div class="warning-box">Remember to use the /48 prefix provided and create /64 subnets by adding values to the 4th hextet.</div>';
            }
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>
