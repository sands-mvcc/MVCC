<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POP3 Protocol - Interactive Learning Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            color: #1a1a1a;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 100, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #006400 0%, #228B22 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .nav-tabs {
            display: flex;
            background: #f0f0f0;
            border-bottom: 3px solid #228B22;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            background: #e8e8e8;
            border: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            color: #1a1a1a;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #d0d0d0;
        }

        .nav-tab.active {
            background: white;
            color: #006400;
            border-bottom: 3px solid #006400;
            margin-bottom: -3px;
        }

        .content-section {
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .intro-box {
            background: linear-gradient(135deg, #e8f5e9 0%, #f1f8f4 100%);
            border-left: 5px solid #228B22;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .protocol-flow {
            background: white;
            border: 2px solid #228B22;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #006400;
            transition: all 0.3s;
        }

        .flow-step:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(0, 100, 0, 0.15);
        }

        .flow-number {
            background: #006400;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
        }

        .flow-title {
            font-weight: 600;
            color: #006400;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .command-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .command-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .command-card:hover {
            border-color: #228B22;
            box-shadow: 0 6px 20px rgba(34, 139, 34, 0.15);
            transform: translateY(-5px);
        }

        .command-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .command-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #006400;
            font-family: 'Courier New', monospace;
        }

        .command-type {
            background: #228B22;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .command-description {
            color: #333;
            margin: 10px 0;
        }

        .command-example {
            background: #f5f5f5;
            border-left: 3px solid #228B22;
            padding: 12px;
            margin-top: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            border-radius: 4px;
        }

        .simulator {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            color: #00ff00;
            font-family: 'Courier New', monospace;
        }

        .simulator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #228B22;
        }

        .simulator-title {
            color: #00ff00;
            font-size: 1.2em;
            font-weight: bold;
        }

        .terminal-window {
            background: #000;
            border: 2px solid #228B22;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .terminal-line {
            margin: 8px 0;
            line-height: 1.5;
        }

        .client-command {
            color: #00ff00;
        }

        .server-response {
            color: #4CAF50;
        }

        .error-response {
            color: #ff4444;
        }

        .info-text {
            color: #888;
        }

        .control-panel {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: #228B22;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #006400;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(34, 139, 34, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #666;
        }

        .btn-secondary:hover {
            background: #444;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .input-field {
            flex: 1;
            padding: 12px;
            border: 2px solid #228B22;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .reference-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .reference-table th {
            background: #006400;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .reference-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .reference-table tr:hover {
            background: #f8f9fa;
        }

        .highlight {
            background: #fff59d;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-connected {
            background: #4CAF50;
            box-shadow: 0 0 8px #4CAF50;
        }

        .status-disconnected {
            background: #888;
        }

        .info-banner {
            background: linear-gradient(135deg, #e3f2fd 0%, #f1f8e9 100%);
            border-left: 5px solid #006400;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-banner h3 {
            color: #006400;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
        }

        .quiz-question {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #228B22;
        }

        .quiz-options {
            margin: 15px 0;
        }

        .quiz-option {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #228B22;
            background: #f8f9fa;
        }

        .quiz-option.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        @media (max-width: 768px) {
            .command-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .content-section {
                padding: 20px;
            }
        }

        .key-concept {
            background: #e8f5e9;
            border-left: 4px solid #228B22;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .key-concept strong {
            color: #006400;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìß POP3 Protocol</h1>
            <p class="subtitle">Post Office Protocol Version 3 - Interactive Learning Module</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('overview')">Overview</button>
            <button class="nav-tab" onclick="switchTab('commands')">Commands</button>
            <button class="nav-tab" onclick="switchTab('simulator')">Live Simulator</button>
            <button class="nav-tab" onclick="switchTab('flow')">Protocol Flow</button>
            <button class="nav-tab" onclick="switchTab('reference')">Quick Reference</button>
        </div>

        <div class="content-section">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <div class="intro-box">
                    <h2 style="color: #006400; margin-bottom: 15px;">What is POP3?</h2>
                    <p><strong>POP3 (Post Office Protocol version 3)</strong> is an application-layer protocol used by email clients to retrieve emails from a mail server. It operates over TCP port 110 (or 995 for SSL/TLS) and provides a simple, straightforward method for downloading messages to your local device.</p>
                </div>

                <div class="key-concept">
                    <strong>üéØ Key Characteristic:</strong> POP3 is designed for <span class="highlight">offline email access</span> - it downloads messages from the server to your device and typically deletes them from the server afterward.
                </div>

                <h3 style="color: #006400; margin: 30px 0 15px 0;">Why Learn POP3?</h3>
                <div class="command-grid">
                    <div class="command-card">
                        <h4 style="color: #006400;">üîç Protocol Analysis</h4>
                        <p>Understanding POP3 helps you analyze network traffic and troubleshoot email connectivity issues.</p>
                    </div>
                    <div class="command-card">
                        <h4 style="color: #006400;">üõ°Ô∏è Security Awareness</h4>
                        <p>Learn how email protocols work to identify security vulnerabilities and implement proper protections.</p>
                    </div>
                    <div class="command-card">
                        <h4 style="color: #006400;">üí° Foundational Knowledge</h4>
                        <p>POP3 is fundamental to understanding email systems and client-server communication patterns.</p>
                    </div>
                </div>

                <div class="info-banner">
                    <h3>POP3 vs. IMAP vs. SMTP</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>POP3:</strong> Downloads emails to local device, typically removes from server</li>
                        <li><strong>IMAP:</strong> Syncs emails across devices, keeps messages on server</li>
                        <li><strong>SMTP:</strong> Sends outgoing emails (different protocol entirely)</li>
                    </ul>
                </div>
            </div>

            <!-- Commands Tab -->
            <div id="commands" class="tab-content">
                <h2 style="color: #006400; margin-bottom: 20px;">POP3 Commands & Responses</h2>
                
                <h3 style="color: #228B22; margin: 30px 0 20px 0;">Client Commands</h3>
                <div class="command-grid">
                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">USER</span>
                            <span class="command-type">Auth</span>
                        </div>
                        <p class="command-description">Specifies the username for authentication.</p>
                        <div class="command-example">
                            C: USER john.doe<br>
                            S: +OK User accepted
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">PASS</span>
                            <span class="command-type">Auth</span>
                        </div>
                        <p class="command-description">Provides the password for authentication.</p>
                        <div class="command-example">
                            C: PASS mypassword<br>
                            S: +OK Logged in
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">STAT</span>
                            <span class="command-type">Info</span>
                        </div>
                        <p class="command-description">Requests mailbox statistics (message count and total size).</p>
                        <div class="command-example">
                            C: STAT<br>
                            S: +OK 5 3420
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">LIST</span>
                            <span class="command-type">Info</span>
                        </div>
                        <p class="command-description">Lists all messages with their sizes.</p>
                        <div class="command-example">
                            C: LIST<br>
                            S: +OK 5 messages<br>
                            S: 1 820<br>
                            S: 2 1240<br>
                            S: .
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">RETR</span>
                            <span class="command-type">Retrieve</span>
                        </div>
                        <p class="command-description">Retrieves the full content of a specific message.</p>
                        <div class="command-example">
                            C: RETR 1<br>
                            S: +OK 820 octets<br>
                            S: [message content]<br>
                            S: .
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">DELE</span>
                            <span class="command-type">Delete</span>
                        </div>
                        <p class="command-description">Marks a message for deletion (deleted on QUIT).</p>
                        <div class="command-example">
                            C: DELE 1<br>
                            S: +OK Message deleted
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">NOOP</span>
                            <span class="command-type">Utility</span>
                        </div>
                        <p class="command-description">No operation - keeps connection alive.</p>
                        <div class="command-example">
                            C: NOOP<br>
                            S: +OK
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">RSET</span>
                            <span class="command-type">Utility</span>
                        </div>
                        <p class="command-description">Resets session, unmarks deleted messages.</p>
                        <div class="command-example">
                            C: RSET<br>
                            S: +OK Reset
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">QUIT</span>
                            <span class="command-type">Session</span>
                        </div>
                        <p class="command-description">Ends session and commits deletions.</p>
                        <div class="command-example">
                            C: QUIT<br>
                            S: +OK Goodbye
                        </div>
                    </div>
                </div>

                <h3 style="color: #228B22; margin: 40px 0 20px 0;">Server Responses</h3>
                <div class="command-grid">
                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">+OK</span>
                            <span class="command-type" style="background: #4CAF50;">Success</span>
                        </div>
                        <p class="command-description">Positive response - command successful.</p>
                        <div class="command-example">
                            +OK [optional message]
                        </div>
                    </div>

                    <div class="command-card">
                        <div class="command-header">
                            <span class="command-name">-ERR</span>
                            <span class="command-type" style="background: #f44336;">Error</span>
                        </div>
                        <p class="command-description">Negative response - command failed.</p>
                        <div class="command-example">
                            -ERR [error description]
                        </div>
                    </div>
                </div>
            </div>

            <!-- Simulator Tab -->
            <div id="simulator" class="tab-content">
                <h2 style="color: #006400; margin-bottom: 20px;">Interactive POP3 Simulator</h2>
                
                <div class="simulator">
                    <div class="simulator-header">
                        <div class="simulator-title">
                            <span class="status-indicator" id="statusIndicator"></span>
                            POP3 Session Terminal
                        </div>
                        <div style="color: #888; font-size: 0.9em;">
                            Server: mail.example.com:110
                        </div>
                    </div>

                    <div class="terminal-window" id="terminal">
                        <div class="terminal-line info-text">
                            === POP3 Interactive Simulator ===<br>
                            Click "Connect" to start a session or try Quick Scenarios below.
                        </div>
                    </div>

                    <div class="control-panel">
                        <button class="btn" onclick="connectServer()">Connect to Server</button>
                        <button class="btn btn-secondary" onclick="clearTerminal()">Clear Terminal</button>
                        <button class="btn" onclick="runScenario('full')">Full Session Demo</button>
                        <button class="btn" onclick="runScenario('auth')">Authentication Only</button>
                        <button class="btn" onclick="runScenario('retrieve')">Retrieve Messages</button>
                    </div>

                    <div class="input-group">
                        <input type="text" id="commandInput" class="input-field" placeholder="Enter POP3 command (e.g., USER john.doe)" onkeypress="handleKeyPress(event)">
                        <button class="btn" onclick="sendCommand()">Send Command</button>
                    </div>
                </div>

                <div class="info-banner" style="margin-top: 30px;">
                    <h3>üí° Tips for Using the Simulator</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Start by clicking "Connect to Server" or try a Quick Scenario</li>
                        <li>After connecting, authenticate with: <code>USER username</code> then <code>PASS password</code></li>
                        <li>Try commands like STAT, LIST, RETR 1, DELE 1, and QUIT</li>
                        <li>Watch the server responses to understand the protocol flow</li>
                    </ul>
                </div>
            </div>

            <!-- Flow Tab -->
            <div id="flow" class="tab-content">
                <h2 style="color: #006400; margin-bottom: 20px;">POP3 Session Flow</h2>
                
                <div class="protocol-flow">
                    <h3 style="color: #228B22; margin-bottom: 20px;">Typical POP3 Session Sequence</h3>
                    
                    <div class="flow-step">
                        <div class="flow-number">1</div>
                        <div class="flow-content">
                            <div class="flow-title">Connection Establishment</div>
                            <div>Client connects to server on TCP port 110. Server sends greeting.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                S: +OK POP3 server ready
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">2</div>
                        <div class="flow-content">
                            <div class="flow-title">Authorization - Username</div>
                            <div>Client sends username using USER command.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: USER john.doe<br>
                                S: +OK User accepted
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">3</div>
                        <div class="flow-content">
                            <div class="flow-title">Authorization - Password</div>
                            <div>Client sends password using PASS command.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: PASS mypassword<br>
                                S: +OK Logged in, 5 messages
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">4</div>
                        <div class="flow-content">
                            <div class="flow-title">Transaction - Get Status</div>
                            <div>Client queries mailbox statistics.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: STAT<br>
                                S: +OK 5 3420
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">5</div>
                        <div class="flow-content">
                            <div class="flow-title">Transaction - List Messages</div>
                            <div>Client requests list of messages with sizes.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: LIST<br>
                                S: +OK 5 messages (3420 octets)<br>
                                S: 1 820<br>
                                S: 2 640<br>
                                S: ...
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">6</div>
                        <div class="flow-content">
                            <div class="flow-title">Transaction - Retrieve Messages</div>
                            <div>Client downloads message content.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: RETR 1<br>
                                S: +OK 820 octets<br>
                                S: [message headers and body]<br>
                                S: .
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">7</div>
                        <div class="flow-content">
                            <div class="flow-title">Transaction - Delete Messages (Optional)</div>
                            <div>Client marks messages for deletion.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: DELE 1<br>
                                S: +OK Message 1 deleted
                            </div>
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">8</div>
                        <div class="flow-content">
                            <div class="flow-title">Update - Session Termination</div>
                            <div>Client quits, server commits deletions and closes connection.</div>
                            <div class="command-example" style="margin-top: 10px;">
                                C: QUIT<br>
                                S: +OK Goodbye
                            </div>
                        </div>
                    </div>
                </div>

                <div class="key-concept" style="margin-top: 30px;">
                    <strong>‚ö†Ô∏è Important:</strong> Messages marked with DELE are only permanently deleted when the QUIT command is issued successfully. Using RSET before QUIT will unmark all deletions.
                </div>
            </div>

            <!-- Reference Tab -->
            <div id="reference" class="tab-content">
                <h2 style="color: #006400; margin-bottom: 20px;">Quick Reference Guide</h2>
                
                <table class="reference-table">
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Parameters</th>
                            <th>Purpose</th>
                            <th>Example Response</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>USER</strong></td>
                            <td>username (max 40 chars)</td>
                            <td>Authenticate username</td>
                            <td>+OK User accepted</td>
                        </tr>
                        <tr>
                            <td><strong>PASS</strong></td>
                            <td>password (max 40 chars)</td>
                            <td>Authenticate password</td>
                            <td>+OK Logged in</td>
                        </tr>
                        <tr>
                            <td><strong>STAT</strong></td>
                            <td>none</td>
                            <td>Get message count and total size</td>
                            <td>+OK 5 3420</td>
                        </tr>
                        <tr>
                            <td><strong>LIST</strong></td>
                            <td>[message number]</td>
                            <td>List message(s) with size</td>
                            <td>+OK 1 820</td>
                        </tr>
                        <tr>
                            <td><strong>RETR</strong></td>
                            <td>message number</td>
                            <td>Retrieve message content</td>
                            <td>+OK 820 octets</td>
                        </tr>
                        <tr>
                            <td><strong>DELE</strong></td>
                            <td>message number</td>
                            <td>Mark message for deletion</td>
                            <td>+OK Message deleted</td>
                        </tr>
                        <tr>
                            <td><strong>NOOP</strong></td>
                            <td>none</td>
                            <td>Keep connection alive</td>
                            <td>+OK</td>
                        </tr>
                        <tr>
                            <td><strong>RSET</strong></td>
                            <td>none</td>
                            <td>Reset session state</td>
                            <td>+OK</td>
                        </tr>
                        <tr>
                            <td><strong>QUIT</strong></td>
                            <td>none</td>
                            <td>End session, commit changes</td>
                            <td>+OK Goodbye</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="color: #228B22; margin: 40px 0 20px 0;">Protocol Specifications</h3>
                <div class="info-banner">
                    <ul style="margin-left: 20px;">
                        <li><strong>Port:</strong> TCP 110 (plaintext) or 995 (SSL/TLS)</li>
                        <li><strong>RFC:</strong> RFC 1939 (Official Specification)</li>
                        <li><strong>Response Codes:</strong> +OK (success), -ERR (failure)</li>
                        <li><strong>Max Response Length:</strong> 512 characters</li>
                        <li><strong>Command Terminator:</strong> CRLF (Carriage Return + Line Feed)</li>
                        <li><strong>Multi-line Response Terminator:</strong> Period (.) on a line by itself</li>
                    </ul>
                </div>

                <h3 style="color: #228B22; margin: 40px 0 20px 0;">Security Considerations</h3>
                <div class="command-grid">
                    <div class="command-card">
                        <h4 style="color: #006400;">üîì Plain Text Transmission</h4>
                        <p>Standard POP3 sends credentials in clear text. Always use POP3S (port 995) or STARTTLS for secure connections.</p>
                    </div>
                    <div class="command-card">
                        <h4 style="color: #006400;">üóëÔ∏è Message Deletion</h4>
                        <p>Once deleted and committed (QUIT), messages are permanently removed from the server. Plan your email retention strategy carefully.</p>
                    </div>
                    <div class="command-card">
                        <h4 style="color: #006400;">üîê Authentication Methods</h4>
                        <p>Modern implementations support APOP (encrypted password) and SASL authentication mechanisms for enhanced security.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        // Simulator functionality
        let isConnected = false;
        let isAuthenticated = false;
        let username = '';
        let messages = [
            { id: 1, size: 820, content: "From: alice@example.com\nSubject: Meeting Tomorrow\n\nLet's meet at 10 AM.", deleted: false },
            { id: 2, size: 640, content: "From: bob@example.com\nSubject: Project Update\n\nAttached is the latest report.", deleted: false },
            { id: 3, size: 1120, content: "From: carol@example.com\nSubject: Quick Question\n\nCan you review my code?", deleted: false },
            { id: 4, size: 520, content: "From: dave@example.com\nSubject: Lunch Plans\n\nWant to grab lunch today?", deleted: false },
            { id: 5, size: 320, content: "From: eve@example.com\nSubject: Thanks!\n\nThanks for your help!", deleted: false }
        ];

        function addToTerminal(text, className = '') {
            const terminal = document.getElementById('terminal');
            const line = document.createElement('div');
            line.className = 'terminal-line ' + className;
            line.innerHTML = text;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        function updateStatus(connected) {
            isConnected = connected;
            const indicator = document.getElementById('statusIndicator');
            if (connected) {
                indicator.className = 'status-indicator status-connected';
            } else {
                indicator.className = 'status-indicator status-disconnected';
            }
        }

        function connectServer() {
            clearTerminal();
            addToTerminal('> Connecting to mail.example.com:110...', 'info-text');
            setTimeout(() => {
                addToTerminal('S: +OK POP3 server ready &lt;1896.697170952@mail.example.com&gt;', 'server-response');
                updateStatus(true);
                isAuthenticated = false;
                username = '';
                // Reset message states
                messages.forEach(msg => msg.deleted = false);
            }, 500);
        }

        function clearTerminal() {
            document.getElementById('terminal').innerHTML = '';
        }

        function processCommand(cmd) {
            if (!isConnected) {
                addToTerminal('ERROR: Not connected to server. Click "Connect to Server" first.', 'error-response');
                return;
            }

            const parts = cmd.trim().split(' ');
            const command = parts[0].toUpperCase();
            const arg = parts.slice(1).join(' ');

            addToTerminal('C: ' + cmd, 'client-command');

            switch(command) {
                case 'USER':
                    if (arg) {
                        username = arg;
                        setTimeout(() => addToTerminal('S: +OK User accepted', 'server-response'), 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Username required', 'error-response'), 300);
                    }
                    break;

                case 'PASS':
                    if (username && arg) {
                        isAuthenticated = true;
                        const activeCount = messages.filter(m => !m.deleted).length;
                        const totalSize = messages.filter(m => !m.deleted).reduce((sum, m) => sum + m.size, 0);
                        setTimeout(() => addToTerminal(`S: +OK Logged in, ${activeCount} messages (${totalSize} octets)`, 'server-response'), 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Send USER command first or password required', 'error-response'), 300);
                    }
                    break;

                case 'STAT':
                    if (isAuthenticated) {
                        const activeCount = messages.filter(m => !m.deleted).length;
                        const totalSize = messages.filter(m => !m.deleted).reduce((sum, m) => sum + m.size, 0);
                        setTimeout(() => addToTerminal(`S: +OK ${activeCount} ${totalSize}`, 'server-response'), 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'LIST':
                    if (isAuthenticated) {
                        const activeMessages = messages.filter(m => !m.deleted);
                        const totalSize = activeMessages.reduce((sum, m) => sum + m.size, 0);
                        setTimeout(() => {
                            addToTerminal(`S: +OK ${activeMessages.length} messages (${totalSize} octets)`, 'server-response');
                            activeMessages.forEach(msg => {
                                addToTerminal(`S: ${msg.id} ${msg.size}`, 'server-response');
                            });
                            addToTerminal('S: .', 'server-response');
                        }, 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'RETR':
                    if (isAuthenticated) {
                        const msgNum = parseInt(arg);
                        const msg = messages.find(m => m.id === msgNum);
                        if (msg && !msg.deleted) {
                            setTimeout(() => {
                                addToTerminal(`S: +OK ${msg.size} octets`, 'server-response');
                                addToTerminal(`S: ${msg.content}`, 'server-response');
                                addToTerminal('S: .', 'server-response');
                            }, 300);
                        } else {
                            setTimeout(() => addToTerminal('S: -ERR No such message', 'error-response'), 300);
                        }
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'DELE':
                    if (isAuthenticated) {
                        const msgNum = parseInt(arg);
                        const msg = messages.find(m => m.id === msgNum);
                        if (msg && !msg.deleted) {
                            msg.deleted = true;
                            setTimeout(() => addToTerminal(`S: +OK Message ${msgNum} deleted`, 'server-response'), 300);
                        } else {
                            setTimeout(() => addToTerminal('S: -ERR No such message or already deleted', 'error-response'), 300);
                        }
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'NOOP':
                    if (isAuthenticated) {
                        setTimeout(() => addToTerminal('S: +OK', 'server-response'), 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'RSET':
                    if (isAuthenticated) {
                        messages.forEach(msg => msg.deleted = false);
                        setTimeout(() => addToTerminal('S: +OK Reset complete', 'server-response'), 300);
                    } else {
                        setTimeout(() => addToTerminal('S: -ERR Not authenticated', 'error-response'), 300);
                    }
                    break;

                case 'QUIT':
                    const deletedCount = messages.filter(m => m.deleted).length;
                    setTimeout(() => {
                        addToTerminal(`S: +OK Goodbye, ${deletedCount} messages deleted`, 'server-response');
                        updateStatus(false);
                        isAuthenticated = false;
                        username = '';
                    }, 300);
                    break;

                default:
                    setTimeout(() => addToTerminal('S: -ERR Unknown command', 'error-response'), 300);
            }
        }

        function sendCommand() {
            const input = document.getElementById('commandInput');
            const cmd = input.value.trim();
            if (cmd) {
                processCommand(cmd);
                input.value = '';
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendCommand();
            }
        }

        function runScenario(type) {
            clearTerminal();
            const scenarios = {
                auth: [
                    { cmd: 'connect', delay: 0 },
                    { cmd: 'USER john.doe', delay: 800 },
                    { cmd: 'PASS secretpass', delay: 1600 }
                ],
                full: [
                    { cmd: 'connect', delay: 0 },
                    { cmd: 'USER john.doe', delay: 800 },
                    { cmd: 'PASS secretpass', delay: 1600 },
                    { cmd: 'STAT', delay: 2400 },
                    { cmd: 'LIST', delay: 3200 },
                    { cmd: 'RETR 1', delay: 4000 },
                    { cmd: 'DELE 1', delay: 4800 },
                    { cmd: 'QUIT', delay: 5600 }
                ],
                retrieve: [
                    { cmd: 'connect', delay: 0 },
                    { cmd: 'USER john.doe', delay: 800 },
                    { cmd: 'PASS secretpass', delay: 1600 },
                    { cmd: 'LIST', delay: 2400 },
                    { cmd: 'RETR 1', delay: 3200 },
                    { cmd: 'RETR 2', delay: 4000 }
                ]
            };

            const sequence = scenarios[type];
            sequence.forEach(step => {
                setTimeout(() => {
                    if (step.cmd === 'connect') {
                        connectServer();
                    } else {
                        processCommand(step.cmd);
                    }
                }, step.delay);
            });
        }

        // Initialize status indicator
        updateStatus(false);
    </script>
</body>
</html>
